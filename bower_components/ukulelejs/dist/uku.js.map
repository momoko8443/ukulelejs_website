{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///uku.js","webpack:///webpack/bootstrap 909cd7ae4cf29eef67ff","webpack:///./src/core/Ukulele.ts","webpack:///./src/core/EventEmitter.ts","webpack:///./src/core/DefinitionManager.ts","webpack:///./src/util/ObjectUtil.ts","webpack:///./src/extend/Ajax.ts","webpack:///./src/model/ControllerModel.ts","webpack:///./src/model/ComponentModel.ts","webpack:///./src/model/ComponentPoolItem.ts","webpack:///./src/util/UkuleleUtil.ts","webpack:///./src/extend/Selector.ts","webpack:///./src/model/ComponentConfiguration.ts","webpack:///./src/core/DirtyChecker.ts","webpack:///./src/core/UkuEventType.ts","webpack:///./src/core/Event.ts","webpack:///./src/core/Analyzer.ts","webpack:///./src/core/BoundItemAttributeFactory.ts","webpack:///./src/model/directive/BoundItemAttrSelected.ts","webpack:///./src/model/BoundItemAttribute.ts","webpack:///./src/model/BoundItemBase.ts","webpack:///./src/model/directive/BoundItemAttrDataItem.ts","webpack:///./src/model/directive/BoundItemAttrSrc.ts","webpack:///./src/model/directive/BoundItemAttrDisabled.ts","webpack:///./src/model/directive/BoundItemAttrRender.ts","webpack:///./src/model/directive/BoundItemAttrStyle.ts","webpack:///./src/model/directive/BoundItemAttrValue.ts","webpack:///./src/model/directive/BoundItemAttrVisible.ts","webpack:///./src/model/BoundItemExpression.ts","webpack:///./src/model/BoundItemInnerText.ts","webpack:///./src/model/BoundItemRepeat.ts","webpack:///./src/model/BoundItemComponentAttribute.ts","webpack:///./src/core/ElementActionBinder.ts","webpack:///./src/extend/EventListener.ts"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","EventEmitter_1","DefinitionManager_1","DirtyChecker_1","Analyzer_1","Selector_1","UkuEventType_1","Event_1","Ukulele","_super","_this","apply","arguments","promiseArray","init","Promise","all","then","manageApplication","handleElement","element","analyizeElement","e","dispatchEvent","Event","UkuEventType","HANDLE_ELEMENT_COMPLETED","registerController","instanceName","controllerInst","window","_internal_getDefinitionManager","addControllerDefinition","getController","getControllerDefinition","controllerInstance","registerComponent","tag","templateUrl","preload","addComponentDefinition","push","getComponent","tagName","getComponentController","componentId","getControllerInstByDomId","refresh","alias","excludeElement","dirtyChecker","DirtyChecker","runDirtyChecking","defMgr","DefinitionManager","_internal_dealWithElement","callback","apps","Selector","querySelectorAll","document","length","Error","ele","INITIALIZED","anylyzer","Analyzer","retFunc","addListener","ANALYIZE_COMPLETED","EventEmitter","REFRESH","eventsPool","getEventsPool","eventType","handler","removeListener","splice","hasListener","event","handlers","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","next","rejected","result","done","__generator","body","verb","n","v","op","f","TypeError","_","y","t","label","ops","pop","trys","sent","throw","return","ObjectUtil_1","Ajax_1","ControllerModel_1","ComponentModel_1","ComponentPoolItem_1","UkuleleUtil_1","_uku","controllersDefinition","componentsDefinition","componentsPool","copyControllers","dependentScriptsCache","ajax","Ajax","uku","getComponentsDefinition","getComponentsPool","setComponentsPool","pool","setComponentsDefinition","getComponentDefinition","getControllersDefinition","getCopyControllers","copyAllController","controllerModel","controller","copyControllerInstance","previousCtrlInst","ObjectUtil","deepClone","ControllerModel","_alias","domId","_dom","ComponentPoolItem","get","componentConfig","UkuleleUtil","getComponentConfiguration","analyizeComponent","addLazyComponentDefinition","lazy","getBoundAttributeValue","attr","additionalArgu","_i","controllerModels","getControllerModelByName","controllers","forEach","parameters","concat","getFinalValue","expression","getBoundControllerModelByName","getFinalValueByExpression","attrName","alias_list","keys","instanceNames","getBoundModelInstantNames","arr","config","loadDependentScript","src","self","head","getElementsByTagName","script","createElement","type","charset","async","onload","target","appendChild","deps","tmpAMD","ccsExternal","_a","dep","_b","dependentScripts","undefined","componentControllerScript","buildeComponentModel","template","stylesheet","style","dealWithShadowStyle","styleArray","split","newArray","index","newValue","replace","join","innerHTML","debugComment","controllerClazz","eval","newComp","ComponentModel","console","error","isArray","obj","toString","getType","compare","objA","objB","typeB","keys_a","keys_b","key","valuA","valuB","isEqual","itemA","itemB","isEqual2","o","j","url","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","ctrlInst","boundItems","addBoundItem","boundItem","getBoundItemsByName","name","tempBoundItems","attributeName","clazz","_tagName","_templateUrl","_lazy","ComponentConfiguration_1","ValueAndParent","_value","_parant","parent","getFinalAttribute","temp","isParent","shift","searchHtmlTag","htmlString","reTemp","re","RegExp","search","getInnerHtml","match","matchString","tempString","substr","index2","lastIndexOf","substring","tempDom","tpl","scripts","ccs","ComponentConfiguration","searchUkuAttrTag","getAttrFromUkuTag","ukuTag","camelCase","names","firstLetter","charAt","toUpperCase","searchUkuExpTag","searchUkuFuncArg","re1","re2","isRepeat","getAttribute","isInRepeat","parents","parent_1","nodeType","getBoundModelInstantName","controlInstName","controller_alias_list","pattern","getAttributeFinalValue","object","valueObject","getAttributeFinalValueAndParent","parentValue","finalValue","attrValue","property","objects","tempScope","pattern2","query","find","fuzzyFind","text","attributes","nodeName","directText","nodes","childNodes","node","nodeValue","trim","parentNode","_template","_dependentScripts","_componentControllerScript","_stylesheet","ctrlAliasName","watchController","parentUku","previousCtrlModel","changedElementCount","previousFinalValue","changedBoundItems","changedBoundItem","render","_eventType","_element","BoundItemAttributeFactory_1","BoundItemExpression_1","BoundItemInnerText_1","BoundItemRepeat_1","BoundItemComponentAttribute_1","ElementActionBinder_1","EventListener_1","dealWithAttribute","boundItem_1","BoundItemAttributeFactory","getInstance","generateInstance","controllers_1","elementChangedBinder","searchComponent","searchExpression","searchUkuAttribute","sortAttributes","subElement","orderAttrs","attribute","unshift","subElements","isSelfHasUkuTag","allChildren","child","matchElement","tempArr","dealWithEvent","dealWithRepeat","dealWithInnerText","comp","attrs","compDef","localName","dealWithComponent","children","Clazz","randomAlias","tempFragment","htmlDom","cc","_loop_1","this_1","Math","floor","random","insertAdjacentHTML","outerHTML","previousElementSibling","classList","add","fire","data","bubbles","cancelable","CustomEvent","toLowerCase","setAttribute","boundItem_2","BoundItemComponentAttribute","controllers_2","removeChild","_initialized","dealWithExpression","slice","boundItem_3","BoundItemExpression","controllers_3","boundItem_4","BoundItemInnerText","controllers_4","eventName","eventNameInListener","EventListener","addEventListener","Function","log","arg","new_expression_1","repeatExpression","itemName","controllers_5","boundItem_5","BoundItemRepeat","BoundItemAttrSelected_1","BoundItemAttrDataItem_1","BoundItemAttrSrc_1","BoundItemAttrDisabled_1","BoundItemAttrRender_1","BoundItemAttrStyle_1","BoundItemAttrValue_1","BoundItemAttrVisible_1","BoundItemAttribute_1","_instance","instance","BountItemAttrSelected","BoundItemAttrDataItem","BoundItemAttrSrc","BoundItemAttrDisabled","BoundItemAttrRender","BoundItemAttrStyle","BoundItemAttrValue","BoundItemAttrVisible","BoundItemAttribute","elementName","BoundItemBase_1","BoundItemBase","_attrName","JSON","stringify","disabled","oldDisplaySetting","display","cssName","checked","visibility","renderTemplate","parentElement","beginCommentString","endCommentString","generateTempContainer","beginComment","createComment","insertBefore","endComment","nextSibling","filter","acceptNode","NodeFilter","FILTER_ACCEPT","FILTER_SKIP","safeFilter","treeWalker","createTreeWalker","SHOW_COMMENT","nextNode","commentNode","currentNode","tempDiv","blankDiv","childrenHTML","removeAttribute","Uku_Clazz","ukulele","compPool","sibling","itemType","newOuterHtml","newItemDom","componentController","host","elementStrategies","inputTextCase","textareaCase","selectCase","checkboxCase","radioCase","func","goon","isSupportInputType","inputType","finalInstance","tmpArr","options","option","selected","selectedItem","parse","on"],"mappings":"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","file":"uku.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar EventEmitter_1 = __webpack_require__(1);\n\tvar DefinitionManager_1 = __webpack_require__(2);\n\tvar DirtyChecker_1 = __webpack_require__(11);\n\tvar Analyzer_1 = __webpack_require__(14);\n\tvar Selector_1 = __webpack_require__(9);\n\tvar UkuEventType_1 = __webpack_require__(12);\n\tvar Event_1 = __webpack_require__(13);\n\tvar Ukulele = (function (_super) {\n\t    __extends(Ukulele, _super);\n\t    function Ukulele() {\n\t        var _this = _super !== null && _super.apply(this, arguments) || this;\n\t        _this.promiseArray = [];\n\t        return _this;\n\t    }\n\t    Ukulele.prototype.init = function () {\n\t        var _this = this;\n\t        Promise.all(this.promiseArray).then(function () {\n\t            _this.manageApplication();\n\t        });\n\t    };\n\t    Ukulele.prototype.handleElement = function (element) {\n\t        var _this = this;\n\t        this.analyizeElement(element, function (e) {\n\t            _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.HANDLE_ELEMENT_COMPLETED, e));\n\t        });\n\t    };\n\t    Ukulele.prototype.registerController = function (instanceName, controllerInst) {\n\t        window[instanceName] = controllerInst;\n\t        this._internal_getDefinitionManager().addControllerDefinition(instanceName, controllerInst);\n\t    };\n\t    Ukulele.prototype.getController = function (instanceName) {\n\t        return this._internal_getDefinitionManager().getControllerDefinition(instanceName).controllerInstance;\n\t    };\n\t    Ukulele.prototype.registerComponent = function (tag, templateUrl, preload) {\n\t        var p = this._internal_getDefinitionManager().addComponentDefinition(tag, templateUrl, preload);\n\t        this.promiseArray.push(p);\n\t    };\n\t    Ukulele.prototype.getComponent = function (tagName) {\n\t        return this._internal_getDefinitionManager().getComponent(tagName);\n\t    };\n\t    Ukulele.prototype.getComponentController = function (componentId) {\n\t        return this._internal_getDefinitionManager().getControllerInstByDomId(componentId);\n\t    };\n\t    Ukulele.prototype.refresh = function (alias, excludeElement) {\n\t        if (!this.dirtyChecker) {\n\t            this.dirtyChecker = new DirtyChecker_1.DirtyChecker(this);\n\t        }\n\t        this.dirtyChecker.runDirtyChecking(alias, excludeElement);\n\t    };\n\t    //internal function\n\t    Ukulele.prototype._internal_getDefinitionManager = function () {\n\t        if (!this.defMgr) {\n\t            this.defMgr = new DefinitionManager_1.DefinitionManager(this);\n\t        }\n\t        return this.defMgr;\n\t    };\n\t    Ukulele.prototype._internal_dealWithElement = function (element, callback) {\n\t        this.analyizeElement(element, callback);\n\t    };\n\t    Ukulele.prototype.manageApplication = function () {\n\t        var _this = this;\n\t        var apps = Selector_1.Selector.querySelectorAll(document, \"[uku-application]\");\n\t        if (apps.length === 1) {\n\t            this.analyizeElement(apps[0], function (ele) {\n\t                _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.INITIALIZED, ele));\n\t            });\n\t        }\n\t        else {\n\t            throw new Error(\"Only one 'uku-application' can be declared in a whole html.\");\n\t        }\n\t    };\n\t    Ukulele.prototype.analyizeElement = function (element, callback) {\n\t        var anylyzer = new Analyzer_1.Analyzer(this);\n\t        if (callback) {\n\t            (function (retFunc) {\n\t                anylyzer.addListener(Analyzer_1.Analyzer.ANALYIZE_COMPLETED, function (e) {\n\t                    retFunc(e.element);\n\t                });\n\t            })(callback);\n\t        }\n\t        anylyzer.analyizeElement(element);\n\t    };\n\t    return Ukulele;\n\t}(EventEmitter_1.EventEmitter));\n\tUkulele.INITIALIZED = 'initialized';\n\tUkulele.REFRESH = 'refresh';\n\tUkulele.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\n\texports.Ukulele = Ukulele;\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar EventEmitter = (function () {\n\t    function EventEmitter() {\n\t        this.eventsPool = {};\n\t    }\n\t    EventEmitter.prototype.getEventsPool = function () {\n\t        return this.eventsPool;\n\t    };\n\t    EventEmitter.prototype.addListener = function (eventType, handler) {\n\t        if (!this.eventsPool[eventType]) {\n\t            this.eventsPool[eventType] = [];\n\t        }\n\t        this.eventsPool[eventType].push(handler);\n\t    };\n\t    EventEmitter.prototype.removeListener = function (eventType, handler) {\n\t        if (this.eventsPool[eventType]) {\n\t            for (var i = this.eventsPool[eventType].length - 1; i >= 0; i--) {\n\t                if (this.eventsPool[eventType][i] === handler) {\n\t                    this.eventsPool[eventType].splice(i, 1);\n\t                    break;\n\t                }\n\t            }\n\t        }\n\t    };\n\t    EventEmitter.prototype.hasListener = function (eventType) {\n\t        if (this.eventsPool[eventType] && this.eventsPool[eventType].length > 0) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    EventEmitter.prototype.dispatchEvent = function (event) {\n\t        if (event && event.eventType) {\n\t            var handlers = this.eventsPool[event.eventType];\n\t            if (handlers) {\n\t                for (var i = 0; i < handlers.length; i++) {\n\t                    handlers[i].call(this, event);\n\t                }\n\t            }\n\t        }\n\t    };\n\t    return EventEmitter;\n\t}());\n\texports.EventEmitter = EventEmitter;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ObjectUtil_1 = __webpack_require__(3);\n\tvar Ajax_1 = __webpack_require__(4);\n\tvar ControllerModel_1 = __webpack_require__(5);\n\tvar ComponentModel_1 = __webpack_require__(6);\n\tvar ComponentPoolItem_1 = __webpack_require__(7);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar DefinitionManager = (function () {\n\t    function DefinitionManager(_uku) {\n\t        this.controllersDefinition = {};\n\t        this.componentsDefinition = {};\n\t        this.componentsPool = {};\n\t        this.copyControllers = {};\n\t        this.dependentScriptsCache = {};\n\t        this.ajax = new Ajax_1.Ajax();\n\t        this.uku = _uku;\n\t    }\n\t    DefinitionManager.prototype.getComponentsDefinition = function () {\n\t        return this.componentsDefinition;\n\t    };\n\t    DefinitionManager.prototype.getComponentsPool = function () {\n\t        return this.componentsPool;\n\t    };\n\t    DefinitionManager.prototype.setComponentsPool = function (pool) {\n\t        this.componentsPool = pool;\n\t    };\n\t    DefinitionManager.prototype.setComponentsDefinition = function (value) {\n\t        this.componentsDefinition = value;\n\t    };\n\t    DefinitionManager.prototype.getComponentDefinition = function (tagName) {\n\t        return this.componentsDefinition[tagName];\n\t    };\n\t    DefinitionManager.prototype.getControllerDefinition = function (instanceName) {\n\t        return this.controllersDefinition[instanceName];\n\t    };\n\t    DefinitionManager.prototype.getControllersDefinition = function () {\n\t        return this.controllersDefinition;\n\t    };\n\t    DefinitionManager.prototype.getComponent = function (tagName) {\n\t        return this.componentsPool[tagName];\n\t    };\n\t    DefinitionManager.prototype.getCopyControllers = function () {\n\t        return this.copyControllers;\n\t    };\n\t    DefinitionManager.prototype.copyAllController = function () {\n\t        for (var alias in this.controllersDefinition) {\n\t            var controllerModel = this.controllersDefinition[alias];\n\t            var controller = controllerModel.controllerInstance;\n\t            this.copyControllerInstance(controller, alias);\n\t        }\n\t    };\n\t    DefinitionManager.prototype.copyControllerInstance = function (controller, alias) {\n\t        var previousCtrlInst = ObjectUtil_1.ObjectUtil.deepClone(controller);\n\t        delete this.copyControllers[alias];\n\t        this.copyControllers[alias] = previousCtrlInst;\n\t    };\n\t    DefinitionManager.prototype.addControllerDefinition = function (instanceName, controllerInst) {\n\t        var controllerModel = new ControllerModel_1.ControllerModel(instanceName, controllerInst);\n\t        controllerInst._alias = instanceName;\n\t        this.controllersDefinition[instanceName] = controllerModel;\n\t    };\n\t    DefinitionManager.prototype.getControllerInstByDomId = function (domId) {\n\t        for (var alias in this.controllersDefinition) {\n\t            var controllerModel = this.controllersDefinition[alias];\n\t            var controller = controllerModel.controllerInstance;\n\t            if (controller._dom && controller._dom.id === domId) {\n\t                return controller;\n\t            }\n\t        }\n\t        return undefined;\n\t    };\n\t    DefinitionManager.prototype.addComponentDefinition = function (tag, templateUrl, preload) {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            if (!preload) {\n\t                _this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, true);\n\t                resolve();\n\t            }\n\t            else {\n\t                _this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, false);\n\t                return _this.ajax.get(templateUrl).then(function (result) {\n\t                    var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\n\t                    return _this.analyizeComponent(tag, componentConfig);\n\t                });\n\t            }\n\t        });\n\t    };\n\t    DefinitionManager.prototype.addLazyComponentDefinition = function (tag, templateUrl) {\n\t        var _this = this;\n\t        return new Promise(function (resolve, reject) {\n\t            return _this.ajax.get(templateUrl).then(function (result) {\n\t                var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\n\t                return _this.analyizeComponent(tag, componentConfig).then(function () {\n\t                    _this.componentsPool[tag] = { 'tagName': tag, 'templateUrl': templateUrl, 'lazy': false };\n\t                    resolve();\n\t                });\n\t            });\n\t        });\n\t    };\n\t    DefinitionManager.prototype.getBoundAttributeValue = function (attr) {\n\t        var additionalArgu = [];\n\t        for (var _i = 1; _i < arguments.length; _i++) {\n\t            additionalArgu[_i - 1] = arguments[_i];\n\t        }\n\t        var controllerModels = this.getControllerModelByName(attr);\n\t        var controllers = [];\n\t        controllerModels.forEach(function (controllerModel) {\n\t            controllers.push(controllerModel.controllerInstance);\n\t        });\n\t        var parameters = [this.uku, controllers, attr];\n\t        parameters = parameters.concat(additionalArgu);\n\t        var result = UkuleleUtil_1.UkuleleUtil.getFinalValue.apply(null, parameters);\n\t        return result;\n\t    };\n\t    ;\n\t    DefinitionManager.prototype.getControllerModelByName = function (expression) {\n\t        return this.getBoundControllerModelByName(expression);\n\t    };\n\t    ;\n\t    DefinitionManager.prototype.getFinalValueByExpression = function (expression) {\n\t        var controllerModels = this.getControllerModelByName(expression);\n\t        var controllers = [];\n\t        controllerModels.forEach(function (controllerModel) {\n\t            controllers.push(controllerModel.controllerInstance);\n\t        });\n\t        return UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, expression);\n\t    };\n\t    ;\n\t    DefinitionManager.prototype.getBoundControllerModelByName = function (attrName) {\n\t        var _this = this;\n\t        var alias_list = Object.keys(this.controllersDefinition);\n\t        var instanceNames = UkuleleUtil_1.UkuleleUtil.getBoundModelInstantNames(alias_list, attrName);\n\t        var arr = [];\n\t        instanceNames.forEach(function (instanceName) {\n\t            var controllerModel = _this.controllersDefinition[instanceName];\n\t            arr.push(controllerModel);\n\t        });\n\t        return arr;\n\t    };\n\t    DefinitionManager.prototype.analyizeComponent = function (tag, config) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            function loadDependentScript(src) {\n\t                return new Promise(function (resolve, reject) {\n\t                    if (!self.dependentScriptsCache[src]) {\n\t                        var head = document.getElementsByTagName('HEAD')[0];\n\t                        var script = document.createElement('script');\n\t                        script.type = 'text/javascript';\n\t                        script.charset = 'utf-8';\n\t                        script.async = true;\n\t                        script.src = src;\n\t                        script.onload = function (e) {\n\t                            self.dependentScriptsCache[e.target['src']] = true;\n\t                            resolve();\n\t                        };\n\t                        head.appendChild(script);\n\t                    }\n\t                    else {\n\t                        resolve();\n\t                    }\n\t                });\n\t            }\n\t            var deps, self, tmpAMD, ccsExternal, _a, i, dep;\n\t            return __generator(this, function (_b) {\n\t                switch (_b.label) {\n\t                    case 0:\n\t                        deps = config.dependentScripts;\n\t                        self = this;\n\t                        if (!(deps && deps.length > 0)) return [3 /*break*/, 7];\n\t                        tmpAMD = void 0;\n\t                        if (typeof window['define'] === 'function' && window['define'].amd) {\n\t                            tmpAMD = window['define'];\n\t                            window['define'] = undefined;\n\t                        }\n\t                        if (!!config.componentControllerScript) return [3 /*break*/, 2];\n\t                        ccsExternal = deps[deps.length - 1];\n\t                        _a = config;\n\t                        return [4 /*yield*/, this.ajax.get(ccsExternal)];\n\t                    case 1:\n\t                        _a.componentControllerScript = _b.sent();\n\t                        deps.pop();\n\t                        _b.label = 2;\n\t                    case 2:\n\t                        i = 0;\n\t                        _b.label = 3;\n\t                    case 3:\n\t                        if (!(i < deps.length)) return [3 /*break*/, 6];\n\t                        dep = deps[i];\n\t                        return [4 /*yield*/, loadDependentScript(dep)];\n\t                    case 4:\n\t                        _b.sent();\n\t                        _b.label = 5;\n\t                    case 5:\n\t                        i++;\n\t                        return [3 /*break*/, 3];\n\t                    case 6:\n\t                        if (tmpAMD) {\n\t                            window['define'] = tmpAMD;\n\t                        }\n\t                        this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\n\t                        return [2 /*return*/];\n\t                    case 7:\n\t                        this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\n\t                        return [2 /*return*/];\n\t                    case 8: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    DefinitionManager.prototype.buildeComponentModel = function (tag, template, script, style) {\n\t        var debugComment = \"//# sourceURL=\" + tag + \".js\";\n\t        try {\n\t            var controllerClazz = void 0;\n\t            if (script) {\n\t                script += debugComment;\n\t                controllerClazz = eval(script);\n\t            }\n\t            var newComp = new ComponentModel_1.ComponentModel(tag, template, controllerClazz);\n\t            this.componentsDefinition[tag] = newComp;\n\t            if (style) {\n\t                dealWithShadowStyle(tag, style);\n\t            }\n\t        }\n\t        catch (e) {\n\t            console.error(e);\n\t        }\n\t        function dealWithShadowStyle(tagName, stylesheet) {\n\t            var head = document.getElementsByTagName('HEAD')[0];\n\t            var style = document.createElement('style');\n\t            style.type = 'text/css';\n\t            var styleArray = stylesheet.split(\"}\");\n\t            var newArray = [];\n\t            styleArray.forEach(function (value, index) {\n\t                var newValue = value.replace(/^\\s*/, \"\");\n\t                if (newValue) {\n\t                    newArray.push(newValue);\n\t                }\n\t            });\n\t            stylesheet = newArray.join(\"}\\n\" + \".\" + tagName + \" \");\n\t            stylesheet = \".\" + tagName + \" \" + stylesheet + \"}\";\n\t            style.innerHTML = stylesheet;\n\t            head.appendChild(style);\n\t        }\n\t    };\n\t    return DefinitionManager;\n\t}());\n\texports.DefinitionManager = DefinitionManager;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ObjectUtil = (function () {\n\t    function ObjectUtil() {\n\t    }\n\t    ObjectUtil.isArray = function (obj) {\n\t        return Object.prototype.toString.call(obj) === '[object Array]';\n\t    };\n\t    ObjectUtil.getType = function (obj) {\n\t        var type = typeof (obj);\n\t        if (type === \"object\") {\n\t            if (ObjectUtil.isArray(obj)) {\n\t                return \"array\";\n\t            }\n\t            else {\n\t                return type;\n\t            }\n\t        }\n\t        else {\n\t            return type;\n\t        }\n\t    };\n\t    ObjectUtil.compare = function (objA, objB) {\n\t        var type = ObjectUtil.getType(objA);\n\t        var typeB = ObjectUtil.getType(objB);\n\t        var result = true;\n\t        if (type !== typeB) {\n\t            return false;\n\t        }\n\t        else {\n\t            switch (type) {\n\t                case \"object\":\n\t                    if (objA === null && objB === null) {\n\t                        result = true;\n\t                    }\n\t                    else if (objA === null || objB === null) {\n\t                        result = false;\n\t                    }\n\t                    else {\n\t                        var keys_a = Object.keys(objA);\n\t                        var keys_b = Object.keys(objB);\n\t                        if (keys_a.length != keys_b.length) {\n\t                            result = false;\n\t                        }\n\t                        else if (keys_a.length === 0 && keys_b.length === 0) {\n\t                            result = true;\n\t                        }\n\t                        else {\n\t                            for (var key in objA) {\n\t                                var valuA = objA[key];\n\t                                var valuB = objB[key];\n\t                                var isEqual = ObjectUtil.compare(valuA, valuB);\n\t                                if (!isEqual) {\n\t                                    result = false;\n\t                                    break;\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                    break;\n\t                case \"array\":\n\t                    if (objA.length === objB.length) {\n\t                        for (var i = 0; i < objA.length; i++) {\n\t                            var itemA = objA[i];\n\t                            var itemB = objB[i];\n\t                            var isEqual2 = ObjectUtil.compare(itemA, itemB);\n\t                            if (!isEqual2) {\n\t                                result = false;\n\t                                break;\n\t                            }\n\t                        }\n\t                    }\n\t                    else {\n\t                        result = false;\n\t                    }\n\t                    break;\n\t                case \"function\":\n\t                    result = objA.toString() === objB.toString();\n\t                    break;\n\t                default:\n\t                    result = objA === objB;\n\t                    break;\n\t            }\n\t        }\n\t        return result;\n\t    };\n\t    ObjectUtil.deepClone = function (obj) {\n\t        var o;\n\t        var i;\n\t        var j;\n\t        if (typeof (obj) !== \"object\" || obj === null) {\n\t            return obj;\n\t        }\n\t        if (obj instanceof (Array)) {\n\t            o = [];\n\t            i = 0;\n\t            j = obj.length;\n\t            for (; i < j; i++) {\n\t                if (typeof (obj[i]) === \"object\" && obj[i] !== null) {\n\t                    o[i] = ObjectUtil.deepClone(obj[i]);\n\t                }\n\t                else {\n\t                    o[i] = obj[i];\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            o = {};\n\t            for (i in obj) {\n\t                if (typeof (obj[i]) === \"object\" && obj[i] !== null && i !== \"_dom\") {\n\t                    o[i] = ObjectUtil.deepClone(obj[i]);\n\t                }\n\t                else {\n\t                    o[i] = obj[i];\n\t                }\n\t            }\n\t        }\n\t        return o;\n\t    };\n\t    return ObjectUtil;\n\t}());\n\texports.ObjectUtil = ObjectUtil;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar Ajax = (function () {\n\t    function Ajax() {\n\t    }\n\t    Ajax.prototype.get = function (url) {\n\t        return new Promise(function (resolve, reject) {\n\t            var request = new XMLHttpRequest();\n\t            request.onreadystatechange = function () {\n\t                if (request.readyState === 4) {\n\t                    if (request.status === 200) {\n\t                        resolve(request.responseText);\n\t                    }\n\t                    else {\n\t                        reject();\n\t                    }\n\t                }\n\t            };\n\t            request.open(\"GET\", url, true);\n\t            request.send(null);\n\t        });\n\t    };\n\t    return Ajax;\n\t}());\n\texports.Ajax = Ajax;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ControllerModel = (function () {\n\t    function ControllerModel(alias, ctrlInst) {\n\t        this.alias = alias;\n\t        this.controllerInstance = ctrlInst;\n\t        this.boundItems = [];\n\t    }\n\t    ControllerModel.prototype.addBoundItem = function (boundItem) {\n\t        this.boundItems.push(boundItem);\n\t    };\n\t    ControllerModel.prototype.getBoundItemsByName = function (name) {\n\t        var tempBoundItems = [];\n\t        for (var i = 0; i < this.boundItems.length; i++) {\n\t            var boundItem = this.boundItems[i];\n\t            if (boundItem.attributeName === name) {\n\t                tempBoundItems.push(boundItem);\n\t            }\n\t        }\n\t        return tempBoundItems;\n\t    };\n\t    return ControllerModel;\n\t}());\n\texports.ControllerModel = ControllerModel;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ComponentModel = (function () {\n\t    function ComponentModel(tagName, template, clazz) {\n\t        this.tagName = tagName;\n\t        this.template = template;\n\t        this.controllerClazz = clazz;\n\t    }\n\t    return ComponentModel;\n\t}());\n\texports.ComponentModel = ComponentModel;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ComponentPoolItem = (function () {\n\t    function ComponentPoolItem(_tagName, _templateUrl, _lazy) {\n\t        this.tagName = _tagName;\n\t        this.templateUrl = _templateUrl;\n\t        this.lazy = _lazy;\n\t    }\n\t    return ComponentPoolItem;\n\t}());\n\texports.ComponentPoolItem = ComponentPoolItem;\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar Selector_1 = __webpack_require__(9);\n\tvar ComponentConfiguration_1 = __webpack_require__(10);\n\tvar ValueAndParent = (function () {\n\t    function ValueAndParent(_value, _parant) {\n\t        this.value = _value;\n\t        this.parent = _parant;\n\t    }\n\t    return ValueAndParent;\n\t}());\n\tvar UkuleleUtil = (function () {\n\t    function UkuleleUtil() {\n\t    }\n\t    UkuleleUtil.getFinalAttribute = function (expression) {\n\t        var temp = expression.split(\".\");\n\t        var isParent = temp.shift();\n\t        if (isParent === \"parent\") {\n\t            return UkuleleUtil.getFinalAttribute(temp.join(\".\"));\n\t        }\n\t        return temp.join(\".\");\n\t    };\n\t    UkuleleUtil.searchHtmlTag = function (htmlString, tagName) {\n\t        var reTemp = \"^<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">$\";\n\t        var re = new RegExp(reTemp);\n\t        var index = htmlString.search(re);\n\t        return index;\n\t    };\n\t    UkuleleUtil.getInnerHtml = function (htmlString, tagName) {\n\t        var reTemp = \"<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">\";\n\t        var re = new RegExp(reTemp);\n\t        var match = htmlString.match(re);\n\t        if (match.index > -1) {\n\t            var matchString = match[0];\n\t            var index = matchString.search(\">\");\n\t            var tempString = matchString.substr(index + 1);\n\t            var index2 = tempString.lastIndexOf(\"</\");\n\t            tempString = tempString.substring(0, index2);\n\t            tempString = tempString.replace(/(^\\s*)|(\\s*$)/g, \"\");\n\t            return tempString;\n\t        }\n\t        else {\n\t            return null;\n\t        }\n\t    };\n\t    UkuleleUtil.getComponentConfiguration = function (htmlString) {\n\t        var tempDom = document.createElement(\"div\");\n\t        tempDom.innerHTML = htmlString;\n\t        var tpl = Selector_1.Selector.querySelectorAll(tempDom, \"template\");\n\t        var scripts = Selector_1.Selector.querySelectorAll(tempDom, \"script\");\n\t        var stylesheet = Selector_1.Selector.querySelectorAll(tempDom, \"style\");\n\t        var deps = [];\n\t        var ccs = null;\n\t        for (var i = 0; i < scripts.length; i++) {\n\t            var script = scripts[i];\n\t            if (script.src !== \"\") {\n\t                deps.push(script.src);\n\t            }\n\t            else {\n\t                ccs = script.innerHTML;\n\t            }\n\t        }\n\t        if (stylesheet && stylesheet[0]) {\n\t            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs, stylesheet[0].innerHTML);\n\t        }\n\t        else {\n\t            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs);\n\t        }\n\t    };\n\t    UkuleleUtil.searchUkuAttrTag = function (htmlString) {\n\t        var re = /^uku\\-.*/;\n\t        var index = htmlString.search(re);\n\t        return index;\n\t    };\n\t    UkuleleUtil.getAttrFromUkuTag = function (ukuTag, camelCase) {\n\t        if (camelCase === void 0) { camelCase = false; }\n\t        if (UkuleleUtil.searchUkuAttrTag(ukuTag) === 0) {\n\t            ukuTag = ukuTag.replace('uku-', '');\n\t        }\n\t        if (camelCase) {\n\t            var names = ukuTag.split('-');\n\t            ukuTag = names[0];\n\t            for (var i = 1; i < names.length; i++) {\n\t                var firstLetter = names[i].charAt(0).toUpperCase();\n\t                ukuTag = ukuTag + firstLetter + names[i].substr(1);\n\t            }\n\t        }\n\t        return ukuTag;\n\t    };\n\t    UkuleleUtil.searchUkuExpTag = function (expression) {\n\t        var re = /^\\{\\{.*\\}\\}$/;\n\t        var index = expression.search(re);\n\t        return index;\n\t    };\n\t    UkuleleUtil.searchUkuFuncArg = function (htmlString) {\n\t        var re1 = /[\\+\\-\\*\\/\\%\\?\\:\\>\\<]/;\n\t        var index = htmlString.search(re1);\n\t        if (index === -1) {\n\t            var re2 = /\\(.*\\)$/;\n\t            index = htmlString.search(re2);\n\t            return index;\n\t        }\n\t        else {\n\t            return -1;\n\t        }\n\t    };\n\t    UkuleleUtil.isRepeat = function (element) {\n\t        if (element.getAttribute(\"uku-repeat\")) {\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    UkuleleUtil.isInRepeat = function (element) {\n\t        var parents = Selector_1.Selector.parents(element);\n\t        for (var i = 0; i < parents.length; i++) {\n\t            var parent_1 = parents[i];\n\t            if (parent_1.nodeType !== 9) {\n\t                var b = parent_1.getAttribute(\"uku-repeat\");\n\t                if (b) {\n\t                    return true;\n\t                }\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t    UkuleleUtil.getBoundModelInstantName = function (expression) {\n\t        var controlInstName = expression.split('.')[0];\n\t        if (controlInstName) {\n\t            return controlInstName;\n\t        }\n\t        return undefined;\n\t    };\n\t    UkuleleUtil.getBoundModelInstantNames = function (controller_alias_list, expression) {\n\t        var arr = [];\n\t        controller_alias_list.forEach(function (alias) {\n\t            var pattern = new RegExp(\"\\\\b\" + alias, \"gm\");\n\t            if (expression.search(pattern) > -1) {\n\t                arr.push(alias);\n\t            }\n\t        });\n\t        return arr;\n\t    };\n\t    UkuleleUtil.getAttributeFinalValue = function (object, attrName) {\n\t        var valueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, attrName);\n\t        var value = valueObject.value;\n\t        return value;\n\t    };\n\t    UkuleleUtil.getAttributeFinalValueAndParent = function (object, attrName) {\n\t        var finalValue = object;\n\t        var parentValue;\n\t        if (typeof attrName === \"string\") {\n\t            var attrValue = UkuleleUtil.getFinalAttribute(attrName);\n\t            var temp = attrValue.split(\".\");\n\t            if (attrValue !== \"\" && finalValue) {\n\t                for (var i = 0; i < temp.length; i++) {\n\t                    var property = temp[i];\n\t                    parentValue = finalValue;\n\t                    finalValue = finalValue[property];\n\t                    if (finalValue === undefined || finalValue === null) {\n\t                        break;\n\t                    }\n\t                }\n\t            }\n\t            else {\n\t                if (object.hasOwnProperty(\"_alias\") && object._alias === attrName) {\n\t                    finalValue = object;\n\t                }\n\t                else {\n\t                    finalValue = attrName;\n\t                }\n\t            }\n\t        }\n\t        return new ValueAndParent(finalValue, parentValue);\n\t    };\n\t    UkuleleUtil.getFinalValue = function (uku, objects, attrName) {\n\t        var additionalArgu = [];\n\t        for (var _i = 3; _i < arguments.length; _i++) {\n\t            additionalArgu[_i - 3] = arguments[_i];\n\t        }\n\t        return (function () {\n\t            var tempScope = {};\n\t            objects.forEach(function (object) {\n\t                tempScope[object['_alias']] = object;\n\t                var alias = object['_alias'];\n\t                var pattern = new RegExp(\"\\\\b\" + alias + \"\\\\b\", \"gm\");\n\t                attrName = attrName.replace(pattern, \"tempScope.\" + alias);\n\t                var pattern2 = new RegExp(\"\\\\.tempScope\\\\.\" + alias, \"gm\");\n\t                attrName = attrName.replace(pattern2, \".\" + alias);\n\t            });\n\t            var result = eval(attrName);\n\t            tempScope = null;\n\t            return result;\n\t        })();\n\t    };\n\t    return UkuleleUtil;\n\t}());\n\texports.UkuleleUtil = UkuleleUtil;\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar Selector = (function () {\n\t    function Selector() {\n\t    }\n\t    Selector.querySelectorAll = function (element, query) {\n\t        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== \"undefined\") {\n\t            return window['jQuery'](element).find(query);\n\t        }\n\t        else {\n\t            return element.querySelectorAll(query);\n\t        }\n\t    };\n\t    Selector.fuzzyFind = function (element, text) {\n\t        if (element && element.attributes) {\n\t            for (var i = 0; i < element.attributes.length; i++) {\n\t                var attr = element.attributes[i];\n\t                if (attr.nodeName.search(text) > -1) {\n\t                    return element;\n\t                }\n\t            }\n\t        }\n\t        return null;\n\t    };\n\t    Selector.directText = function (element, text) {\n\t        var o = \"\";\n\t        var nodes = element.childNodes;\n\t        for (var i = 0; i <= nodes.length - 1; i++) {\n\t            var node = nodes[i];\n\t            if (node.nodeType === 3) {\n\t                if (text || text === \"\" || text === 0 || text === false) {\n\t                    node.nodeValue = text;\n\t                    return;\n\t                }\n\t                else {\n\t                    o += node.nodeValue;\n\t                }\n\t            }\n\t        }\n\t        return o.trim();\n\t    };\n\t    Selector.parents = function (element) {\n\t        var parents = [];\n\t        while (element.parentNode && element.parentNode.tagName !== 'BODY') {\n\t            parents.push(element.parentNode);\n\t            element = element.parentNode;\n\t        }\n\t        return parents;\n\t    };\n\t    return Selector;\n\t}());\n\texports.Selector = Selector;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar ComponentConfiguration = (function () {\n\t    function ComponentConfiguration(_template, _dependentScripts, _componentControllerScript, _stylesheet) {\n\t        if (_stylesheet === void 0) { _stylesheet = undefined; }\n\t        this.template = _template;\n\t        this.dependentScripts = _dependentScripts;\n\t        this.componentControllerScript = _componentControllerScript;\n\t        this.stylesheet = _stylesheet;\n\t    }\n\t    return ComponentConfiguration;\n\t}());\n\texports.ComponentConfiguration = ComponentConfiguration;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar ObjectUtil_1 = __webpack_require__(3);\n\tvar UkuEventType_1 = __webpack_require__(12);\n\tvar Event_1 = __webpack_require__(13);\n\tvar DirtyChecker = (function () {\n\t    function DirtyChecker(_uku) {\n\t        this.uku = _uku;\n\t        this.defMgr = this.uku._internal_getDefinitionManager();\n\t    }\n\t    DirtyChecker.prototype.runDirtyChecking = function (ctrlAliasName, excludeElement) {\n\t        var _this = this;\n\t        if (ctrlAliasName) {\n\t            if (typeof (ctrlAliasName) === \"string\") {\n\t                watchController(ctrlAliasName);\n\t            }\n\t            else if (ObjectUtil_1.ObjectUtil.isArray(ctrlAliasName)) {\n\t                for (var i = 0; i < ctrlAliasName.length; i++) {\n\t                    watchController(ctrlAliasName[i]);\n\t                }\n\t            }\n\t        }\n\t        else {\n\t            for (var alias in this.defMgr.getControllersDefinition()) {\n\t                watchController(alias);\n\t            }\n\t        }\n\t        function watchController(alias) {\n\t            var controllerModel = _this.defMgr.getControllersDefinition()[alias];\n\t            if (!controllerModel) {\n\t                if (_this.uku.parentUku) {\n\t                    _this.uku.parentUku.refresh(alias);\n\t                }\n\t                return;\n\t            }\n\t            var controller = controllerModel.controllerInstance;\n\t            var previousCtrlModel = _this.defMgr.getCopyControllers()[alias];\n\t            var changedElementCount = 0;\n\t            for (var i = 0; i < controllerModel.boundItems.length; i++) {\n\t                var boundItem = controllerModel.boundItems[i];\n\t                var attrName = boundItem.attributeName;\n\t                if (attrName.search('parent.') > -1) {\n\t                    return;\n\t                }\n\t                if (previousCtrlModel) {\n\t                    if (boundItem.hasOwnProperty('ukuTag') && boundItem['ukuTag'] === \"selected\") {\n\t                        attrName = attrName.split(\"|\")[0];\n\t                    }\n\t                    var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, [controller], attrName);\n\t                    var previousFinalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, [previousCtrlModel], attrName);\n\t                    if (!ObjectUtil_1.ObjectUtil.compare(previousFinalValue, finalValue)) {\n\t                        attrName = boundItem.attributeName;\n\t                        var changedBoundItems = controllerModel.getBoundItemsByName(attrName);\n\t                        for (var j = 0; j < changedBoundItems.length; j++) {\n\t                            var changedBoundItem = changedBoundItems[j];\n\t                            if (changedBoundItem.element !== excludeElement || (boundItem.hasOwnProperty('ukuTag') && changedBoundItem['ukuTag'] !== \"value\")) {\n\t                                changedElementCount++;\n\t                                changedBoundItem.render([controller]);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            if (changedElementCount > 0 && _this.uku.hasListener(UkuEventType_1.UkuEventType.REFRESH)) {\n\t                _this.uku.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.REFRESH));\n\t            }\n\t            _this.defMgr.copyControllerInstance(controller, alias);\n\t        }\n\t    };\n\t    ;\n\t    return DirtyChecker;\n\t}());\n\texports.DirtyChecker = DirtyChecker;\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar UkuEventType = (function () {\n\t    function UkuEventType() {\n\t    }\n\t    return UkuEventType;\n\t}());\n\tUkuEventType.INITIALIZED = 'initialized';\n\tUkuEventType.REFRESH = 'refresh';\n\tUkuEventType.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\n\texports.UkuEventType = UkuEventType;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar Event = (function () {\n\t    function Event(_eventType, _element) {\n\t        this.eventType = _eventType;\n\t        this.element = _element;\n\t    }\n\t    return Event;\n\t}());\n\texports.Event = Event;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n\t    return new (P || (P = Promise))(function (resolve, reject) {\n\t        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n\t        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n\t        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n\t        step((generator = generator.apply(thisArg, _arguments || [])).next());\n\t    });\n\t};\n\tvar __generator = (this && this.__generator) || function (thisArg, body) {\n\t    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t;\n\t    return { next: verb(0), \"throw\": verb(1), \"return\": verb(2) };\n\t    function verb(n) { return function (v) { return step([n, v]); }; }\n\t    function step(op) {\n\t        if (f) throw new TypeError(\"Generator is already executing.\");\n\t        while (_) try {\n\t            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n\t            if (y = 0, t) op = [0, t.value];\n\t            switch (op[0]) {\n\t                case 0: case 1: t = op; break;\n\t                case 4: _.label++; return { value: op[1], done: false };\n\t                case 5: _.label++; y = op[1]; op = [0]; continue;\n\t                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n\t                default:\n\t                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n\t                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n\t                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n\t                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n\t                    if (t[2]) _.ops.pop();\n\t                    _.trys.pop(); continue;\n\t            }\n\t            op = body.call(thisArg, _);\n\t        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n\t        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n\t    }\n\t};\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar EventEmitter_1 = __webpack_require__(1);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttributeFactory_1 = __webpack_require__(15);\n\tvar BoundItemExpression_1 = __webpack_require__(26);\n\tvar BoundItemInnerText_1 = __webpack_require__(27);\n\tvar BoundItemRepeat_1 = __webpack_require__(28);\n\tvar BoundItemComponentAttribute_1 = __webpack_require__(29);\n\tvar ElementActionBinder_1 = __webpack_require__(30);\n\tvar EventListener_1 = __webpack_require__(31);\n\tvar Selector_1 = __webpack_require__(9);\n\tvar Event_1 = __webpack_require__(13);\n\tvar Analyzer = (function (_super) {\n\t    __extends(Analyzer, _super);\n\t    function Analyzer(_uku) {\n\t        var _this = _super.call(this) || this;\n\t        //处理绑定的attribute\n\t        _this.dealWithAttribute = function (element, tagName) {\n\t            var _this = this;\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\n\t            //let elementName = element.tagName;\n\t            var controllerModels = this.defMgr.getControllerModelByName(attr);\n\t            if (controllerModels && controllerModels.length > 0) {\n\t                var boundItem_1 = BoundItemAttributeFactory_1.BoundItemAttributeFactory.getInstance().generateInstance(attr, tagName, element, this.uku);\n\t                var controllers_1 = [];\n\t                controllerModels.forEach(function (controllerModel) {\n\t                    controllerModel.addBoundItem(boundItem_1);\n\t                    ElementActionBinder_1.elementChangedBinder(element, tagName, controllerModel, _this.uku.refresh, _this.uku);\n\t                    controllers_1.push(controllerModel.controllerInstance);\n\t                });\n\t                boundItem_1.render(controllers_1);\n\t            }\n\t        };\n\t        _this.uku = _uku;\n\t        _this.defMgr = _this.uku._internal_getDefinitionManager();\n\t        return _this;\n\t    }\n\t    Analyzer.prototype.analyizeElement = function (ele) {\n\t        var _this = this;\n\t        this.searchComponent(ele).then(function (element) {\n\t            _this.searchExpression(element);\n\t            _this.searchUkuAttribute(element);\n\t            _this.defMgr.copyAllController();\n\t            if (_this.hasListener(Analyzer.ANALYIZE_COMPLETED)) {\n\t                _this.dispatchEvent(new Event_1.Event(Analyzer.ANALYIZE_COMPLETED, element));\n\t            }\n\t        });\n\t    };\n\t    Analyzer.prototype.sortAttributes = function (subElement) {\n\t        var orderAttrs = [];\n\t        for (var i = 0; i < subElement.attributes.length; i++) {\n\t            var attribute = subElement.attributes[i];\n\t            if (attribute.nodeName.search(\"uku-on\") !== -1) {\n\t                orderAttrs.push(attribute);\n\t            }\n\t            else {\n\t                orderAttrs.unshift(attribute);\n\t            }\n\t        }\n\t        return orderAttrs;\n\t    };\n\t    Analyzer.prototype.searchUkuAttribute = function (element) {\n\t        var subElements = [];\n\t        //scan element which has uku-* tag\n\t        var isSelfHasUkuTag = Selector_1.Selector.fuzzyFind(element, 'uku-');\n\t        if (isSelfHasUkuTag) {\n\t            subElements.push(isSelfHasUkuTag);\n\t        }\n\t        var allChildren = Selector_1.Selector.querySelectorAll(element, \"*\");\n\t        for (var i = 0; i < allChildren.length; i++) {\n\t            var child = allChildren[i];\n\t            var matchElement = Selector_1.Selector.fuzzyFind(child, 'uku-');\n\t            if (matchElement && !UkuleleUtil_1.UkuleleUtil.isInRepeat(matchElement)) {\n\t                subElements.push(matchElement);\n\t            }\n\t        }\n\t        //解析绑定 attribute，注册event\n\t        for (var n = 0; n < subElements.length; n++) {\n\t            var subElement = subElements[n];\n\t            var orderAttrs = this.sortAttributes(subElement);\n\t            for (var j = 0; j < orderAttrs.length; j++) {\n\t                var attribute = orderAttrs[j];\n\t                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attribute.nodeName) > -1) {\n\t                    var tempArr = attribute.nodeName.split('-');\n\t                    tempArr.shift();\n\t                    var attrName = tempArr.join('-');\n\t                    if (attrName !== \"application\") {\n\t                        if (attrName.search('on') === 0) {\n\t                            //is an event\n\t                            if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\n\t                                this.dealWithEvent(subElement, attrName);\n\t                            }\n\t                        }\n\t                        else if (attrName.search('repeat') !== -1) {\n\t                            //is an repeat\n\t                            this.dealWithRepeat(subElement);\n\t                        }\n\t                        else {\n\t                            //is an attribute\n\t                            if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\n\t                                if (attrName !== \"text\") {\n\t                                    this.dealWithAttribute(subElement, attrName);\n\t                                }\n\t                                else {\n\t                                    this.dealWithInnerText(subElement);\n\t                                }\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    };\n\t    Analyzer.prototype.searchComponent = function (element) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var comp, attrs, compDef, attrs, compDef, i, child;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        comp = this.defMgr.getComponent(element.localName);\n\t                        if (!comp) return [3 /*break*/, 4];\n\t                        if (!!comp.lazy) return [3 /*break*/, 1];\n\t                        attrs = element.attributes;\n\t                        compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\n\t                        if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\n\t                            return [2 /*return*/, this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs)];\n\t                        }\n\t                        else {\n\t                            return [2 /*return*/, element];\n\t                        }\n\t                        return [3 /*break*/, 3];\n\t                    case 1: return [4 /*yield*/, this.defMgr.addLazyComponentDefinition(comp.tagName, comp.templateUrl)];\n\t                    case 2:\n\t                        _a.sent();\n\t                        attrs = element.attributes;\n\t                        compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\n\t                        if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\n\t                            return [2 /*return*/, this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs)];\n\t                        }\n\t                        else {\n\t                            return [2 /*return*/, element];\n\t                        }\n\t                        _a.label = 3;\n\t                    case 3: return [3 /*break*/, 10];\n\t                    case 4:\n\t                        if (!(element.children && element.children.length > 0)) return [3 /*break*/, 9];\n\t                        i = 0;\n\t                        _a.label = 5;\n\t                    case 5:\n\t                        if (!(i < element.children.length)) return [3 /*break*/, 8];\n\t                        child = element.children[i];\n\t                        return [4 /*yield*/, this.searchComponent(child)];\n\t                    case 6:\n\t                        _a.sent();\n\t                        _a.label = 7;\n\t                    case 7:\n\t                        i++;\n\t                        return [3 /*break*/, 5];\n\t                    case 8: return [2 /*return*/, element];\n\t                    case 9: return [2 /*return*/, element];\n\t                    case 10: return [2 /*return*/];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    Analyzer.prototype.dealWithComponent = function (tag, template, Clazz, attrs) {\n\t        return __awaiter(this, void 0, void 0, function () {\n\t            var randomAlias, tempFragment, htmlDom, cc, _loop_1, this_1, i, i, attr, j, child;\n\t            return __generator(this, function (_a) {\n\t                switch (_a.label) {\n\t                    case 0:\n\t                        randomAlias = 'cc_' + Math.floor(10000 * Math.random()).toString();\n\t                        //should consider white space between characters\n\t                        template = template.replace(new RegExp(\"\\'cc\\\\.\", 'gm'), \"'\" + randomAlias + '.');\n\t                        template = template.replace(new RegExp('\"cc\\\\.', 'gm'), '\"' + randomAlias + '.');\n\t                        template = template.replace(new RegExp('\\{\\{cc\\\\.', 'gm'), \"{{\" + randomAlias + '.');\n\t                        template = template.replace(new RegExp(' cc\\\\.', 'gm'), ' ' + randomAlias + '.');\n\t                        template = template.replace(new RegExp('\\\\(cc\\\\.', 'gm'), '(' + randomAlias + '.');\n\t                        template = template.replace(new RegExp('\\\\,cc\\\\.', 'gm'), ',' + randomAlias + '.');\n\t                        template = template.replace(new RegExp('\\\\.cc\\\\.', 'gm'), '.' + randomAlias + '.');\n\t                        tempFragment = document.createElement('div');\n\t                        tempFragment.insertAdjacentHTML('afterBegin', template);\n\t                        if (tempFragment.children.length > 1) {\n\t                            template = tempFragment.outerHTML;\n\t                        }\n\t                        tag.insertAdjacentHTML('beforeBegin', template);\n\t                        htmlDom = tag.previousElementSibling;\n\t                        htmlDom.classList.add(tag.localName);\n\t                        if (Clazz) {\n\t                            cc = new Clazz(this.uku);\n\t                            cc._dom = htmlDom;\n\t                            cc.fire = function (eventType, data, bubbles, cancelable) {\n\t                                if (bubbles === void 0) { bubbles = false; }\n\t                                if (cancelable === void 0) { cancelable = true; }\n\t                                var event = new CustomEvent(eventType.toLowerCase(), { \"bubbles\": bubbles, \"cancelable\": cancelable });\n\t                                event['data'] = data;\n\t                                cc._dom.dispatchEvent(event);\n\t                            };\n\t                            this.uku.registerController(randomAlias, cc);\n\t                            _loop_1 = function (i) {\n\t                                var attr = attrs[i];\n\t                                //todo need Refactor\n\t                                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\n\t                                    || attr.nodeName.search(\"uku-on\") !== -1\n\t                                    || attr.nodeName === \"uku-render\"\n\t                                    || attr.nodeName === \"uku-visible\") {\n\t                                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\n\t                                }\n\t                                else {\n\t                                    var tagName = UkuleleUtil_1.UkuleleUtil.getAttrFromUkuTag(attr.nodeName, true);\n\t                                    var controllerModels = this_1.defMgr.getControllerModelByName(attr.nodeValue);\n\t                                    if (controllerModels && controllerModels.length > 0) {\n\t                                        var boundItem_2 = new BoundItemComponentAttribute_1.BoundItemComponentAttribute(attr.nodeValue, tagName, cc, this_1.uku);\n\t                                        var controllers_2 = [];\n\t                                        controllerModels.forEach(function (controllerModel) {\n\t                                            controllerModel.addBoundItem(boundItem_2);\n\t                                            controllers_2.push(controllerModel.controllerInstance);\n\t                                        });\n\t                                        boundItem_2.render(controllers_2);\n\t                                    }\n\t                                }\n\t                            };\n\t                            this_1 = this;\n\t                            for (i = 0; i < attrs.length; i++) {\n\t                                _loop_1(i);\n\t                            }\n\t                        }\n\t                        else {\n\t                            for (i = 0; i < attrs.length; i++) {\n\t                                attr = attrs[i];\n\t                                //todo:need Refactor\n\t                                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\n\t                                    || attr.nodeName.search(\"uku-on\") !== -1\n\t                                    || attr.nodeName === \"uku-render\"\n\t                                    || attr.nodeName === \"uku-visible\") {\n\t                                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\n\t                                }\n\t                            }\n\t                        }\n\t                        tag.parentNode.removeChild(tag);\n\t                        if (!(htmlDom.children && htmlDom.children.length > 0)) return [3 /*break*/, 5];\n\t                        j = 0;\n\t                        _a.label = 1;\n\t                    case 1:\n\t                        if (!(j < htmlDom.children.length)) return [3 /*break*/, 4];\n\t                        child = htmlDom.children[j];\n\t                        return [4 /*yield*/, this.searchComponent(child)];\n\t                    case 2:\n\t                        _a.sent();\n\t                        _a.label = 3;\n\t                    case 3:\n\t                        j++;\n\t                        return [3 /*break*/, 1];\n\t                    case 4:\n\t                        if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\n\t                            cc._initialized(randomAlias, cc._dom);\n\t                        }\n\t                        return [2 /*return*/, htmlDom];\n\t                    case 5:\n\t                        if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\n\t                            cc._initialized(randomAlias, cc._dom);\n\t                        }\n\t                        return [2 /*return*/, htmlDom];\n\t                }\n\t            });\n\t        });\n\t    };\n\t    //todo: 处理 tag之间使用{{}}括起的表达式，用以显示文字\n\t    Analyzer.prototype.searchExpression = function (element) {\n\t        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(Selector_1.Selector.directText(element)) !== -1) {\n\t            if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\n\t                //normal expression\n\t                this.dealWithExpression(element);\n\t            }\n\t        }\n\t        for (var i = 0; i < element.children.length; i++) {\n\t            this.searchExpression(element.children[i]);\n\t        }\n\t    };\n\t    Analyzer.prototype.dealWithExpression = function (element) {\n\t        //通常的花括号声明方式\n\t        var expression = Selector_1.Selector.directText(element);\n\t        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(expression) !== -1) {\n\t            var attr = expression.slice(2, -2);\n\t            var controllerModels = this.defMgr.getControllerModelByName(attr);\n\t            if (controllerModels && controllerModels.length > 0) {\n\t                var boundItem_3 = new BoundItemExpression_1.BoundItemExpression(attr, expression, element, this.uku);\n\t                var controllers_3 = [];\n\t                controllerModels.forEach(function (controllerModel) {\n\t                    controllerModel.addBoundItem(boundItem_3);\n\t                    controllers_3.push(controllerModel.controllerInstance);\n\t                });\n\t                boundItem_3.render(controllers_3);\n\t            }\n\t        }\n\t    };\n\t    //处理 uku-text\n\t    Analyzer.prototype.dealWithInnerText = function (element) {\n\t        var attr = element.getAttribute(\"uku-text\");\n\t        if (attr) {\n\t            var controllerModels = this.defMgr.getControllerModelByName(attr);\n\t            if (controllerModels && controllerModels.length > 0) {\n\t                var boundItem_4 = new BoundItemInnerText_1.BoundItemInnerText(attr, element, this.uku);\n\t                var controllers_4 = [];\n\t                controllerModels.forEach(function (controllerModel) {\n\t                    controllerModel.addBoundItem(boundItem_4);\n\t                    controllers_4.push(controllerModel.controllerInstance);\n\t                });\n\t                boundItem_4.render(controllers_4);\n\t            }\n\t        }\n\t    };\n\t    //处理 事件 event\n\t    Analyzer.prototype.dealWithEvent = function (element, eventName) {\n\t        var _this = this;\n\t        var expression = element.getAttribute(\"uku-\" + eventName);\n\t        var eventNameInListener = eventName.substring(2);\n\t        eventNameInListener = eventNameInListener.toLowerCase();\n\t        var controllerModels = this.defMgr.getControllerModelByName(expression);\n\t        if (!controllerModels || controllerModels.length === 0) {\n\t            controllerModels = [];\n\t        }\n\t        EventListener_1.EventListener.addEventListener(element, eventNameInListener, function (event) {\n\t            var alias_list = [];\n\t            controllerModels.forEach(function (controllerModel) {\n\t                _this.defMgr.copyControllerInstance(controllerModel.controllerInstance, controllerModels.alias);\n\t                alias_list.push(controllerModel.alias);\n\t            });\n\t            var index = UkuleleUtil_1.UkuleleUtil.searchUkuFuncArg(expression);\n\t            if (index === -1) {\n\t                // is an expression, not a function\n\t                var handler = new Function(\"event\", \"return \" + expression);\n\t                console.log(handler.toString());\n\t                handler(event);\n\t            }\n\t            else {\n\t                // is a function\n\t                var i = expression.search(/\\(/);\n\t                var arg = 'event';\n\t                if (expression[i + 1] !== ')') {\n\t                    // has argument\n\t                    arg = 'event,';\n\t                }\n\t                var arr = expression.split('(');\n\t                arr[1] = arg + arr[1];\n\t                var new_expression_1 = arr.join(\"(\");\n\t                (function (e) {\n\t                    var tempScope = {};\n\t                    tempScope['event'] = e;\n\t                    eval(new_expression_1);\n\t                    tempScope = null;\n\t                })(event);\n\t            }\n\t            _this.uku.refresh(alias_list, element);\n\t        });\n\t    };\n\t    //处理 repeat\n\t    Analyzer.prototype.dealWithRepeat = function (element) {\n\t        var repeatExpression = element.getAttribute(\"uku-repeat\");\n\t        var tempArr = repeatExpression.split(' in ');\n\t        var itemName = tempArr[0];\n\t        var attr = tempArr[1];\n\t        var controllerModels = this.defMgr.getControllerModelByName(attr);\n\t        if (controllerModels && controllerModels.length > 0) {\n\t            var controllers_5 = [];\n\t            //let controllerInst = controllerModel.controllerInstance;\n\t            var boundItem_5 = new BoundItemRepeat_1.BoundItemRepeat(attr, itemName, element, this.uku);\n\t            controllerModels.forEach(function (controllerModel) {\n\t                controllerModel.addBoundItem(boundItem_5);\n\t                controllers_5.push(controllerModel.controllerInstance);\n\t            });\n\t            boundItem_5.render(controllers_5);\n\t        }\n\t    };\n\t    return Analyzer;\n\t}(EventEmitter_1.EventEmitter));\n\tAnalyzer.ANALYIZE_COMPLETED = 'analyizeCompleted';\n\texports.Analyzer = Analyzer;\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttrSelected_1 = __webpack_require__(16);\n\tvar BoundItemAttrDataItem_1 = __webpack_require__(19);\n\tvar BoundItemAttrSrc_1 = __webpack_require__(20);\n\tvar BoundItemAttrDisabled_1 = __webpack_require__(21);\n\tvar BoundItemAttrRender_1 = __webpack_require__(22);\n\tvar BoundItemAttrStyle_1 = __webpack_require__(23);\n\tvar BoundItemAttrValue_1 = __webpack_require__(24);\n\tvar BoundItemAttrVisible_1 = __webpack_require__(25);\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar BoundItemAttributeFactory = (function () {\n\t    function BoundItemAttributeFactory() {\n\t        if (BoundItemAttributeFactory._instance) {\n\t            throw new Error(\"Error: Instantiation failed: Use BoundItemAttributeFactory.getInstance() instead of new.\");\n\t        }\n\t        BoundItemAttributeFactory._instance = this;\n\t    }\n\t    BoundItemAttributeFactory.getInstance = function () {\n\t        return BoundItemAttributeFactory._instance;\n\t    };\n\t    BoundItemAttributeFactory.prototype.generateInstance = function (attr, tagName, element, uku) {\n\t        var instance;\n\t        switch (tagName) {\n\t            case \"selected\":\n\t                instance = new BoundItemAttrSelected_1.BountItemAttrSelected(attr, tagName, element, uku);\n\t                break;\n\t            case \"data-item\":\n\t                instance = new BoundItemAttrDataItem_1.BoundItemAttrDataItem(attr, tagName, element, uku);\n\t                break;\n\t            case \"src\":\n\t                instance = new BoundItemAttrSrc_1.BoundItemAttrSrc(attr, tagName, element, uku);\n\t                break;\n\t            case \"disabled\":\n\t                instance = new BoundItemAttrDisabled_1.BoundItemAttrDisabled(attr, tagName, element, uku);\n\t                break;\n\t            case \"render\":\n\t                instance = new BoundItemAttrRender_1.BoundItemAttrRender(attr, tagName, element, uku);\n\t                break;\n\t            case \"style\":\n\t                instance = new BoundItemAttrStyle_1.BoundItemAttrStyle(attr, tagName, element, uku);\n\t                break;\n\t            case \"value\":\n\t                instance = new BoundItemAttrValue_1.BoundItemAttrValue(attr, tagName, element, uku);\n\t                break;\n\t            case \"visible\":\n\t                instance = new BoundItemAttrVisible_1.BoundItemAttrVisible(attr, tagName, element, uku);\n\t                break;\n\t            default:\n\t                instance = new BoundItemAttribute_1.BoundItemAttribute(attr, tagName, element, uku);\n\t        }\n\t        return instance;\n\t    };\n\t    return BoundItemAttributeFactory;\n\t}());\n\tBoundItemAttributeFactory._instance = new BoundItemAttributeFactory();\n\texports.BoundItemAttributeFactory = BoundItemAttributeFactory;\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BountItemAttrSelected = (function (_super) {\n\t    __extends(BountItemAttrSelected, _super);\n\t    function BountItemAttrSelected(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"selected\") {\n\t            throw new TypeError(\"it doesn't use uku-selected\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BountItemAttrSelected.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var key;\n\t        var elementName = this.element.tagName;\n\t        if (elementName === \"SELECT\") {\n\t            var tempArr = this.attributeName.split(\"|\");\n\t            attr = tempArr[0];\n\t            key = tempArr[1];\n\t            var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t            var value = void 0;\n\t            if (key) {\n\t                value = finalValue[key];\n\t            }\n\t            else {\n\t                value = finalValue;\n\t            }\n\t            this.element.value = value;\n\t        }\n\t        if (elementName === \"INPUT\" && this.element.getAttribute(\"type\") === \"radio\") {\n\t            var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t            if (this.element.value === finalValue) {\n\t                this.element.setAttribute(\"checked\", \"true\");\n\t            }\n\t        }\n\t    };\n\t    return BountItemAttrSelected;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BountItemAttrSelected = BountItemAttrSelected;\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemBase_1 = __webpack_require__(18);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\t//import {SelectedDecorator} from \"./decorator/SelectedDecorator\";\n\tvar BoundItemAttribute = (function (_super) {\n\t    __extends(BoundItemAttribute, _super);\n\t    function BoundItemAttribute(attrName, ukuTag, element, uku) {\n\t        var _this = _super.call(this, attrName, element, uku) || this;\n\t        _this.ukuTag = ukuTag;\n\t        return _this;\n\t    }\n\t    BoundItemAttribute.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        this.element.setAttribute(this.ukuTag, finalValue);\n\t    };\n\t    return BoundItemAttribute;\n\t}(BoundItemBase_1.BoundItemBase));\n\texports.BoundItemAttribute = BoundItemAttribute;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemBase = (function () {\n\t    function BoundItemBase(_attrName, _element, _uku) {\n\t        this.attributeName = _attrName;\n\t        this.element = _element;\n\t        this.uku = _uku;\n\t    }\n\t    BoundItemBase.prototype.render = function (controllers) {\n\t    };\n\t    return BoundItemBase;\n\t}());\n\texports.BoundItemBase = BoundItemBase;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrDataItem = (function (_super) {\n\t    __extends(BoundItemAttrDataItem, _super);\n\t    function BoundItemAttrDataItem(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"data-item\") {\n\t            throw new TypeError(\"it doesn't use uku-item\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrDataItem.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        if (elementName === \"OPTION\") {\n\t            finalValue = JSON.stringify(finalValue);\n\t            this.element.setAttribute('data-item', finalValue);\n\t        }\n\t    };\n\t    return BoundItemAttrDataItem;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrDataItem = BoundItemAttrDataItem;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrSrc = (function (_super) {\n\t    __extends(BoundItemAttrSrc, _super);\n\t    function BoundItemAttrSrc(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"src\") {\n\t            throw new TypeError(\"it doesn't use uku-src\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrSrc.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        if (elementName === \"IMG\") {\n\t            if (finalValue) {\n\t                this.element.setAttribute(this.ukuTag, finalValue);\n\t            }\n\t        }\n\t        else {\n\t            throw new Error(\"uku-src doesn't work with current dom\");\n\t        }\n\t    };\n\t    return BoundItemAttrSrc;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrSrc = BoundItemAttrSrc;\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrDisabled = (function (_super) {\n\t    __extends(BoundItemAttrDisabled, _super);\n\t    function BoundItemAttrDisabled(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"disabled\") {\n\t            throw new TypeError(\"it doesn't use uku-disabled\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrDisabled.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        this.element.disabled = finalValue;\n\t    };\n\t    return BoundItemAttrDisabled;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrDisabled = BoundItemAttrDisabled;\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrRender = (function (_super) {\n\t    __extends(BoundItemAttrRender, _super);\n\t    function BoundItemAttrRender(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"render\") {\n\t            throw new TypeError(\"it doesn't use uku-render\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrRender.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        if (finalValue) {\n\t            var oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\n\t            if (oldDisplaySetting !== null) {\n\t                this.element.style.display = oldDisplaySetting;\n\t            }\n\t        }\n\t        else {\n\t            var oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\n\t            if (oldDisplaySetting === null) {\n\t                oldDisplaySetting = this.element.style.display;\n\t                this.element.setAttribute(\"data-old-display\", oldDisplaySetting);\n\t            }\n\t            this.element.style.display = \"none\";\n\t        }\n\t    };\n\t    return BoundItemAttrRender;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrRender = BoundItemAttrRender;\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrStyle = (function (_super) {\n\t    __extends(BoundItemAttrStyle, _super);\n\t    function BoundItemAttrStyle(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"style\") {\n\t            throw new TypeError(\"it doesn't use uku-style\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrStyle.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        for (var cssName in finalValue) {\n\t            this.element.style[cssName] = finalValue[cssName];\n\t        }\n\t    };\n\t    return BoundItemAttrStyle;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrStyle = BoundItemAttrStyle;\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrValue = (function (_super) {\n\t    __extends(BoundItemAttrValue, _super);\n\t    function BoundItemAttrValue(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"value\") {\n\t            throw new TypeError(\"it doesn't use uku-value\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrValue.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        if (elementName === \"INPUT\" && this.element.getAttribute(\"type\") === \"checkbox\") {\n\t            this.element.checked = finalValue;\n\t        }\n\t        else {\n\t            this.element.value = finalValue;\n\t        }\n\t    };\n\t    return BoundItemAttrValue;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrValue = BoundItemAttrValue;\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemAttrVisible = (function (_super) {\n\t    __extends(BoundItemAttrVisible, _super);\n\t    function BoundItemAttrVisible(attrName, ukuTag, element, uku) {\n\t        var _this = this;\n\t        if (ukuTag !== \"visible\") {\n\t            throw new TypeError(\"it doesn't use uku-visible\");\n\t        }\n\t        _this = _super.call(this, attrName, ukuTag, element, uku) || this;\n\t        return _this;\n\t    }\n\t    BoundItemAttrVisible.prototype.render = function (controllers) {\n\t        var attr = this.attributeName;\n\t        var elementName = this.element.tagName;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, attr);\n\t        if (finalValue) {\n\t            this.element.style.visibility = \"visible\";\n\t        }\n\t        else {\n\t            this.element.style.visibility = \"hidden\";\n\t        }\n\t    };\n\t    return BoundItemAttrVisible;\n\t}(BoundItemAttribute_1.BoundItemAttribute));\n\texports.BoundItemAttrVisible = BoundItemAttrVisible;\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemBase_1 = __webpack_require__(18);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar Selector_1 = __webpack_require__(9);\n\tvar BoundItemExpression = (function (_super) {\n\t    __extends(BoundItemExpression, _super);\n\t    function BoundItemExpression(attrName, expression, element, uku) {\n\t        var _this = _super.call(this, attrName, element, uku) || this;\n\t        _this.expression = expression;\n\t        return _this;\n\t    }\n\t    BoundItemExpression.prototype.render = function (controllers) {\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, this.attributeName);\n\t        Selector_1.Selector.directText(this.element, finalValue);\n\t    };\n\t    return BoundItemExpression;\n\t}(BoundItemBase_1.BoundItemBase));\n\texports.BoundItemExpression = BoundItemExpression;\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemBase_1 = __webpack_require__(18);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemInnerText = (function (_super) {\n\t    __extends(BoundItemInnerText, _super);\n\t    function BoundItemInnerText(attrName, element, uku) {\n\t        var _this = _super.call(this, attrName, element, uku) || this;\n\t        _this.tagName = 'text';\n\t        return _this;\n\t    }\n\t    BoundItemInnerText.prototype.render = function (controllers) {\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, this.attributeName);\n\t        this.element.innerHTML = finalValue;\n\t    };\n\t    return BoundItemInnerText;\n\t}(BoundItemBase_1.BoundItemBase));\n\texports.BoundItemInnerText = BoundItemInnerText;\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemBase_1 = __webpack_require__(18);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemRepeat = (function (_super) {\n\t    __extends(BoundItemRepeat, _super);\n\t    function BoundItemRepeat(attrName, itemName, element, uku) {\n\t        var _this = _super.call(this, attrName, element, uku) || this;\n\t        _this.expression = itemName;\n\t        _this.renderTemplate = element.outerHTML;\n\t        _this.parentElement = element.parentNode;\n\t        _this.beginCommentString = undefined;\n\t        _this.endCommentString = undefined;\n\t        return _this;\n\t    }\n\t    BoundItemRepeat.prototype.render = function (controllers) {\n\t        var _this = this;\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, this.attributeName);\n\t        if (!finalValue) {\n\t            return;\n\t        }\n\t        var self = this;\n\t        if (this.element && this.element.parentNode) {\n\t            //create repeate begin comment\n\t            this.beginCommentString = \"begin uku-repeat: \" + this.expression + \" in \" + this.attributeName;\n\t            var beginComment = document.createComment(this.beginCommentString);\n\t            this.element.parentNode.insertBefore(beginComment, this.element);\n\t            //create repeate end comment\n\t            this.endCommentString = \"end uku-repeat: \" + this.expression + \" in \" + this.attributeName;\n\t            var endComment = document.createComment(this.endCommentString);\n\t            this.element.parentNode.insertBefore(endComment, this.element.nextSibling);\n\t            //remove definition dom\n\t            this.element.parentNode.removeChild(this.element);\n\t        }\n\t        var filter = { acceptNode: function (node) {\n\t                if (node.nodeValue === self.beginCommentString) {\n\t                    return NodeFilter.FILTER_ACCEPT;\n\t                }\n\t                return NodeFilter.FILTER_SKIP;\n\t            } };\n\t        var safeFilter = filter.acceptNode;\n\t        safeFilter.acceptNode = filter.acceptNode;\n\t        var treeWalker = document.createTreeWalker(this.parentElement, NodeFilter.SHOW_COMMENT, safeFilter, false);\n\t        /*function filter(node:Node) :any{\n\t            if (node.nodeValue === self.beginCommentString) {\n\t                return (NodeFilter.FILTER_ACCEPT);\n\t            }\n\t            return (NodeFilter.FILTER_SKIP);\n\t        }*/\n\t        function generateTempContainer() {\n\t            var index = UkuleleUtil_1.UkuleleUtil.searchHtmlTag(self.renderTemplate, \"tr\");\n\t            if (index === -1) {\n\t                return document.createElement(\"div\");\n\t            }\n\t            else {\n\t                return document.createElement(\"tbody\");\n\t            }\n\t        }\n\t        while (treeWalker.nextNode()) {\n\t            var commentNode = treeWalker.currentNode;\n\t            if (commentNode && commentNode.nodeValue === this.beginCommentString) {\n\t                //remove overtime dom.\n\t                while (commentNode.nextSibling && commentNode.nextSibling.nodeValue !== this.endCommentString) {\n\t                    commentNode.parentNode.removeChild(commentNode.nextSibling);\n\t                }\n\t                //create new dom\n\t                var tempDiv = generateTempContainer();\n\t                var blankDiv = generateTempContainer();\n\t                commentNode.parentNode.insertBefore(blankDiv, commentNode.nextSibling);\n\t                for (var i = 0; i < finalValue.length; i++) {\n\t                    tempDiv.insertAdjacentHTML('beforeEnd', this.renderTemplate);\n\t                    if (i === finalValue.length - 1) {\n\t                        var childrenHTML = tempDiv.innerHTML;\n\t                        blankDiv.insertAdjacentHTML('beforeBegin', childrenHTML);\n\t                        commentNode.parentNode.removeChild(blankDiv);\n\t                        tempDiv = null;\n\t                        blankDiv = null;\n\t                    }\n\t                }\n\t                var child = commentNode.nextSibling;\n\t                for (var j = 0; j < finalValue.length; j++) {\n\t                    child.removeAttribute(\"uku-repeat\");\n\t                    var Uku_Clazz = this.uku.constructor;\n\t                    var ukulele = new Uku_Clazz(); //new Ukulele();\n\t                    ukulele.parentUku = this.uku;\n\t                    var compDef = ukulele.parentUku._internal_getDefinitionManager().getComponentsDefinition();\n\t                    var compPool = ukulele.parentUku._internal_getDefinitionManager().getComponentsPool();\n\t                    ukulele._internal_getDefinitionManager().setComponentsDefinition(compDef);\n\t                    ukulele._internal_getDefinitionManager().setComponentsPool(compPool);\n\t                    var sibling = child.nextSibling;\n\t                    var itemType = typeof finalValue[j];\n\t                    if (itemType === \"object\") {\n\t                        ukulele.registerController(this.expression, finalValue[j]);\n\t                    }\n\t                    else {\n\t                        ukulele.registerController(this.expression, { 'value': finalValue[j] });\n\t                        var newOuterHtml = child.outerHTML.replace(new RegExp(this.expression, \"gm\"), this.expression + '.value');\n\t                        child.insertAdjacentHTML('afterend', newOuterHtml);\n\t                        var newItemDom = child.nextSibling;\n\t                        child.parentNode.removeChild(child);\n\t                        child = newItemDom;\n\t                    }\n\t                    ukulele._internal_dealWithElement(child, function (element) {\n\t                        if (_this.element.tagName === \"OPTION\") {\n\t                            var expression = _this.parentElement.getAttribute(\"uku-selected\");\n\t                            var tempArr = expression.split(\"|\");\n\t                            expression = tempArr[0];\n\t                            var key = tempArr[1];\n\t                            var value = _this.uku._internal_getDefinitionManager().getFinalValueByExpression(expression);\n\t                            if (key) {\n\t                                _this.parentElement.value = value[key];\n\t                            }\n\t                            else {\n\t                                _this.parentElement.value = value;\n\t                            }\n\t                        }\n\t                    });\n\t                    child = sibling;\n\t                }\n\t            }\n\t        }\n\t    };\n\t    return BoundItemRepeat;\n\t}(BoundItemBase_1.BoundItemBase));\n\texports.BoundItemRepeat = BoundItemRepeat;\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tvar __extends = (this && this.__extends) || (function () {\n\t    var extendStatics = Object.setPrototypeOf ||\n\t        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n\t        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n\t    return function (d, b) {\n\t        extendStatics(d, b);\n\t        function __() { this.constructor = d; }\n\t        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n\t    };\n\t})();\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar BoundItemBase_1 = __webpack_require__(18);\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar BoundItemComponentAttribute = (function (_super) {\n\t    __extends(BoundItemComponentAttribute, _super);\n\t    function BoundItemComponentAttribute(attrName, ukuTag, cc, uku) {\n\t        var _this = _super.call(this, attrName, null, uku) || this;\n\t        _this.ukuTag = ukuTag;\n\t        _this.componentController = cc;\n\t        return _this;\n\t    }\n\t    BoundItemComponentAttribute.prototype.render = function (controllers) {\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controllers, this.attributeName);\n\t        this.componentController[this.ukuTag] = finalValue;\n\t        this.uku.refresh(this.componentController._alias);\n\t    };\n\t    return BoundItemComponentAttribute;\n\t}(BoundItemBase_1.BoundItemBase));\n\texports.BoundItemComponentAttribute = BoundItemComponentAttribute;\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar UkuleleUtil_1 = __webpack_require__(8);\n\tvar EventListener_1 = __webpack_require__(31);\n\tvar Selector_1 = __webpack_require__(9);\n\tfunction elementChangedBinder(element, tagName, controllerModel, handler, host) {\n\t    var elementStrategies = [inputTextCase, textareaCase, selectCase, checkboxCase, radioCase];\n\t    for (var i = 0; i < elementStrategies.length; i++) {\n\t        var func = elementStrategies[i];\n\t        var goon = func.apply(this, arguments);\n\t        if (goon) {\n\t            break;\n\t        }\n\t    }\n\t}\n\texports.elementChangedBinder = elementChangedBinder;\n\tfunction inputTextCase(element, tagName, controllerModel, handler, host) {\n\t    var elementName = element.tagName;\n\t    if (elementName === \"INPUT\" && isSupportInputType(element) && tagName === \"value\") {\n\t        var eventType = 'change';\n\t        var inputType = element.getAttribute('type');\n\t        if (inputType === \"text\") {\n\t            eventType = 'input';\n\t        }\n\t        EventListener_1.EventListener.addEventListener(element, eventType, function (e) {\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\n\t            var temp = attr.split(\".\");\n\t            var finalInstance = controllerModel.controllerInstance;\n\t            for (var i = 0; i < temp.length - 1; i++) {\n\t                finalInstance = finalInstance[temp[i]];\n\t            }\n\t            finalInstance[temp[temp.length - 1]] = element.value;\n\t            if (handler) {\n\t                handler.call(host, controllerModel.alias, element);\n\t            }\n\t        });\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\tfunction isSupportInputType(element) {\n\t    var type = element.getAttribute(\"type\");\n\t    if (type !== \"checkbox\" && type !== \"radio\") {\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\tfunction textareaCase(element, tagName, controllerModel, handler, host) {\n\t    var elementName = element.tagName;\n\t    if (elementName === \"TEXTAREA\" && tagName === \"value\") {\n\t        EventListener_1.EventListener.addEventListener(element, 'input', function (e) {\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\n\t            var temp = attr.split(\".\");\n\t            var finalInstance = controllerModel.controllerInstance;\n\t            for (var i = 0; i < temp.length - 1; i++) {\n\t                finalInstance = finalInstance[temp[i]];\n\t            }\n\t            finalInstance[temp[temp.length - 1]] = element.value;\n\t            if (handler) {\n\t                handler.call(host, controllerModel.alias, element);\n\t            }\n\t        });\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\tfunction selectCase(element, tagName, controllerModel, handler, host) {\n\t    var elementName = element.tagName;\n\t    if ((elementName === \"SELECT\" && tagName === \"selected\")) {\n\t        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\n\t            var key;\n\t            var tmpArr = attr.split(\"|\");\n\t            attr = tmpArr[0];\n\t            key = tmpArr[1];\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\n\t            var temp = attr.split(\".\");\n\t            var finalInstance = controllerModel.controllerInstance;\n\t            for (var i = 0; i < temp.length - 1; i++) {\n\t                finalInstance = finalInstance[temp[i]];\n\t            }\n\t            var options = Selector_1.Selector.querySelectorAll(element, \"option\");\n\t            for (var j = 0; j < options.length; j++) {\n\t                var option = options[j];\n\t                if (option.selected) {\n\t                    var selectedItem = JSON.parse(option.getAttribute(\"data-item\"));\n\t                    finalInstance[temp[temp.length - 1]] = selectedItem;\n\t                }\n\t            }\n\t            if (handler) {\n\t                handler.call(host, controllerModel.alias, element);\n\t            }\n\t        });\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\tfunction checkboxCase(element, tagName, controllerModel, handler, host) {\n\t    var elementName = element.tagName;\n\t    if (elementName === \"INPUT\" && tagName === \"value\" && element.getAttribute(\"type\") === \"checkbox\") {\n\t        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\n\t            var temp = attr.split(\".\");\n\t            var finalInstance = controllerModel.controllerInstance;\n\t            for (var i = 0; i < temp.length - 1; i++) {\n\t                finalInstance = finalInstance[temp[i]];\n\t            }\n\t            finalInstance[temp[temp.length - 1]] = element.checked;\n\t            if (handler) {\n\t                handler.call(host, controllerModel.alias, element);\n\t            }\n\t        });\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\tfunction radioCase(element, tagName, controllerModel, handler, host) {\n\t    var elementName = element.tagName;\n\t    if (elementName === \"INPUT\" && tagName === \"selected\" && element.getAttribute(\"type\") === \"radio\") {\n\t        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\n\t            var temp = attr.split(\".\");\n\t            var finalInstance = controllerModel.controllerInstance;\n\t            for (var i = 0; i < temp.length - 1; i++) {\n\t                finalInstance = finalInstance[temp[i]];\n\t            }\n\t            if (element.checked) {\n\t                finalInstance[temp[temp.length - 1]] = element.value;\n\t                if (handler) {\n\t                    handler.call(host, controllerModel.alias, element);\n\t                }\n\t            }\n\t        });\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar EventListener = (function () {\n\t    function EventListener() {\n\t    }\n\t    EventListener.addEventListener = function (element, eventType, handler) {\n\t        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== undefined) {\n\t            return window['jQuery'](element).on(eventType, function (e) {\n\t                handler && handler(e);\n\t            });\n\t        }\n\t        else {\n\t            return element.addEventListener(eventType, handler);\n\t        }\n\t    };\n\t    return EventListener;\n\t}());\n\texports.EventListener = EventListener;\n\n\n/***/ })\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// uku.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 909cd7ae4cf29eef67ff","import {EventEmitter} from \"./EventEmitter\";\nimport {DefinitionManager} from \"./DefinitionManager\";\nimport {DirtyChecker} from \"./DirtyChecker\";\nimport {Analyzer} from \"./Analyzer\";\nimport {Selector} from \"../extend/Selector\";\nimport {UkuEventType} from \"./UkuEventType\";\nimport {IUkulele} from \"./IUkulele\";\nimport {Event} from \"./Event\";\nexport class Ukulele extends EventEmitter implements IUkulele{\n\tprivate defMgr:DefinitionManager;\n\tprivate dirtyChecker:DirtyChecker;\n\tprivate promiseArray = [];\n\tpublic parentUku:IUkulele;\n\tstatic INITIALIZED:string = 'initialized';\n\tstatic REFRESH:string = 'refresh';\n\tstatic HANDLE_ELEMENT_COMPLETED:string = \"handle_element_completed\";\n\n\tpublic init():void{\n\t\tPromise.all(this.promiseArray).then(()=>{\n\t\t\tthis.manageApplication();\n\t\t});\n\t}\n\n\tpublic handleElement(element:HTMLElement):void {\n\t\tthis.analyizeElement(element,(e)=>{\n\t\t\tthis.dispatchEvent(new Event(UkuEventType.HANDLE_ELEMENT_COMPLETED,e));\n\t\t});\n\t}\n\n\tpublic registerController(instanceName:string, controllerInst:Object):void{\n\t\twindow[instanceName] = controllerInst;\n\t\tthis._internal_getDefinitionManager().addControllerDefinition(instanceName,controllerInst);\n\t}\n\n\tpublic getController(instanceName:string){\n\t\treturn this._internal_getDefinitionManager().getControllerDefinition(instanceName).controllerInstance;\n\t}\n\n\tpublic registerComponent(tag:string,templateUrl:string,preload:boolean):void{\n\t\tvar p:Promise<void> =  this._internal_getDefinitionManager().addComponentDefinition(tag,templateUrl,preload);\n\t\tthis.promiseArray.push(p);\n\t}\n\n\tpublic getComponent(tagName:string){\n\t\treturn this._internal_getDefinitionManager().getComponent(tagName);\n\t}\n\t\n\tpublic getComponentController(componentId:string):Object{\n\t\treturn this._internal_getDefinitionManager().getControllerInstByDomId(componentId);\n\t}\n\t\n\tpublic refresh(alias?:string|Array<string>,excludeElement?:HTMLElement) {\n\t\tif(!this.dirtyChecker){\n\t\t\tthis.dirtyChecker = new DirtyChecker(this);\n\t\t}\n\t\tthis.dirtyChecker.runDirtyChecking(alias,excludeElement);\n\t}\n\t//internal function\n\tpublic _internal_getDefinitionManager():DefinitionManager{\n\t\tif(!this.defMgr){\n\t\t\tthis.defMgr = new DefinitionManager(this);\n\t\t}\n\t\treturn this.defMgr;\n\t}\n\tpublic _internal_dealWithElement(element:HTMLElement,callback:Function):void {\n\t\tthis.analyizeElement(element,callback);\n\t}\n\n\tprivate manageApplication():void{\n\t\tlet apps:NodeList = Selector.querySelectorAll(document,\"[uku-application]\");\n\t\tif (apps.length === 1) {\n\t\t\tthis.analyizeElement(apps[0] as HTMLElement, (ele)=>{\n\t\t\t\tthis.dispatchEvent(new Event(UkuEventType.INITIALIZED,ele));\n\t\t\t});\n\t\t} else {\n\t\t\tthrow new Error(\"Only one 'uku-application' can be declared in a whole html.\");\n\t\t}\n\t}\n\tprivate analyizeElement(element:HTMLElement, callback?:Function):void{\n\t\tlet anylyzer = new Analyzer(this);\n\t\tif(callback){\n\t\t\t((retFunc:Function)=>{\n\t\t\t\tanylyzer.addListener(Analyzer.ANALYIZE_COMPLETED, (e)=>{\n\t\t\t\t\tretFunc(e.element);\n\t\t\t\t});\n\t\t\t})(callback);\n\t\t}\n\t\tanylyzer.analyizeElement(element);\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Ukulele.ts","import {IEventEmitter} from \"./IEventEmitter\";\nimport {Event} from \"./Event\";\nexport class EventEmitter implements IEventEmitter{\n    private eventsPool:Object;\n    \n    constructor(){\n        this.eventsPool = {};\n    }\n    \n    getEventsPool():Object{\n        return this.eventsPool;\n    }\n    addListener(eventType:string, handler:Function):void{\n        if(!this.eventsPool[eventType]){\n            this.eventsPool[eventType] = [];\n        }\n        this.eventsPool[eventType].push(handler);\n    }\n    removeListener(eventType:string, handler:Function):void{\n        if(this.eventsPool[eventType]){\n            for(let i=this.eventsPool[eventType].length-1;i>=0;i--){\n                if(this.eventsPool[eventType][i] === handler){\n                    this.eventsPool[eventType].splice(i,1);\n                    break;\n                }\n            }\n        }\n    }\n    hasListener(eventType:string):boolean{\n        if(this.eventsPool[eventType] && this.eventsPool[eventType].length > 0){\n            return true;\n        }\n        return false;\n    }\n    dispatchEvent(event:Event):void{\n        if(event && event.eventType){\n            let handlers:Array<Function> = this.eventsPool[event.eventType];\n            if(handlers){\n                for(let i=0;i<handlers.length;i++){\n                    handlers[i].call(this,event);\n                }\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/EventEmitter.ts","import {ObjectUtil} from \"../util/ObjectUtil\";\nimport {Ajax} from \"../extend/Ajax\";\nimport {ControllerModel} from \"../model/ControllerModel\";\nimport {ComponentModel} from \"../model/ComponentModel\";\nimport {ComponentPoolItem} from \"../model/ComponentPoolItem\";\nimport {ComponentConfiguration} from \"../model/ComponentConfiguration\";\nimport {UkuleleUtil} from \"../util/UkuleleUtil\";\nimport {IUkulele} from \"./IUkulele\";\nexport class DefinitionManager{\n\tprivate uku:IUkulele;\n\tconstructor(_uku:IUkulele){\n\t\tthis.uku = _uku;\n\t}\n    private controllersDefinition:Object = {};\n\tprivate componentsDefinition:Object = {};\n\tprivate componentsPool:Object = {};\n\tprivate copyControllers:Object = {};\n\tprivate dependentScriptsCache:Object = {};\n    private ajax:Ajax = new Ajax();\n\n    getComponentsDefinition():Object{\n        return this.componentsDefinition;\n    }\n\t\n\tgetComponentsPool():Object{\n\t\treturn this.componentsPool;\n\t}\n\t\n\tsetComponentsPool(pool):void{\n\t\tthis.componentsPool = pool;\n\t}\n\t\n    setComponentsDefinition(value:Object):void{\n        this.componentsDefinition = value;\n    }\n\n\tgetComponentDefinition(tagName:string):ComponentModel{\n\t\treturn this.componentsDefinition[tagName] as ComponentModel;\n\t}\n\n    getControllerDefinition(instanceName:string):ControllerModel{\n        return this.controllersDefinition[instanceName] as ControllerModel;\n    }\n\n\tgetControllersDefinition():Object{\n\t\treturn this.controllersDefinition;\n\t}\n\n\tgetComponent(tagName:string){\n\t\treturn this.componentsPool[tagName];\n\t}\n\n    getCopyControllers():Object{\n        return this.copyControllers;\n    }\n\n    copyAllController():void{\n\t\tfor (let alias in this.controllersDefinition) {\n\t\t\tlet controllerModel = this.controllersDefinition[alias];\n\t\t\tlet controller = controllerModel.controllerInstance;\n\t\t\tthis.copyControllerInstance(controller, alias);\n\t\t}\n\t}\n\n\tcopyControllerInstance(controller:Object, alias:string):void{\n\t\tlet previousCtrlInst = ObjectUtil.deepClone(controller);\n\t\tdelete this.copyControllers[alias];\n\t\tthis.copyControllers[alias] = previousCtrlInst;\n\t}\n\n    addControllerDefinition(instanceName:string, controllerInst):void{\n        let controllerModel = new ControllerModel(instanceName, controllerInst);\n\t\tcontrollerInst._alias = instanceName;\n\t\tthis.controllersDefinition[instanceName] = controllerModel;\n\t}\n\t\n\tgetControllerInstByDomId(domId:string):Object{\n\t\tfor (let alias in this.controllersDefinition) {\n\t\t\tlet controllerModel = this.controllersDefinition[alias];\n\t\t\tlet controller = controllerModel.controllerInstance;\n\t\t\tif(controller._dom && controller._dom.id === domId){\n\t\t\t\treturn controller;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\t\n    addComponentDefinition(tag:string,templateUrl:string,preload:boolean):Promise<void>{\n\t\treturn new Promise<void>((resolve,reject) => {\n\t\t\tif(!preload){\n\t\t\t\tthis.componentsPool[tag] = new ComponentPoolItem(tag,templateUrl,true);\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tthis.componentsPool[tag] = new ComponentPoolItem(tag,templateUrl,false);\n\t\t\t\treturn this.ajax.get(templateUrl).then((result) => {\n\t\t\t\t\tlet componentConfig = UkuleleUtil.getComponentConfiguration(result);\n\t\t\t\t\treturn this.analyizeComponent(tag,componentConfig);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n    }\n\n    addLazyComponentDefinition(tag:string,templateUrl:string):Promise<void>{\n\t\treturn new Promise<void>((resolve ,reject) => {\n\t\t\treturn this.ajax.get(templateUrl).then((result)=>{\n\t\t\t\tlet componentConfig = UkuleleUtil.getComponentConfiguration(result);\n\t\t\t\treturn this.analyizeComponent(tag,componentConfig).then(()=>{\n\t\t\t\t\tthis.componentsPool[tag] = {'tagName':tag,'templateUrl':templateUrl,'lazy':false};\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\n\n\tgetBoundAttributeValue(attr:string, ...additionalArgu):any{\n\t\tlet controllerModels = this.getControllerModelByName(attr);\n\t\tlet controllers = [];\n\t\tcontrollerModels.forEach( controllerModel => {\n\t\t\tcontrollers.push(controllerModel.controllerInstance);\n\t\t});\n\t\tlet parameters:Array<any> = [this.uku,controllers,attr];\n\t\tparameters = parameters.concat(additionalArgu);\n\t\tlet result = UkuleleUtil.getFinalValue.apply(null,parameters);\n\t\treturn result;\n\t};\n\n\n\tgetControllerModelByName(expression:string):ControllerModel[] {\n\t\treturn this.getBoundControllerModelByName(expression);\n\t};\n\n\n\tgetFinalValueByExpression(expression:string):any{\n\t\tlet controllerModels = this.getControllerModelByName(expression);\n\t\tlet controllers = [];\n\t\tcontrollerModels.forEach( controllerModel => {\n\t\t\tcontrollers.push(controllerModel.controllerInstance);\n\t\t});\n\t\t\n\t\treturn UkuleleUtil.getFinalValue(this.uku, controllers, expression);\n\t};\n\n    private getBoundControllerModelByName(attrName:string):ControllerModel[]{\n\t\tlet alias_list:string[] = Object.keys(this.controllersDefinition);\n\t\tlet instanceNames:string[] = UkuleleUtil.getBoundModelInstantNames(alias_list,attrName);\n\t\tlet arr = [];\n\t\tinstanceNames.forEach(instanceName => {\n\t\t\tlet controllerModel:ControllerModel = this.controllersDefinition[instanceName];\n\t\t\tarr.push(controllerModel);\n\t\t});\n\t\treturn arr;\n\t}\n\t\n    private async analyizeComponent(tag:string,config:ComponentConfiguration):Promise<void>{\n\t\tlet deps:Array<string> = config.dependentScripts;\n\t\tlet self:DefinitionManager = this;\n\t\tif(deps && deps.length > 0){\n\t\t\tlet tmpAMD;\n\t\t\tif(typeof window['define'] === 'function' && window['define'].amd){\n\t\t\t\ttmpAMD = window['define'];\n\t\t\t\twindow['define'] = undefined;\n\t\t\t}\n\t\t\tif(!config.componentControllerScript){\n\t\t\t\tlet ccsExternal = deps[deps.length-1];\n\t\t\t\tconfig.componentControllerScript = await this.ajax.get(ccsExternal);\n\t\t\t\tdeps.pop();\n\t\t\t}\n\t\t\tfor (let i = 0; i < deps.length; i++) {\n\t\t\t\tlet dep = deps[i];\n\t\t\t\tawait loadDependentScript(dep);\n\t\t\t}\n\t\t\tif(tmpAMD){\n\t\t\t\twindow['define'] = tmpAMD;\n\t\t\t}\n\t\t\tthis.buildeComponentModel(tag,config.template,config.componentControllerScript,config.stylesheet);\n\t\t\treturn;\n\t\t}else{\n\t\t\tthis.buildeComponentModel(tag,config.template,config.componentControllerScript,config.stylesheet);\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tfunction loadDependentScript(src:string):Promise<void>{\n\t\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\t\tif(!self.dependentScriptsCache[src]){\n\t\t\t\t\tlet head = document.getElementsByTagName('HEAD')[0];\n\t\t\t\t\tlet script = document.createElement('script');\n\t\t\t\t\tscript.type = 'text/javascript';\n\t\t\t\t\tscript.charset = 'utf-8';\n\t\t\t\t\tscript.async = true;\n\t\t\t\t\tscript.src = src;\n\t\t\t\t\tscript.onload = (e)=>{\n\t\t\t\t\t\tself.dependentScriptsCache[e.target['src']] = true;\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t};\n\t\t\t\t\thead.appendChild(script);\n\t\t\t\t}else{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate buildeComponentModel(tag:string,template:string,script:string,style:string):void{\n\t\tlet debugComment = \"//# sourceURL=\"+tag+\".js\";\n\t\ttry{\n\t\t\tlet controllerClazz\n\t\t\tif(script){\n\t\t\t\tscript += debugComment;\n\t\t\t\tcontrollerClazz = eval(script);\n\t\t\t}\n\t\t\tlet newComp = new ComponentModel(tag, template,controllerClazz);\n\t\t\tthis.componentsDefinition[tag] = newComp;\n\t\t\tif(style){\n\t\t\t\tdealWithShadowStyle(tag,style);\n\t\t\t}\n\t\t}catch(e){\n\t\t\tconsole.error(e);\n\t\t}\n\n\t\tfunction dealWithShadowStyle(tagName:string,stylesheet:string):void{\n\t\t\tlet head = document.getElementsByTagName('HEAD')[0];\n\t\t\tlet style = document.createElement('style');\n\t\t\tstyle.type = 'text/css';\n\t\t\tvar styleArray = stylesheet.split(\"}\");\n\t\t\tvar newArray = [];\n\t\t\tstyleArray.forEach((value:string,index:number)=>{\n\t\t\t\tvar newValue = value.replace(/^\\s*/,\"\");\n\t\t\t\tif(newValue){\n\t\t\t\t\tnewArray.push(newValue);\n\t\t\t\t}\n\t\t\t});\n\t\t\tstylesheet = newArray.join(\"}\\n\" + \".\" + tagName + \" \");\n\t\t\tstylesheet = \".\" + tagName + \" \" + stylesheet + \"}\";\n\t\t\tstyle.innerHTML = stylesheet;\n\t\t\thead.appendChild(style);\n\t\t}\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/DefinitionManager.ts","export class ObjectUtil {\n    static isArray(obj: Object): boolean {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    }\n\n    static getType(obj: any): string {\n        let type: string = typeof (obj);\n        if (type === \"object\") {\n            if (ObjectUtil.isArray(obj)) {\n                return \"array\";\n            } else {\n                return type;\n            }\n        } else {\n            return type;\n        }\n    }\n\n    static compare(objA: any, objB: any): boolean {\n        let type: string = ObjectUtil.getType(objA);\n        let typeB: string = ObjectUtil.getType(objB);\n        let result: boolean = true;\n        if (type !== typeB) {\n            return false;\n        } else {\n            switch (type) {\n                case \"object\":\n                    if (objA === null && objB === null) {\n                        result = true;\n                    } else if (objA === null || objB === null) {\n                        result = false;\n                    } else {\n                        let keys_a = Object.keys(objA);\n                        let keys_b = Object.keys(objB);\n\n                        if (keys_a.length != keys_b.length) {\n                            result = false;\n                        } else if (keys_a.length === 0 && keys_b.length === 0) {\n                            result = true;\n                        } else {\n                            for (let key in objA) {\n                                let valuA = objA[key];\n                                let valuB = objB[key];\n                                let isEqual: boolean = ObjectUtil.compare(valuA, valuB);\n                                if (!isEqual) {\n                                    result = false;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                case \"array\":\n                    if (objA.length === objB.length) {\n                        for (let i = 0; i < objA.length; i++) {\n                            let itemA = objA[i];\n                            let itemB = objB[i];\n                            let isEqual2: boolean = ObjectUtil.compare(itemA, itemB);\n                            if (!isEqual2) {\n                                result = false;\n                                break;\n                            }\n                        }\n                    } else {\n                        result = false;\n                    }\n                    break;\n                case \"function\":\n                    result = objA.toString() === objB.toString();\n                    break;\n                default:\n                    result = objA === objB;\n                    break;\n            }\n        }\n        return result;\n    }\n\n    static deepClone(obj: any): any {\n        let o: any;\n        let i: any;\n        let j: number;\n        if (typeof (obj) !== \"object\" || obj === null) {\n            return obj;\n        }\n        if (obj instanceof (Array)) {\n            o = [];\n            i = 0;\n            j = obj.length;\n            for (; i < j; i++) {\n                if (typeof (obj[i]) === \"object\" && obj[i] !== null) {\n                    o[i] = ObjectUtil.deepClone(obj[i]);\n                } else {\n                    o[i] = obj[i];\n                }\n            }\n        } else {\n            o = {};\n            for (i in obj) {\n                if (typeof (obj[i]) === \"object\" && obj[i] !== null && i !== \"_dom\") {\n                    o[i] = ObjectUtil.deepClone(obj[i]);\n                } else {\n                    o[i] = obj[i];\n                }\n            }\n        }\n\n        return o;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/ObjectUtil.ts","export class Ajax {\n    get(url:string):Promise<any> {\n        return new Promise<any>((resolve, reject)=>{\n            let request:XMLHttpRequest = new XMLHttpRequest();\n            request.onreadystatechange = function() {\n                if (request.readyState === 4) {\n                    if (request.status === 200) {\n                        resolve(request.responseText);\n                    } else {\n                        reject();\n                    }\n                }\n            };\n            request.open(\"GET\", url, true);\n            request.send(null);\n        });\n        \n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extend/Ajax.ts","import {BoundItemBase} from \"./BoundItemBase\";\nexport class ControllerModel{\n    alias:string;\n    controllerInstance:Object;\n    boundItems:Array<BoundItemBase>;\n    constructor(alias:string ,ctrlInst:Object){\n        this.alias = alias;\n        this.controllerInstance = ctrlInst;\n        this.boundItems = [];\n    }\n    addBoundItem(boundItem:BoundItemBase) :void{\n        this.boundItems.push(boundItem);\n    }\n\n    getBoundItemsByName(name):Array<BoundItemBase> {\n        let tempBoundItems:Array<BoundItemBase> = [];\n        for (let i = 0; i < this.boundItems.length; i++) {\n            let boundItem:BoundItemBase = this.boundItems[i];\n            if (boundItem.attributeName === name) {\n                tempBoundItems.push(boundItem);\n            }\n        }\n        return tempBoundItems;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/ControllerModel.ts","export class ComponentModel{\n    tagName:string;\n    template:string;\n    controllerClazz:Function;\n    constructor(tagName,template,clazz){\n        this.tagName = tagName;\n        this.template = template;\n        this.controllerClazz = clazz;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/ComponentModel.ts","export class ComponentPoolItem{\n    tagName:string;\n    templateUrl:string;\n    lazy:boolean;\n    \n    constructor(_tagName,_templateUrl,_lazy){\n        this.tagName = _tagName;\n        this.templateUrl = _templateUrl;\n        this.lazy = _lazy;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/ComponentPoolItem.ts","import {Selector} from \"../extend/Selector\";\nimport {ArgumentUtil} from \"./ArgumentUtil\";\nimport {ComponentConfiguration} from \"../model/ComponentConfiguration\";\nimport {IUkulele} from \"../core/IUkulele\";\nimport {ControllerModel} from \"../model/ControllerModel\";\nclass ValueAndParent{\n    value:any;\n    parent:Object;\n    constructor(_value:any,_parant:Object){\n        this.value = _value;\n        this.parent = _parant;\n    }\n}\nexport class UkuleleUtil{\n    static getFinalAttribute(expression:string):string {\n        let temp:Array<string> = expression.split(\".\");\n        let isParent:string = temp.shift();\n        if (isParent === \"parent\") {\n            return UkuleleUtil.getFinalAttribute(temp.join(\".\"));\n        }\n        return temp.join(\".\");\n    }\n\n    static searchHtmlTag(htmlString:string, tagName:string):number {\n        let reTemp:string = \"^<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">$\";\n        let re:RegExp = new RegExp(reTemp);\n        let index:number = htmlString.search(re);\n        return index;\n    }\n\n    static getInnerHtml(htmlString:string, tagName:string):string{\n        let reTemp:string = \"<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">\";\n        let re:RegExp = new RegExp(reTemp);\n        let match:RegExpMatchArray = htmlString.match(re);\n        if(match.index > -1){\n            let matchString:string = match[0];\n            let index:number = matchString.search(\">\");\n            let tempString = matchString.substr(index+1);\n            let index2:number = tempString.lastIndexOf(\"</\");\n            tempString = tempString.substring(0,index2);\n            tempString = tempString.replace(/(^\\s*)|(\\s*$)/g, \"\");\n            return tempString;\n        }else{\n            return null;\n        }\n    }\n\n    static getComponentConfiguration(htmlString:string):ComponentConfiguration{\n        let tempDom:HTMLElement = document.createElement(\"div\");\n        tempDom.innerHTML = htmlString;\n        let tpl:NodeList = Selector.querySelectorAll(tempDom,\"template\");\n        let scripts:NodeList = Selector.querySelectorAll(tempDom,\"script\");\n        let stylesheet:NodeList = Selector.querySelectorAll(tempDom,\"style\");\n        let deps:Array<string> = [];\n        let ccs:string = null;\n        for (let i = 0; i < scripts.length; i++) {\n            let script:HTMLScriptElement = scripts[i] as HTMLScriptElement;\n            if (script.src !== \"\") {\n                deps.push(script.src);\n            } else {\n                ccs = script.innerHTML;\n            }\n        }\n        if(stylesheet && stylesheet[0]){\n            return new ComponentConfiguration((tpl[0] as HTMLElement).innerHTML,deps,ccs,(stylesheet[0] as HTMLElement).innerHTML);\n        }else{\n            return new ComponentConfiguration((tpl[0] as HTMLElement).innerHTML,deps,ccs);\n        }\n        \n    }\n\n    static searchUkuAttrTag(htmlString:string):number {\n        let re:RegExp = /^uku\\-.*/;\n        let index:number = htmlString.search(re);\n        return index;\n    }\n\n    static getAttrFromUkuTag(ukuTag:string, camelCase:boolean = false){\n        if(UkuleleUtil.searchUkuAttrTag(ukuTag) === 0){\n            ukuTag = ukuTag.replace('uku-','');\n        }\n        if(camelCase){\n            let names:Array<string> = ukuTag.split('-');\n            ukuTag = names[0];\n            for(let i=1;i<names.length;i++){\n                let firstLetter:string =  names[i].charAt(0).toUpperCase();\n                ukuTag = ukuTag + firstLetter + names[i].substr(1);\n            }\n        }\n        return ukuTag;\n    }\n\n    static searchUkuExpTag(expression:string):number {\n        let re:RegExp = /^\\{\\{.*\\}\\}$/;\n        let index:number = expression.search(re);\n        return index;\n    }\n\n    static searchUkuFuncArg(htmlString:string):number {\n        let re1:RegExp = /[\\+\\-\\*\\/\\%\\?\\:\\>\\<]/;\n        let index = htmlString.search(re1);\n        if(index === -1){\n            let re2:RegExp = /\\(.*\\)$/;\n            index = htmlString.search(re2);\n            return index;\n        }else{\n            return -1;\n        }\n    }\n\n    static isRepeat(element:HTMLElement):boolean {\n        if (element.getAttribute(\"uku-repeat\")) {\n            return true;\n        }\n        return false;\n    }\n    \n    static isInRepeat(element:HTMLElement):boolean {\n        let parents:Array<HTMLElement> = Selector.parents(element);\n        for (let i = 0; i < parents.length; i++) {\n            let parent:HTMLElement = parents[i] as HTMLElement;\n            if(parent.nodeType !== 9){\n                let b:string = parent.getAttribute(\"uku-repeat\");\n                if (b) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n\n    static getBoundModelInstantName(expression:string):string {\n        let controlInstName:string = expression.split('.')[0];\n        if (controlInstName) {\n            return controlInstName;\n        }\n        return undefined;\n    }\n\n    static getBoundModelInstantNames(controller_alias_list,expression):any{\n        let arr = [];\n        controller_alias_list.forEach(alias => {\n            let pattern = new RegExp(\"\\\\b\"+alias,\"gm\");\n            if(expression.search(pattern) > -1){\n                arr.push(alias);\n            }\n        });\n        return arr;\n    }\n    static getAttributeFinalValue(object:Object, attrName:string):any {\n        let valueObject:ValueAndParent = UkuleleUtil.getAttributeFinalValueAndParent(object, attrName);\n        let value:any = valueObject.value;\n        return value;\n    }\n    \n    static getAttributeFinalValueAndParent(object:any, attrName:string):ValueAndParent {\n        let finalValue:any = object;\n        let parentValue;\n        if(typeof attrName === \"string\"){\n            let attrValue:string = UkuleleUtil.getFinalAttribute(attrName);\n            let temp = attrValue.split(\".\");\n            if (attrValue !== \"\" && finalValue) {\n                for (let i = 0; i < temp.length; i++) {\n                    let property = temp[i];\n                    parentValue = finalValue;\n                    finalValue = finalValue[property];\n                    if (finalValue === undefined || finalValue === null) {\n                        break;\n                    }\n                }\n            }else{\n                if(object.hasOwnProperty(\"_alias\") && object._alias === attrName){\n                    finalValue = object;\n                }else{\n                    finalValue = attrName;\n                }\n            }\n        }\n        return new ValueAndParent(finalValue,parentValue);\n    }\n\n    static getFinalValue(uku:IUkulele, objects:Object[], attrName:string, ...additionalArgu){\n       return (function(){\n           var tempScope = {};\n           objects.forEach( object => {\n               tempScope[object['_alias']] = object;\n               let alias = object['_alias'];\n               let pattern = new RegExp(\"\\\\b\" + alias + \"\\\\b\" ,\"gm\");\n               attrName = attrName.replace(pattern,\"tempScope.\"+alias);\n\n               let pattern2 = new RegExp(\"\\\\.tempScope\\\\.\" + alias ,\"gm\");\n               attrName = attrName.replace(pattern2,\".\"+alias);\n               \n           });\n           \n           var result = eval(attrName);\n           tempScope = null;\n           return result;\n       })();\n    }\n    /*static getFinalValue(uku:IUkulele, object:Object, attrName:string, ...additionalArgu) { \n        let index:number = -1;\n        if(typeof attrName === \"string\"){\n            index = UkuleleUtil.searchUkuFuncArg(attrName);\n        }\n        if (index === -1) {\n            //is attribute\n            return UkuleleUtil.getAttributeFinalValue(object, attrName);\n        } else {\n            //is function\n            let functionName = attrName.substring(0, index);\n            let finalValueObject:ValueAndParent = UkuleleUtil.getAttributeFinalValueAndParent(object, functionName);\n            let finalValue = finalValueObject.value;\n            if (finalValue === undefined) {\n                return finalValue;\n            }\n            let new_arguments = [];\n            let _argumentsString:string = attrName.substring(index + 1, attrName.length - 1);\n            if (_argumentsString !== \"\") {\n                let _arguments:Array<any> = ArgumentUtil.analyze(_argumentsString, uku);\n                for (let i = 0; i < _arguments.length; i++) {\n                    let temp:any;\n                    let argument:any = _arguments[i];\n                    let argType:string = typeof argument;\n                    let controllerModel:ControllerModel = null;\n                    if(argType === \"string\"){\n                        controllerModel = uku._internal_getDefinitionManager().getControllerModelByName(argument);\n                        if (controllerModel && controllerModel.controllerInstance) {\n                            let agrumentInst:Object = controllerModel.controllerInstance;\n                            if (argument.split(\".\").length === 1) {\n                                temp = agrumentInst;\n                            } else {\n                                temp = UkuleleUtil.getFinalValue(uku, agrumentInst, argument);\n                            }\n                        } else {\n                            temp = UkuleleUtil.getFinalValue(uku, object, argument);\n                        }\n                        new_arguments.push(temp);\n                    }else{\n                        new_arguments.push(argument);\n                    }\n                }\n            }\n\n            if (additionalArgu) {\n                let additionalArguArray = Array.prototype.slice.call(additionalArgu);\n                new_arguments = new_arguments.concat(additionalArguArray);\n            }\n            finalValue = finalValue.apply(finalValueObject.parent, new_arguments);\n            return finalValue;\n        }\n    } */\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/util/UkuleleUtil.ts","export class Selector{\n    static querySelectorAll(element:HTMLBodyElement|HTMLDocument|HTMLElement,query:string):NodeList{\n        if(window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== \"undefined\"){\n            return window['jQuery'](element).find(query);\n        }else{\n            return element.querySelectorAll(query);\n        }\n    }\n\n    static fuzzyFind(element:HTMLElement,text:string):HTMLElement {\n        if (element && element.attributes) {\n            for (let i = 0; i < element.attributes.length; i++) {\n                let attr = element.attributes[i];\n                if (attr.nodeName.search(text) > -1) {\n                    return element;\n                }\n            }\n        }\n        return null;\n    }\n\n    static directText(element:HTMLElement,text?:any):string {\n        let o = \"\";\n        let nodes = element.childNodes;\n        for (let i = 0; i <= nodes.length - 1; i++) {\n            let node = nodes[i];\n            if (node.nodeType === 3) {\n                if (text || text ===\"\" || text === 0 || text === false) {\n                    node.nodeValue = text;\n                    return;\n                } else {\n                    o += node.nodeValue;\n                }\n            }\n        }\n        return o.trim();\n    }\n\n    static parents(element:HTMLElement):Array<HTMLElement>{\n        let parents = [];\n        while(element.parentNode && (element.parentNode as HTMLElement).tagName !== 'BODY'){\n            parents.push(element.parentNode as HTMLElement);\n            element = element.parentNode as HTMLElement;\n        }\n        return parents;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extend/Selector.ts","export class ComponentConfiguration{\n    template:string;\n    dependentScripts:Array<string>;\n    componentControllerScript:string;\n    stylesheet:string;\n    \n    constructor(_template:string,_dependentScripts:Array<string>,_componentControllerScript:string,_stylesheet:string = undefined){\n        this.template = _template;\n        this.dependentScripts = _dependentScripts;\n        this.componentControllerScript = _componentControllerScript;\n        this.stylesheet = _stylesheet;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/ComponentConfiguration.ts","import {UkuleleUtil} from \"../util/UkuleleUtil\";\nimport {ObjectUtil} from \"../util/ObjectUtil\";\nimport {UkuEventType} from \"./UkuEventType\";\nimport {IUkulele} from \"./IUkulele\";\nimport {EventEmitter} from \"./EventEmitter\";\nimport {ControllerModel} from \"../model/ControllerModel\";\nimport {BoundItemBase} from \"../model/BoundItemBase\";\nimport {Event} from \"./Event\";\nexport class DirtyChecker{\n\tprivate uku:IUkulele;\n\tprivate defMgr;\n\tconstructor(_uku:IUkulele){\n\t\tthis.uku = _uku;\n\t\tthis.defMgr = this.uku._internal_getDefinitionManager();\n\t}\n    \n\trunDirtyChecking(ctrlAliasName?:string|Array<string>, excludeElement?:HTMLElement):void {\n\t\tlet _this:DirtyChecker = this;\n\t\tif (ctrlAliasName) {\n\t\t\tif (typeof (ctrlAliasName) === \"string\") {\n\t\t\t\twatchController(ctrlAliasName as string);\n\t\t\t} else if (ObjectUtil.isArray(ctrlAliasName)) {\n\t\t\t\tfor (let i = 0; i < ctrlAliasName.length; i++) {\n\t\t\t\t\twatchController(ctrlAliasName[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let alias in this.defMgr.getControllersDefinition()) {\n\t\t\t\twatchController(alias);\n\t\t\t}\n\t\t}\n\n\t\tfunction watchController(alias:string) {\n\t\t\tlet controllerModel:ControllerModel = _this.defMgr.getControllersDefinition()[alias];\n\t\t\tif (!controllerModel) {\n\t\t\t\tif (_this.uku.parentUku) {\n\t\t\t\t\t_this.uku.parentUku.refresh(alias);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet controller:Object = controllerModel.controllerInstance;\n\t\t\tlet previousCtrlModel:ControllerModel = _this.defMgr.getCopyControllers()[alias];\n\t\t\tlet changedElementCount = 0;\n\t\t\tfor (let i = 0; i < controllerModel.boundItems.length; i++) {\n\t\t\t\tlet boundItem:BoundItemBase = controllerModel.boundItems[i] as BoundItemBase;\n\t\t\t\tlet attrName:string = boundItem.attributeName;\n\t\t\t\tif(attrName.search('parent.') > -1){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (previousCtrlModel) {\n\t\t\t\t\tif (boundItem.hasOwnProperty('ukuTag') && boundItem['ukuTag'] === \"selected\") {\n\t\t\t\t\t\tattrName = attrName.split(\"|\")[0];\n\t\t\t\t\t}\n\t\t\t\t\tlet finalValue = UkuleleUtil.getFinalValue(_this.uku, [controller], attrName);\n\t\t\t\t\tlet previousFinalValue = UkuleleUtil.getFinalValue(_this.uku, [previousCtrlModel], attrName);\n\t\t\t\t\tif (!ObjectUtil.compare(previousFinalValue, finalValue)) {\n\t\t\t\t\t\tattrName = boundItem.attributeName;\n\t\t\t\t\t\tlet changedBoundItems:Array<BoundItemBase> = controllerModel.getBoundItemsByName(attrName);\n\t\t\t\t\t\tfor (let j = 0; j < changedBoundItems.length; j++) {\n\t\t\t\t\t\t\tlet changedBoundItem:BoundItemBase = changedBoundItems[j] as BoundItemBase;\n\t\t\t\t\t\t\tif(changedBoundItem.element !== excludeElement || (boundItem.hasOwnProperty('ukuTag') && changedBoundItem['ukuTag'] !== \"value\")){\n\t\t\t\t\t\t\t\tchangedElementCount++;\n\t\t\t\t\t\t\t\tchangedBoundItem.render([controller]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(changedElementCount > 0 && _this.uku.hasListener(UkuEventType.REFRESH)){\n\t\t\t\t_this.uku.dispatchEvent(new Event(UkuEventType.REFRESH));\n\t\t\t}\n\t\t\t_this.defMgr.copyControllerInstance(controller, alias);\n\t\t}\n\t};\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/DirtyChecker.ts","export class UkuEventType{\n    static INITIALIZED:string = 'initialized';\n\tstatic REFRESH:string = 'refresh';\n\tstatic HANDLE_ELEMENT_COMPLETED:string = \"handle_element_completed\";\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/UkuEventType.ts","export class Event{\n    eventType:string;\n    element:HTMLElement;\n    \n    constructor(_eventType,_element?:HTMLElement){\n        this.eventType = _eventType;\n        this.element = _element;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/Event.ts","import { EventEmitter } from \"./EventEmitter\";\nimport { UkuleleUtil } from \"../util/UkuleleUtil\";\nimport { BoundItemAttributeFactory } from './BoundItemAttributeFactory';\nimport { BoundItemExpression } from '../model/BoundItemExpression';\nimport { BoundItemInnerText } from '../model/BoundItemInnerText';\nimport { BoundItemRepeat } from '../model/BoundItemRepeat';\nimport { BoundItemComponentAttribute } from \"../model/BoundItemComponentAttribute\";\nimport { elementChangedBinder } from \"./ElementActionBinder\";\nimport { IUkulele } from \"./IUkulele\";\nimport { EventListener } from \"../extend/EventListener\";\nimport { Selector } from \"../extend/Selector\";\nimport { Event as UkuEvent } from \"./Event\";\nexport class Analyzer extends EventEmitter {\n    private uku: IUkulele;\n    private defMgr;\n    static ANALYIZE_COMPLETED: string = 'analyizeCompleted';\n    constructor(_uku: IUkulele) {\n        super();\n        this.uku = _uku;\n        this.defMgr = this.uku._internal_getDefinitionManager();\n    }\n\n    public analyizeElement(ele): void {\n        this.searchComponent(ele).then((element) => {\n            this.searchExpression(element);\n            this.searchUkuAttribute(element);\n            this.defMgr.copyAllController();\n            if (this.hasListener(Analyzer.ANALYIZE_COMPLETED)) {\n                this.dispatchEvent(new UkuEvent(Analyzer.ANALYIZE_COMPLETED, element));\n            }\n        });\n    }\n\n    private sortAttributes(subElement): Array<any> {\n        let orderAttrs = [];\n        for (let i = 0; i < subElement.attributes.length; i++) {\n            let attribute = subElement.attributes[i];\n            if (attribute.nodeName.search(\"uku-on\") !== -1) {\n                orderAttrs.push(attribute);\n            } else {\n                orderAttrs.unshift(attribute);\n            }\n        }\n        return orderAttrs;\n    }\n\n    private searchUkuAttribute(element): void {\n        let subElements = [];\n        //scan element which has uku-* tag\n        let isSelfHasUkuTag = Selector.fuzzyFind(element, 'uku-');\n        if (isSelfHasUkuTag) {\n            subElements.push(isSelfHasUkuTag);\n        }\n        let allChildren = Selector.querySelectorAll(element, \"*\");\n        for (let i = 0; i < allChildren.length; i++) {\n            let child: HTMLElement = allChildren[i] as HTMLElement;\n            let matchElement = Selector.fuzzyFind(child, 'uku-');\n            if (matchElement && !UkuleleUtil.isInRepeat(matchElement)) {\n                subElements.push(matchElement);\n            }\n        }\n        //解析绑定 attribute，注册event\n        for (let n = 0; n < subElements.length; n++) {\n            let subElement = subElements[n];\n            let orderAttrs = this.sortAttributes(subElement);\n            for (let j = 0; j < orderAttrs.length; j++) {\n                let attribute = orderAttrs[j];\n                if (UkuleleUtil.searchUkuAttrTag(attribute.nodeName) > -1) {\n                    let tempArr = attribute.nodeName.split('-');\n                    tempArr.shift();\n                    let attrName = tempArr.join('-');\n                    if (attrName !== \"application\") {\n                        if (attrName.search('on') === 0) {\n                            //is an event\n                            if (!UkuleleUtil.isRepeat(subElement) && !UkuleleUtil.isInRepeat(subElement)) {\n                                this.dealWithEvent(subElement, attrName);\n                            }\n                        } else if (attrName.search('repeat') !== -1) {\n                            //is an repeat\n                            this.dealWithRepeat(subElement);\n                        } else {\n                            //is an attribute\n                            if (!UkuleleUtil.isRepeat(subElement) && !UkuleleUtil.isInRepeat(subElement)) {\n                                if (attrName !== \"text\") {\n                                    this.dealWithAttribute(subElement, attrName);\n                                } else {\n                                    this.dealWithInnerText(subElement);\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n\n    private async searchComponent(element): Promise<any> {\n        let comp = this.defMgr.getComponent(element.localName);\n        if (comp) {\n            if (!comp.lazy) {\n                let attrs = element.attributes;\n                let compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\n                if (!UkuleleUtil.isRepeat(element) && !UkuleleUtil.isInRepeat(element)) {\n                    return this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs);\n                } else {\n                    return element;\n                }\n            } else {\n                await this.defMgr.addLazyComponentDefinition(comp.tagName, comp.templateUrl);\n                let attrs = element.attributes;\n                let compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\n                if (!UkuleleUtil.isRepeat(element) && !UkuleleUtil.isInRepeat(element)) {\n                    return this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs);\n                } else {\n                    return element;\n                }\n            }\n        } else {\n            if (element.children && element.children.length > 0) {\n                for (let i = 0; i < element.children.length; i++) {\n                    let child = element.children[i];\n                    await this.searchComponent(child);\n                }\n                return element;\n            } else {\n                return element;\n            }\n        }\n    }\n\n    private async dealWithComponent(tag, template, Clazz, attrs): Promise<any> {\n        let randomAlias = 'cc_' + Math.floor(10000 * Math.random()).toString();\n\n        //should consider white space between characters\n        template = template.replace(new RegExp(\"\\'cc\\\\.\", 'gm'), \"'\" + randomAlias + '.');\n        template = template.replace(new RegExp('\"cc\\\\.', 'gm'), '\"' + randomAlias + '.');\n        template = template.replace(new RegExp('\\{\\{cc\\\\.', 'gm'), \"{{\" + randomAlias + '.');\n        template = template.replace(new RegExp(' cc\\\\.', 'gm'), ' ' + randomAlias + '.');\n        template = template.replace(new RegExp('\\\\(cc\\\\.', 'gm'), '(' + randomAlias + '.');\n        template = template.replace(new RegExp('\\\\,cc\\\\.', 'gm'), ',' + randomAlias + '.');\n        template = template.replace(new RegExp('\\\\.cc\\\\.', 'gm'), '.' + randomAlias + '.');\n        let tempFragment = document.createElement('div');\n        tempFragment.insertAdjacentHTML('afterBegin', template);\n        if (tempFragment.children.length > 1) {\n            template = tempFragment.outerHTML;\n        }\n        tag.insertAdjacentHTML('beforeBegin', template);\n        let htmlDom = tag.previousElementSibling;\n        htmlDom.classList.add(tag.localName);\n        let cc;\n        if (Clazz) {\n            cc = new Clazz(this.uku);\n            cc._dom = htmlDom;\n            cc.fire = (eventType: string, data: any, bubbles: boolean = false, cancelable: boolean = true) => {\n                let event = new CustomEvent(eventType.toLowerCase(), { \"bubbles\": bubbles, \"cancelable\": cancelable });\n                event['data'] = data;\n                cc._dom.dispatchEvent(event);\n            };\n            this.uku.registerController(randomAlias, cc);\n            for (let i = 0; i < attrs.length; i++) {\n                let attr = attrs[i];\n                //todo need Refactor\n                if (UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\n                    || attr.nodeName.search(\"uku-on\") !== -1\n                    || attr.nodeName === \"uku-render\"\n                    || attr.nodeName === \"uku-visible\") {\n                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\n                } else {\n                    let tagName = UkuleleUtil.getAttrFromUkuTag(attr.nodeName, true);\n                    let controllerModels = this.defMgr.getControllerModelByName(attr.nodeValue);\n                    if (controllerModels && controllerModels.length > 0) {\n                        let boundItem = new BoundItemComponentAttribute(attr.nodeValue, tagName, cc, this.uku);\n                        let controllers = [];\n                        controllerModels.forEach(controllerModel => {\n                            controllerModel.addBoundItem(boundItem);\n                            controllers.push(controllerModel.controllerInstance);\n                        });\n                        \n                        boundItem.render(controllers);\n                    }\n                }\n            }\n        } else {\n            for (let i = 0; i < attrs.length; i++) {\n                let attr = attrs[i];\n                //todo:need Refactor\n                if (UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\n                    || attr.nodeName.search(\"uku-on\") !== -1\n                    || attr.nodeName === \"uku-render\"\n                    || attr.nodeName === \"uku-visible\") {\n                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\n                }\n            }\n        }\n\n        tag.parentNode.removeChild(tag);\n        if (htmlDom.children && htmlDom.children.length > 0) {\n            for (let j = 0; j < htmlDom.children.length; j++) {\n                let child = htmlDom.children[j];\n                await this.searchComponent(child);\n            }\n            if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\n                cc._initialized(randomAlias,cc._dom);\n            }\n            return htmlDom;\n        } else {\n            if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\n                cc._initialized(randomAlias,cc._dom);\n            }\n            return htmlDom;\n        }\n    }\n    //todo: 处理 tag之间使用{{}}括起的表达式，用以显示文字\n    private searchExpression(element: HTMLElement): void {\n        if (UkuleleUtil.searchUkuExpTag(Selector.directText(element)) !== -1) {\n            if (!UkuleleUtil.isRepeat(element) && !UkuleleUtil.isInRepeat(element)) {\n                //normal expression\n                this.dealWithExpression(element);\n            }\n        }\n        for (let i = 0; i < element.children.length; i++) {\n            this.searchExpression(element.children[i] as HTMLElement);\n        }\n\n\n    }\n\n    private dealWithExpression(element) {\n        //通常的花括号声明方式\n        let expression = Selector.directText(element);\n        if (UkuleleUtil.searchUkuExpTag(expression) !== -1) {\n            let attr = expression.slice(2, -2);\n            let controllerModels = this.defMgr.getControllerModelByName(attr);\n            if (controllerModels && controllerModels.length > 0) {\n                let boundItem = new BoundItemExpression(attr, expression, element, this.uku);\n                let controllers = [];\n                controllerModels.forEach(controllerModel => {\n                    controllerModel.addBoundItem(boundItem);\n                    controllers.push(controllerModel.controllerInstance);\n                });       \n                boundItem.render(controllers);\n            }\n        }\n    }\n\n    //处理绑定的attribute\n    private dealWithAttribute: Function = function (element, tagName) {\n        let attr = element.getAttribute(\"uku-\" + tagName);\n        //let elementName = element.tagName;\n        let controllerModels = this.defMgr.getControllerModelByName(attr);\n        if (controllerModels && controllerModels.length > 0) {\n            let boundItem = BoundItemAttributeFactory.getInstance().generateInstance(attr, tagName, element, this.uku);\n            let controllers = [];\n            controllerModels.forEach(controllerModel => {\n                controllerModel.addBoundItem(boundItem);\n                elementChangedBinder(element, tagName, controllerModel, this.uku.refresh, this.uku);\n                controllers.push(controllerModel.controllerInstance)\n            });           \n            boundItem.render(controllers);\n            \n        }\n    }\n\n    //处理 uku-text\n    private dealWithInnerText(element) {\n        let attr = element.getAttribute(\"uku-text\");\n        if (attr) {\n            let controllerModels = this.defMgr.getControllerModelByName(attr);\n            if (controllerModels && controllerModels.length > 0) {\n                let boundItem = new BoundItemInnerText(attr, element, this.uku);\n                let controllers = [];\n                controllerModels.forEach(controllerModel => {\n                    controllerModel.addBoundItem(boundItem);\n                    controllers.push(controllerModel.controllerInstance);\n                });\n                boundItem.render(controllers);\n            }\n        }\n    }\n\n\n    //处理 事件 event\n    private dealWithEvent(element, eventName) {\n        let expression = element.getAttribute(\"uku-\" + eventName);\n        let eventNameInListener = eventName.substring(2);\n        eventNameInListener = eventNameInListener.toLowerCase();\n        let controllerModels = this.defMgr.getControllerModelByName(expression);\n        if(!controllerModels || controllerModels.length === 0){\n            controllerModels = [];\n        }    \n        EventListener.addEventListener(element, eventNameInListener, (event) => {\n            let alias_list = [];\n            controllerModels.forEach(controllerModel => {\n                this.defMgr.copyControllerInstance(controllerModel.controllerInstance, controllerModels.alias);\n                alias_list.push(controllerModel.alias);\n            });\n            \n            let index = UkuleleUtil.searchUkuFuncArg(expression);\n            if(index === -1){\n                // is an expression, not a function\n                let handler = new Function(\"event\",\"return \" + expression);\n                console.log(handler.toString());\n                handler(event);\n            }else{\n                // is a function\n                let i = expression.search(/\\(/);\n                let arg = 'event';\n                if(expression[i+1] !== ')'){\n                    // has argument\n                    arg = 'event,'\n                }\n                let arr = expression.split('(');\n                arr[1] = arg + arr[1];\n                let new_expression = arr.join(\"(\");\n                (function(e){\n                    let tempScope = {};\n                    tempScope['event'] = e;\n                    eval(new_expression);\n                    tempScope = null;\n                })(event);\n            }\n            this.uku.refresh(alias_list, element);\n        });\n    }\n    //处理 repeat\n    private dealWithRepeat(element) {\n        let repeatExpression = element.getAttribute(\"uku-repeat\");\n        let tempArr = repeatExpression.split(' in ');\n        let itemName = tempArr[0];\n        let attr = tempArr[1];\n        let controllerModels = this.defMgr.getControllerModelByName(attr);\n        if (controllerModels && controllerModels.length > 0) {\n            let controllers = [];\n            //let controllerInst = controllerModel.controllerInstance;\n            let boundItem = new BoundItemRepeat(attr, itemName, element, this.uku);\n            controllerModels.forEach(controllerModel => {\n                controllerModel.addBoundItem(boundItem);\n                controllers.push(controllerModel.controllerInstance);\n            });          \n            boundItem.render(controllers);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/Analyzer.ts","import {BountItemAttrSelected} from \"../model/directive/BoundItemAttrSelected\";\nimport {BoundItemAttrDataItem} from \"../model/directive/BoundItemAttrDataItem\";\nimport {BoundItemAttrSrc} from \"../model/directive/BoundItemAttrSrc\";\nimport {BoundItemAttrDisabled} from \"../model/directive/BoundItemAttrDisabled\";\nimport {BoundItemAttrRender} from \"../model/directive/BoundItemAttrRender\";\nimport {BoundItemAttrStyle} from \"../model/directive/BoundItemAttrStyle\";\nimport {BoundItemAttrValue} from \"../model/directive/BoundItemAttrValue\";\nimport {BoundItemAttrVisible} from \"../model/directive/BoundItemAttrVisible\";\nimport {BoundItemAttribute} from \"../model/BoundItemAttribute\";\nexport class BoundItemAttributeFactory{\n    private static _instance = new BoundItemAttributeFactory();\n    constructor(){\n        if(BoundItemAttributeFactory._instance){\n            throw new Error(\"Error: Instantiation failed: Use BoundItemAttributeFactory.getInstance() instead of new.\"); \n        }\n        BoundItemAttributeFactory._instance = this;\n\n    }\n    static getInstance():BoundItemAttributeFactory{\n        return BoundItemAttributeFactory._instance;\n    }\n    generateInstance(attr, tagName, element, uku){\n        let instance;\n        switch (tagName) {\n            case \"selected\":\n                instance = new BountItemAttrSelected(attr, tagName, element, uku);\n                break;\n            case \"data-item\":\n                instance = new BoundItemAttrDataItem(attr, tagName, element, uku);\n                break;\n            case \"src\":\n                instance = new BoundItemAttrSrc(attr, tagName, element, uku);\n                break;\n            case \"disabled\":\n                instance = new BoundItemAttrDisabled(attr, tagName, element, uku);\n                break;\n            case \"render\":\n                instance = new BoundItemAttrRender(attr, tagName, element, uku);\n                break;\n            case \"style\":\n                instance = new BoundItemAttrStyle(attr, tagName, element, uku);\n                break;\n            case \"value\":\n                instance = new BoundItemAttrValue(attr, tagName, element, uku);\n                break;\n            case \"visible\":\n                instance = new BoundItemAttrVisible(attr, tagName, element, uku);\n                break;\n            default:\n                instance = new BoundItemAttribute(attr, tagName, element, uku);\n        }\n        return instance;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/BoundItemAttributeFactory.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BountItemAttrSelected extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"selected\"){\n            throw new TypeError(\"it doesn't use uku-selected\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let key:string;\n        let elementName:string = this.element.tagName;\n        if(elementName === \"SELECT\"){\n            let tempArr:Array<string> = this.attributeName.split(\"|\");\n            attr = tempArr[0];\n            key = tempArr[1];\n            let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n            let value;\n        \tif(key){\n        \t\tvalue = finalValue[key];\n        \t}else{\n        \t\tvalue = finalValue;\n        \t}\n            (this.element as HTMLSelectElement).value = value;\n        }\n\n        if(elementName === \"INPUT\" && this.element.getAttribute(\"type\") === \"radio\"){\n            let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n            if((this.element as HTMLInputElement).value === finalValue){\n                (this.element as HTMLInputElement).setAttribute(\"checked\",\"true\");\n            }\n        } \n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrSelected.ts","import {BoundItemBase} from \"./BoundItemBase\";\nimport {UkuleleUtil} from \"../util/UkuleleUtil\";\n//import {SelectedDecorator} from \"./decorator/SelectedDecorator\";\nexport class BoundItemAttribute extends BoundItemBase{\n    ukuTag:string;\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        super(attrName,element,uku);\n        this.ukuTag = ukuTag;\n    }\n    \n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        this.element.setAttribute(this.ukuTag, finalValue);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/BoundItemAttribute.ts","import {IUkulele} from \"../core/IUkulele\";\nexport class BoundItemBase{\n    attributeName:string;\n    element:HTMLElement;\n    uku:IUkulele;\n    constructor(_attrName:string, _element:HTMLElement, _uku:IUkulele){\n        this.attributeName = _attrName;\n        this.element = _element;\n        this.uku = _uku;\n    }\n    render(controllers:Object[]):void{\n        \n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/BoundItemBase.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrDataItem extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"data-item\"){\n            throw new TypeError(\"it doesn't use uku-item\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        if(elementName === \"OPTION\"){\n        \tfinalValue = JSON.stringify(finalValue);\n            this.element.setAttribute('data-item',finalValue);\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrDataItem.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrSrc extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"src\"){\n            throw new TypeError(\"it doesn't use uku-src\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        if(elementName === \"IMG\"){\n    \t\tif(finalValue){\n                this.element.setAttribute(this.ukuTag,finalValue);\n            }\n    \t}else{\n            throw new Error(\"uku-src doesn't work with current dom\");\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrSrc.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrDisabled extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"disabled\"){\n            throw new TypeError(\"it doesn't use uku-disabled\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        (this.element as HTMLInputElement).disabled = finalValue;\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrDisabled.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrRender extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"render\"){\n            throw new TypeError(\"it doesn't use uku-render\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        if(finalValue){\n            let oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\n            if(oldDisplaySetting !== null){\n                this.element.style.display = oldDisplaySetting;\n            }\n        }else{\n            let oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\n            if(oldDisplaySetting === null){\n                oldDisplaySetting = this.element.style.display;\n                this.element.setAttribute(\"data-old-display\",oldDisplaySetting);\n            }\n            this.element.style.display = \"none\";\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrRender.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrStyle extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"style\"){\n            throw new TypeError(\"it doesn't use uku-style\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        for(let cssName in finalValue){\n            this.element.style[cssName] = finalValue[cssName];\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrStyle.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrValue extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"value\"){\n            throw new TypeError(\"it doesn't use uku-value\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        if(elementName === \"INPUT\" && this.element.getAttribute(\"type\") === \"checkbox\"){\n    \t\t(this.element as HTMLInputElement).checked = finalValue;\n    \t}\n    \telse{\n            (this.element as HTMLInputElement).value = finalValue;\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrValue.ts","import {BoundItemAttribute} from \"../BoundItemAttribute\";\nimport {UkuleleUtil} from \"../../util/UkuleleUtil\";\n\nexport class BoundItemAttrVisible extends BoundItemAttribute{\n    constructor(attrName:string, ukuTag:string, element:HTMLElement, uku:any){\n        if(ukuTag !== \"visible\"){\n            throw new TypeError(\"it doesn't use uku-visible\");\n        }\n        super(attrName,ukuTag,element,uku);\n    }\n    render(controllers):void{\n        let attr:string = this.attributeName;\n        let elementName:string = this.element.tagName;\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,attr);\n        if(finalValue){\n            this.element.style.visibility = \"visible\";\n        }else{\n            this.element.style.visibility = \"hidden\";\n        }\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/model/directive/BoundItemAttrVisible.ts","import {BoundItemBase} from \"./BoundItemBase\";\nimport {UkuleleUtil} from \"../util/UkuleleUtil\";\nimport {Selector} from \"../extend/Selector\";\nimport {IUkulele} from \"../core/IUkulele\";\nexport class BoundItemExpression extends BoundItemBase{\n    expression:string;\n    constructor(attrName:string, expression:string, element:HTMLElement, uku:IUkulele){\n        super(attrName,element,uku);\n        this.expression = expression;\n    }\n\n    render(controllers) :void{\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,this.attributeName);\n        Selector.directText(this.element,finalValue);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/BoundItemExpression.ts","import {BoundItemBase} from \"./BoundItemBase\";\nimport {UkuleleUtil} from \"../util/UkuleleUtil\";\nimport {IUkulele} from \"../core/IUkulele\";\nexport class BoundItemInnerText extends BoundItemBase{\n    tagName:string;\n    constructor(attrName:string, element:HTMLElement, uku:IUkulele){\n        super(attrName,element,uku);\n        this.tagName = 'text';\n    }\n\n    render(controllers):void {\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,this.attributeName);\n        this.element.innerHTML = finalValue;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/BoundItemInnerText.ts","import {BoundItemBase} from \"./BoundItemBase\";\nimport {UkuleleUtil} from \"../util/UkuleleUtil\";\nimport {IUkulele} from \"../core/IUkulele\";\n\nexport class BoundItemRepeat extends BoundItemBase{\n    expression:string;\n    renderTemplate:string;\n    parentElement:Node;\n    beginCommentString:string;\n    endCommentString:string;\n    constructor(attrName, itemName, element, uku){\n        super(attrName, element, uku);\n        this.expression = itemName;\n        this.renderTemplate = element.outerHTML;\n        this.parentElement = element.parentNode;\n        this.beginCommentString = undefined;\n        this.endCommentString = undefined;\n    }\n\n    render(controllers) {\n        let finalValue = UkuleleUtil.getFinalValue(this.uku, controllers, this.attributeName);\n        if (!finalValue) {\n            return;\n        }\n\n        let self = this;\n        if (this.element && this.element.parentNode) {\n            //create repeate begin comment\n            this.beginCommentString = \"begin uku-repeat: \" + this.expression + \" in \" + this.attributeName;\n            let beginComment = document.createComment(this.beginCommentString);\n            this.element.parentNode.insertBefore(beginComment, this.element);\n            //create repeate end comment\n            this.endCommentString = \"end uku-repeat: \" + this.expression + \" in \" + this.attributeName;\n            let endComment = document.createComment(this.endCommentString);\n            this.element.parentNode.insertBefore(endComment, this.element.nextSibling);\n            //remove definition dom\n            this.element.parentNode.removeChild(this.element);\n        }\n        let filter:NodeFilter = {acceptNode: function(node){\n            if (node.nodeValue === self.beginCommentString) {\n                return NodeFilter.FILTER_ACCEPT;\n            }\n            return NodeFilter.FILTER_SKIP;\n        }};\n        let safeFilter:any = filter.acceptNode;\n        safeFilter.acceptNode = filter.acceptNode;\n        let treeWalker = document.createTreeWalker(this.parentElement,\n            NodeFilter.SHOW_COMMENT,\n            safeFilter,\n            false);\n        \n        /*function filter(node:Node) :any{\n            if (node.nodeValue === self.beginCommentString) {\n                return (NodeFilter.FILTER_ACCEPT);\n            }\n            return (NodeFilter.FILTER_SKIP);\n        }*/\n\n        function generateTempContainer():HTMLElement{\n            let index = UkuleleUtil.searchHtmlTag(self.renderTemplate,\"tr\");\n            if(index === -1){\n                return document.createElement(\"div\");\n            }else{\n                return document.createElement(\"tbody\");\n            }\n        }\n\n        while (treeWalker.nextNode()) {\n            let commentNode = treeWalker.currentNode;\n            if (commentNode && commentNode.nodeValue === this.beginCommentString) {\n                //remove overtime dom.\n                while (commentNode.nextSibling && commentNode.nextSibling.nodeValue !== this.endCommentString) {\n                    commentNode.parentNode.removeChild(commentNode.nextSibling);\n                }\n                //create new dom\n                let tempDiv = generateTempContainer();\n                let blankDiv = generateTempContainer();\n                commentNode.parentNode.insertBefore(blankDiv, commentNode.nextSibling);\n                for (let i = 0; i < finalValue.length; i++) {\n                    tempDiv.insertAdjacentHTML('beforeEnd', this.renderTemplate);\n                    if (i === finalValue.length - 1) {\n                        let childrenHTML = tempDiv.innerHTML;\n                        blankDiv.insertAdjacentHTML('beforeBegin', childrenHTML);\n                        commentNode.parentNode.removeChild(blankDiv);\n                        tempDiv = null;\n                        blankDiv = null;\n                    }\n                }\n\n                let child:HTMLElement = commentNode.nextSibling as HTMLElement;\n                for (let j = 0; j < finalValue.length; j++) {\n                    child.removeAttribute(\"uku-repeat\");\n                    var Uku_Clazz = (<any>this.uku).constructor;\n                    let ukulele:IUkulele = new Uku_Clazz(); //new Ukulele();\n                    ukulele.parentUku = this.uku;\n                    let compDef = ukulele.parentUku._internal_getDefinitionManager().getComponentsDefinition();\n                    let compPool = ukulele.parentUku._internal_getDefinitionManager().getComponentsPool();\n                    ukulele._internal_getDefinitionManager().setComponentsDefinition(compDef);\n                    ukulele._internal_getDefinitionManager().setComponentsPool(compPool);\n                    let sibling:HTMLElement = child.nextSibling as HTMLElement;\n                    let itemType = typeof finalValue[j];\n                    if(itemType === \"object\"){\n                        ukulele.registerController(this.expression, finalValue[j]);\n                    }else {\n                        ukulele.registerController(this.expression, {'value':finalValue[j]});\n                        let newOuterHtml = child.outerHTML.replace(new RegExp(this.expression,\"gm\"),this.expression+'.value');\n                        child.insertAdjacentHTML('afterend',newOuterHtml);\n                        let newItemDom:HTMLElement = child.nextSibling as HTMLElement;\n                        child.parentNode.removeChild(child);\n                        child = newItemDom;\n                    }\n                    ukulele._internal_dealWithElement(child,(element)=>{\n                        if (this.element.tagName === \"OPTION\") {\n                            let expression = (this.parentElement as HTMLInputElement).getAttribute(\"uku-selected\");\n                            let tempArr = expression.split(\"|\");\n                            expression = tempArr[0];\n                            let key = tempArr[1];\n                            let value = this.uku._internal_getDefinitionManager().getFinalValueByExpression(expression);\n                            if (key) {\n                                (this.parentElement as HTMLInputElement).value = value[key];\n                            } else {\n                                (this.parentElement as HTMLInputElement).value = value;\n                            }\n                        }\n                    });\n                    child = sibling;\n                }\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/BoundItemRepeat.ts","import {BoundItemBase} from \"./BoundItemBase\";\nimport {UkuleleUtil} from \"../util/UkuleleUtil\";\nimport {IUkulele} from \"../core/IUkulele\";\nexport class BoundItemComponentAttribute extends BoundItemBase{\n    ukuTag:string;\n    componentController:any;\n    constructor(attrName:string, ukuTag:string, cc:any, uku:IUkulele){\n        super(attrName,null,uku);\n        this.ukuTag = ukuTag;\n        this.componentController = cc;\n    }\n    render(controllers) :void{\n        let finalValue = UkuleleUtil.getFinalValue(this.uku,controllers,this.attributeName);\n        this.componentController[this.ukuTag] = finalValue;\n        this.uku.refresh(this.componentController._alias);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/BoundItemComponentAttribute.ts","import {UkuleleUtil} from '../util/UkuleleUtil';\nimport {EventListener} from '../extend/EventListener';\nimport {Selector} from '../extend/Selector';\n\nfunction elementChangedBinder(element, tagName, controllerModel, handler, host) {\n    let elementStrategies = [inputTextCase, textareaCase, selectCase, checkboxCase, radioCase];\n    for (let i = 0; i < elementStrategies.length; i++) {\n        let func = elementStrategies[i];\n        let goon = func.apply(this, arguments);\n        if (goon) {\n            break;\n        }\n    }\n}\n\n\nfunction inputTextCase(element, tagName, controllerModel, handler, host) {\n    let elementName = element.tagName;\n    if (elementName === \"INPUT\" && isSupportInputType(element) && tagName === \"value\") {\n        let eventType = 'change';\n        let inputType = element.getAttribute('type');\n        if(inputType === \"text\"){\n            eventType = 'input';\n        }\n        EventListener.addEventListener(element,eventType,(e)=>{\n            let attr = element.getAttribute(\"uku-\" + tagName);\n            attr = UkuleleUtil.getFinalAttribute(attr);\n            let temp = attr.split(\".\");\n            let finalInstance = controllerModel.controllerInstance;\n            for (let i = 0; i < temp.length - 1; i++) {\n                finalInstance = finalInstance[temp[i]];\n            }\n            finalInstance[temp[temp.length - 1]] = element.value;\n            if (handler) {\n                handler.call(host,controllerModel.alias, element);\n            }\n        });\n        return true;\n    }\n    return false;\n}\n\nfunction isSupportInputType(element) {\n    let type = element.getAttribute(\"type\");\n    if (type !== \"checkbox\" && type !== \"radio\") {\n        return true;\n    }\n    return false;\n}\n\nfunction textareaCase(element, tagName, controllerModel, handler, host) {\n    let elementName = element.tagName;\n    if (elementName === \"TEXTAREA\" && tagName === \"value\") {\n        EventListener.addEventListener(element,'input',function(e){\n            let attr = element.getAttribute(\"uku-\" + tagName);\n            attr = UkuleleUtil.getFinalAttribute(attr);\n            let temp = attr.split(\".\");\n            let finalInstance = controllerModel.controllerInstance;\n            for (let i = 0; i < temp.length - 1; i++) {\n                finalInstance = finalInstance[temp[i]];\n            }\n            finalInstance[temp[temp.length - 1]] = element.value;\n            if (handler) {\n                handler.call(host,controllerModel.alias, element);\n            }\n        });\n        return true;\n    }\n    return false;\n}\n\nfunction selectCase(element, tagName, controllerModel, handler, host) {\n    let elementName = element.tagName;\n    if ((elementName === \"SELECT\" && tagName === \"selected\")) {\n        EventListener.addEventListener(element,'change',function(e){\n            let attr = element.getAttribute(\"uku-\" + tagName);\n            let key;\n            let tmpArr = attr.split(\"|\");\n            attr = tmpArr[0];\n            key = tmpArr[1];\n            attr = UkuleleUtil.getFinalAttribute(attr);\n            let temp = attr.split(\".\");\n            let finalInstance = controllerModel.controllerInstance;\n            for (let i = 0; i < temp.length - 1; i++) {\n                finalInstance = finalInstance[temp[i]];\n            }\n\n            let options = Selector.querySelectorAll(element,\"option\");\n            for (let j = 0; j < options.length; j++) {\n                let option:HTMLOptionElement = options[j] as HTMLOptionElement;\n                if (option.selected) {\n                    let selectedItem = JSON.parse(option.getAttribute(\"data-item\"));\n                    finalInstance[temp[temp.length - 1]] = selectedItem;\n                }\n            }\n            if (handler) {\n                handler.call(host,controllerModel.alias, element);\n            }\n        });\n        return true;\n    }\n    return false;\n}\n\nfunction checkboxCase(element, tagName, controllerModel, handler, host) {\n    let elementName = element.tagName;\n\n    if (elementName === \"INPUT\" && tagName === \"value\" && element.getAttribute(\"type\") === \"checkbox\") {\n        EventListener.addEventListener(element,'change',function(e){\n            let attr = element.getAttribute(\"uku-\" + tagName);\n            attr = UkuleleUtil.getFinalAttribute(attr);\n            let temp = attr.split(\".\");\n            let finalInstance = controllerModel.controllerInstance;\n            for (let i = 0; i < temp.length - 1; i++) {\n                finalInstance = finalInstance[temp[i]];\n            }\n            finalInstance[temp[temp.length - 1]] = element.checked;\n            if (handler) {\n                handler.call(host,controllerModel.alias, element);\n            }\n        });\n        return true;\n    }\n    return false;\n}\n\nfunction radioCase(element, tagName, controllerModel, handler, host) {\n    let elementName = element.tagName;\n\n    if (elementName === \"INPUT\" && tagName === \"selected\" && element.getAttribute(\"type\") === \"radio\") {\n        EventListener.addEventListener(element,'change',function(e){\n            let attr = element.getAttribute(\"uku-\" + tagName);\n            attr = UkuleleUtil.getFinalAttribute(attr);\n            let temp = attr.split(\".\");\n            let finalInstance = controllerModel.controllerInstance;\n            for (let i = 0; i < temp.length - 1; i++) {\n                finalInstance = finalInstance[temp[i]];\n            }\n            if (element.checked) {\n                finalInstance[temp[temp.length - 1]] = element.value;\n                if (handler) {\n                    handler.call(host,controllerModel.alias, element);\n                }\n            }\n        });\n        return true;\n    }\n    return false;\n}\n\nexport {elementChangedBinder};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/ElementActionBinder.ts","export class EventListener{\n    static addEventListener(element:HTMLElement,eventType:string,handler:any):void{\n        if(window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== undefined){\n            return window['jQuery'](element).on(eventType,(e)=>{\n                handler && handler(e);\n            });\n        }else{\n            return element.addEventListener(eventType,handler);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/extend/EventListener.ts"],"sourceRoot":""}