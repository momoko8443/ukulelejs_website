{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///uku.js","webpack:///webpack/bootstrap 21e711c11c1f451c92d3","webpack:///./src/core/Ukulele.ts","webpack:///./src/core/EventEmitter.ts","webpack:///./src/util/AsyncCaller.ts","webpack:///./src/core/DefinitionManager.ts","webpack:///./src/util/ObjectUtil.ts","webpack:///./src/extend/Ajax.ts","webpack:///./src/model/ControllerModel.ts","webpack:///./src/model/ComponentModel.ts","webpack:///./src/model/ComponentPoolItem.ts","webpack:///./src/util/UkuleleUtil.ts","webpack:///./src/extend/Selector.ts","webpack:///./src/util/ArgumentUtil.ts","webpack:///./src/model/ComponentConfiguration.ts","webpack:///./src/core/DirtyChecker.ts","webpack:///./src/core/UkuEventType.ts","webpack:///./src/core/Event.ts","webpack:///./src/core/Analyzer.ts","webpack:///./src/model/BoundItemAttribute.ts","webpack:///./src/model/BoundItemBase.ts","webpack:///./src/model/BoundItemExpression.ts","webpack:///./src/model/BoundItemInnerText.ts","webpack:///./src/model/BoundItemRepeat.ts","webpack:///./src/model/BoundItemComponentAttribute.ts","webpack:///./src/core/ElementActionBinder.ts","webpack:///./src/extend/EventListener.ts"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__extends","d","b","__","constructor","hasOwnProperty","prototype","Object","create","EventEmitter_1","AsyncCaller_1","DefinitionManager_1","DirtyChecker_1","Analyzer_1","Selector_1","UkuEventType_1","Event_1","Ukulele","_super","apply","arguments","asyncCaller","AsyncCaller","init","_this","exec","manageApplication","handleElement","element","analyizeElement","e","dispatchEvent","Event","UkuEventType","HANDLE_ELEMENT_COMPLETED","registerController","instanceName","controllerInst","_internal_getDefinitionManager","addControllerDefinition","getController","getControllerDefinition","controllerInstance","registerComponent","tag","templateUrl","preload","addComponentDefinition","getComponent","tagName","getComponentController","componentId","getControllerInstByDomId","refresh","alias","excludeElement","dirtyChecker","DirtyChecker","runDirtyChecking","defMgr","DefinitionManager","_internal_dealWithElement","apps","Selector","querySelectorAll","document","length","Error","ele","INITIALIZED","callback","anylyzer","Analyzer","retFunc","addListener","ANALYIZE_COMPLETED","REFRESH","EventEmitter","eventsPool","getEventsPool","eventType","handler","push","removeListener","splice","hasListener","event","handlers","FunctionObject","_func","_argu","func","argu","allTasksPool","queueTasksPool","execType","errorMsg","Function","resolve","ac","aysncFunRunOver","pushAll","asyncFunc","arguArr","funcObj","console","error","pushQueue","caller","finalFunc","shift","task","executeAll","executeQueue","ObjectUtil_1","Ajax_1","ControllerModel_1","ComponentModel_1","ComponentPoolItem_1","UkuleleUtil_1","_uku","controllersDefinition","componentsDefinition","componentsPool","copyControllers","dependentScriptsCache","ajax","Ajax","uku","getComponentsDefinition","getComponentsPool","setComponentsPool","pool","setComponentsDefinition","value","getComponentDefinition","getControllersDefinition","getCopyControllers","copyAllController","controllerModel","controller","copyControllerInstance","previousCtrlInst","ObjectUtil","deepClone","ControllerModel","_alias","domId","_dom","dealWithComponentConfig","template","get","result","componentConfig","UkuleleUtil","getComponentConfiguration","analyizeComponent","ComponentPoolItem","addLazyComponentDefinition","lazy","getBoundAttributeValue","attr","additionalArgu","_i","getBoundControllerModelByName","parameters","concat","getFinalValue","getControllerModelByName","expression","getFinalValueByExpression","attrName","getBoundModelInstantName","tempArr","split","isParentScope","parentUku","join","config","loadDependentScript","src","self","head","getElementsByTagName","script","createElement","type","charset","async","onload","target","appendChild","deps","dependentScripts","tmpAMD_1","window","undefined","dep","buildeComponentModel","componentControllerScript","stylesheet","style","dealWithShadowStyle","styleArray","newArray","forEach","index","newValue","replace","innerHTML","debugComment","controllerClazz","eval","newComp","ComponentModel","isArray","obj","toString","getType","compare","objA","objB","typeB","key","valuA","valuB","isEqual","itemA","itemB","isEqual2","o","j","url","success","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","open","send","ctrlInst","boundItems","addBoundItem","boundItem","getBoundItemsByName","name","tempBoundItems","attributeName","clazz","_tagName","_templateUrl","_lazy","ArgumentUtil_1","ComponentConfiguration_1","ValueAndParent","_value","_parant","parent","getFinalAttribute","temp","isParent","searchHtmlTag","htmlString","reTemp","re","RegExp","search","getInnerHtml","match","matchString","tempString","substr","index2","lastIndexOf","substring","log","tempDom","tpl","scripts","ccs","ComponentConfiguration","searchUkuAttrTag","getAttrFromUkuTag","ukuTag","camelCase","names","firstLetter","charAt","toUpperCase","searchUkuExpTag","searchUkuFuncArg","isRepeat","getAttribute","isInRepeat","parents","parent_1","nodeType","controlInstName","getAttributeFinalValue","object","valueObject","getAttributeFinalValueAndParent","parentValue","finalValue","attrValue","property","functionName","finalValueObject","new_arguments","_argumentsString","_arguments","ArgumentUtil","analyze","argument","argType","agrumentInst","additionalArguArray","Array","slice","query","find","fuzzyFind","text","attributes","nodeName","directText","nodes","childNodes","node","nodeValue","trim","parentNode","argumentString","arr","jsonArr","JSON","parse","_template","_dependentScripts","_componentControllerScript","_stylesheet","ctrlAliasName","watchController","previousCtrlModel","changedElementCount","previousFinalValue","changedBoundItems","changedBoundItem","render","_eventType","_element","BoundItemAttribute_1","BoundItemExpression_1","BoundItemInnerText_1","BoundItemRepeat_1","BoundItemComponentAttribute_1","ElementActionBinder_1","EventListener_1","dealWithAttribute","BoundItemAttribute","elementChangedBinder","searchComponent","subElements","isSelfHasUkuTag","allChildren","child","matchElement","searchExpression","n","subElement","orderAttrs","sortAttributes","attribute","dealWithEvent","dealWithRepeat","dealWithInnerText","unshift","comp","localName","attrs","compDef","dealWithComponent","compElement","children","ac_1","bind","Clazz","randomAlias","Math","floor","random","tempFragment","insertAdjacentHTML","outerHTML","htmlDom","previousElementSibling","classList","add","cc","fire","data","bubbles","cancelable","toLowerCase","setAttribute","BoundItemComponentAttribute","removeChild","ac_2","_initialized","dealWithExpression","BoundItemExpression","BoundItemInnerText","eventName","eventNameInListener","alias_1","controller_1","temArr","EventListener","addEventListener","repeatExpression","itemName","BoundItemRepeat","BoundItemBase_1","elementName","stringify","checked","cssName","visibility","oldDisplaySetting","display","disabled","BoundItemBase","_attrName","renderTemplate","parentElement","beginCommentString","endCommentString","generateTempContainer","beginComment","createComment","insertBefore","endComment","nextSibling","treeWalker","createTreeWalker","NodeFilter","SHOW_COMMENT","acceptNode","FILTER_ACCEPT","FILTER_SKIP","nextNode","commentNode","currentNode","tempDiv","blankDiv","childrenHTML","removeAttribute","Uku_Clazz","ukulele","compPool","sibling","itemType","newOuterHtml","newItemDom","componentController","host","elementStrategies","inputTextCase","textareaCase","selectCase","checkboxCase","radioCase","goon","isSupportInputType","inputType","finalInstance","tmpArr","options","option","selected","selectedItem","on"],"mappings":"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","file":"uku.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar EventEmitter_1 = __webpack_require__(1);\r\n\tvar AsyncCaller_1 = __webpack_require__(2);\r\n\tvar DefinitionManager_1 = __webpack_require__(3);\r\n\tvar DirtyChecker_1 = __webpack_require__(13);\r\n\tvar Analyzer_1 = __webpack_require__(16);\r\n\tvar Selector_1 = __webpack_require__(10);\r\n\tvar UkuEventType_1 = __webpack_require__(14);\r\n\tvar Event_1 = __webpack_require__(15);\r\n\tvar Ukulele = (function (_super) {\r\n\t    __extends(Ukulele, _super);\r\n\t    function Ukulele() {\r\n\t        _super.apply(this, arguments);\r\n\t        this.asyncCaller = new AsyncCaller_1.AsyncCaller();\r\n\t    }\r\n\t    Ukulele.prototype.init = function () {\r\n\t        var _this = this;\r\n\t        this.asyncCaller.exec(function () {\r\n\t            _this.manageApplication();\r\n\t        });\r\n\t    };\r\n\t    Ukulele.prototype.handleElement = function (element) {\r\n\t        var _this = this;\r\n\t        this.analyizeElement(element, function (e) {\r\n\t            _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.HANDLE_ELEMENT_COMPLETED, e));\r\n\t        });\r\n\t    };\r\n\t    Ukulele.prototype.registerController = function (instanceName, controllerInst) {\r\n\t        this._internal_getDefinitionManager().addControllerDefinition(instanceName, controllerInst);\r\n\t    };\r\n\t    Ukulele.prototype.getController = function (instanceName) {\r\n\t        return this._internal_getDefinitionManager().getControllerDefinition(instanceName).controllerInstance;\r\n\t    };\r\n\t    Ukulele.prototype.registerComponent = function (tag, templateUrl, preload) {\r\n\t        this._internal_getDefinitionManager().addComponentDefinition(tag, templateUrl, preload, this.asyncCaller);\r\n\t    };\r\n\t    Ukulele.prototype.getComponent = function (tagName) {\r\n\t        return this._internal_getDefinitionManager().getComponent(tagName);\r\n\t    };\r\n\t    Ukulele.prototype.getComponentController = function (componentId) {\r\n\t        return this._internal_getDefinitionManager().getControllerInstByDomId(componentId);\r\n\t    };\r\n\t    Ukulele.prototype.refresh = function (alias, excludeElement) {\r\n\t        if (!this.dirtyChecker) {\r\n\t            this.dirtyChecker = new DirtyChecker_1.DirtyChecker(this);\r\n\t        }\r\n\t        this.dirtyChecker.runDirtyChecking(alias, excludeElement);\r\n\t    };\r\n\t    //internal function\r\n\t    Ukulele.prototype._internal_getDefinitionManager = function () {\r\n\t        if (!this.defMgr) {\r\n\t            this.defMgr = new DefinitionManager_1.DefinitionManager(this);\r\n\t        }\r\n\t        return this.defMgr;\r\n\t    };\r\n\t    Ukulele.prototype._internal_dealWithElement = function (element) {\r\n\t        this.analyizeElement(element);\r\n\t    };\r\n\t    Ukulele.prototype.manageApplication = function () {\r\n\t        var _this = this;\r\n\t        var apps = Selector_1.Selector.querySelectorAll(document, \"[uku-application]\");\r\n\t        if (apps.length === 1) {\r\n\t            this.analyizeElement(apps[0], function (ele) {\r\n\t                _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.INITIALIZED, ele));\r\n\t            });\r\n\t        }\r\n\t        else {\r\n\t            throw new Error(\"Only one 'uku-application' can be declared in a whole html.\");\r\n\t        }\r\n\t    };\r\n\t    Ukulele.prototype.analyizeElement = function (element, callback) {\r\n\t        var anylyzer = new Analyzer_1.Analyzer(this);\r\n\t        // if(callback){\r\n\t        // \tanylyzer.addListener(Analyzer.ANALYIZE_COMPLETED,(e)=>{\r\n\t        // \t\tcallback(e.element);\r\n\t        // \t});\r\n\t        // }\r\n\t        if (callback) {\r\n\t            (function (retFunc) {\r\n\t                anylyzer.addListener(Analyzer_1.Analyzer.ANALYIZE_COMPLETED, function (e) {\r\n\t                    retFunc(e.element);\r\n\t                });\r\n\t            })(callback);\r\n\t        }\r\n\t        anylyzer.analyizeElement(element);\r\n\t    };\r\n\t    Ukulele.INITIALIZED = 'initialized';\r\n\t    Ukulele.REFRESH = 'refresh';\r\n\t    Ukulele.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\r\n\t    return Ukulele;\r\n\t}(EventEmitter_1.EventEmitter));\r\n\texports.Ukulele = Ukulele;\r\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar EventEmitter = (function () {\r\n\t    function EventEmitter() {\r\n\t        this.eventsPool = {};\r\n\t    }\r\n\t    EventEmitter.prototype.getEventsPool = function () {\r\n\t        return this.eventsPool;\r\n\t    };\r\n\t    EventEmitter.prototype.addListener = function (eventType, handler) {\r\n\t        if (!this.eventsPool[eventType]) {\r\n\t            this.eventsPool[eventType] = [];\r\n\t        }\r\n\t        this.eventsPool[eventType].push(handler);\r\n\t    };\r\n\t    EventEmitter.prototype.removeListener = function (eventType, handler) {\r\n\t        if (this.eventsPool[eventType]) {\r\n\t            for (var i = this.eventsPool[eventType].length - 1; i >= 0; i--) {\r\n\t                if (this.eventsPool[eventType][i] === handler) {\r\n\t                    this.eventsPool[eventType].splice(i, 1);\r\n\t                    break;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    EventEmitter.prototype.hasListener = function (eventType) {\r\n\t        if (this.eventsPool[eventType] && this.eventsPool[eventType].length > 0) {\r\n\t            return true;\r\n\t        }\r\n\t        return false;\r\n\t    };\r\n\t    EventEmitter.prototype.dispatchEvent = function (event) {\r\n\t        if (event && event.eventType) {\r\n\t            var handlers = this.eventsPool[event.eventType];\r\n\t            if (handlers) {\r\n\t                for (var i = 0; i < handlers.length; i++) {\r\n\t                    handlers[i].call(this, event);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return EventEmitter;\r\n\t}());\r\n\texports.EventEmitter = EventEmitter;\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar FunctionObject = (function () {\r\n\t    function FunctionObject(_func, _argu) {\r\n\t        this.func = _func;\r\n\t        this.argu = _argu;\r\n\t    }\r\n\t    return FunctionObject;\r\n\t}());\r\n\tvar AsyncCaller = (function () {\r\n\t    function AsyncCaller() {\r\n\t        this.allTasksPool = [];\r\n\t        this.queueTasksPool = [];\r\n\t        this.execType = \"queue\";\r\n\t        this.errorMsg = \"Only one type of task can be executed at same time\";\r\n\t        Function.prototype.resolve = function (ac) {\r\n\t            ac.aysncFunRunOver.call(ac, this);\r\n\t        };\r\n\t    }\r\n\t    AsyncCaller.prototype.pushAll = function (asyncFunc, arguArr) {\r\n\t        if (this.queueTasksPool.length === 0) {\r\n\t            var funcObj = new FunctionObject(asyncFunc, arguArr);\r\n\t            this.allTasksPool.push(funcObj);\r\n\t        }\r\n\t        else {\r\n\t            console.error(this.errorMsg);\r\n\t        }\r\n\t        return this;\r\n\t    };\r\n\t    AsyncCaller.prototype.pushQueue = function (asyncFunc, arguArr) {\r\n\t        if (this.allTasksPool.length === 0) {\r\n\t            var funcObj = new FunctionObject(asyncFunc, arguArr);\r\n\t            this.queueTasksPool.push(funcObj);\r\n\t        }\r\n\t        else {\r\n\t            console.error(this.errorMsg);\r\n\t        }\r\n\t        return this;\r\n\t    };\r\n\t    AsyncCaller.prototype.aysncFunRunOver = function (caller) {\r\n\t        if (this.execType === \"queue\") {\r\n\t            if (this.queueTasksPool.length === 0) {\r\n\t                this.finalFunc && this.finalFunc();\r\n\t            }\r\n\t            else {\r\n\t                var funcObj = this.queueTasksPool[0];\r\n\t                this.queueTasksPool.shift();\r\n\t                funcObj.func.apply(funcObj, funcObj.argu);\r\n\t            }\r\n\t        }\r\n\t        else if (this.execType === \"all\") {\r\n\t            for (var i = 0; i < this.allTasksPool.length; i++) {\r\n\t                var task = this.allTasksPool[i];\r\n\t                if (caller === task.func) {\r\n\t                    this.allTasksPool.splice(i, 1);\r\n\t                    break;\r\n\t                }\r\n\t            }\r\n\t            if (this.allTasksPool.length === 0) {\r\n\t                this.finalFunc && this.finalFunc();\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    AsyncCaller.prototype.exec = function (callback) {\r\n\t        this.finalFunc = callback;\r\n\t        if (this.allTasksPool.length > 0) {\r\n\t            this.execType = \"all\";\r\n\t            this.executeAll();\r\n\t        }\r\n\t        else if (this.queueTasksPool.length > 0) {\r\n\t            this.execType = \"queue\";\r\n\t            this.executeQueue();\r\n\t        }\r\n\t        else {\r\n\t            this.finalFunc && this.finalFunc();\r\n\t        }\r\n\t    };\r\n\t    AsyncCaller.prototype.executeQueue = function () {\r\n\t        var funcObj = this.queueTasksPool[0];\r\n\t        this.queueTasksPool.shift();\r\n\t        funcObj.func.apply(funcObj, funcObj.argu);\r\n\t    };\r\n\t    ;\r\n\t    AsyncCaller.prototype.executeAll = function () {\r\n\t        for (var i = 0; i < this.allTasksPool.length; i++) {\r\n\t            var funcObj = this.allTasksPool[i];\r\n\t            funcObj.func.apply(funcObj, funcObj.argu);\r\n\t        }\r\n\t    };\r\n\t    ;\r\n\t    return AsyncCaller;\r\n\t}());\r\n\texports.AsyncCaller = AsyncCaller;\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar ObjectUtil_1 = __webpack_require__(4);\r\n\tvar Ajax_1 = __webpack_require__(5);\r\n\tvar ControllerModel_1 = __webpack_require__(6);\r\n\tvar AsyncCaller_1 = __webpack_require__(2);\r\n\tvar ComponentModel_1 = __webpack_require__(7);\r\n\tvar ComponentPoolItem_1 = __webpack_require__(8);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar DefinitionManager = (function () {\r\n\t    function DefinitionManager(_uku) {\r\n\t        this.controllersDefinition = {};\r\n\t        this.componentsDefinition = {};\r\n\t        this.componentsPool = {};\r\n\t        this.copyControllers = {};\r\n\t        this.dependentScriptsCache = {};\r\n\t        this.ajax = new Ajax_1.Ajax();\r\n\t        this.uku = _uku;\r\n\t    }\r\n\t    DefinitionManager.prototype.getComponentsDefinition = function () {\r\n\t        return this.componentsDefinition;\r\n\t    };\r\n\t    DefinitionManager.prototype.getComponentsPool = function () {\r\n\t        return this.componentsPool;\r\n\t    };\r\n\t    DefinitionManager.prototype.setComponentsPool = function (pool) {\r\n\t        this.componentsPool = pool;\r\n\t    };\r\n\t    DefinitionManager.prototype.setComponentsDefinition = function (value) {\r\n\t        this.componentsDefinition = value;\r\n\t    };\r\n\t    DefinitionManager.prototype.getComponentDefinition = function (tagName) {\r\n\t        return this.componentsDefinition[tagName];\r\n\t    };\r\n\t    DefinitionManager.prototype.getControllerDefinition = function (instanceName) {\r\n\t        return this.controllersDefinition[instanceName];\r\n\t    };\r\n\t    DefinitionManager.prototype.getControllersDefinition = function () {\r\n\t        return this.controllersDefinition;\r\n\t    };\r\n\t    DefinitionManager.prototype.getComponent = function (tagName) {\r\n\t        return this.componentsPool[tagName];\r\n\t    };\r\n\t    DefinitionManager.prototype.getCopyControllers = function () {\r\n\t        return this.copyControllers;\r\n\t    };\r\n\t    DefinitionManager.prototype.copyAllController = function () {\r\n\t        for (var alias in this.controllersDefinition) {\r\n\t            var controllerModel = this.controllersDefinition[alias];\r\n\t            var controller = controllerModel.controllerInstance;\r\n\t            this.copyControllerInstance(controller, alias);\r\n\t        }\r\n\t    };\r\n\t    DefinitionManager.prototype.copyControllerInstance = function (controller, alias) {\r\n\t        var previousCtrlInst = ObjectUtil_1.ObjectUtil.deepClone(controller);\r\n\t        delete this.copyControllers[alias];\r\n\t        this.copyControllers[alias] = previousCtrlInst;\r\n\t    };\r\n\t    DefinitionManager.prototype.addControllerDefinition = function (instanceName, controllerInst) {\r\n\t        var controllerModel = new ControllerModel_1.ControllerModel(instanceName, controllerInst);\r\n\t        controllerInst._alias = instanceName;\r\n\t        this.controllersDefinition[instanceName] = controllerModel;\r\n\t    };\r\n\t    DefinitionManager.prototype.getControllerInstByDomId = function (domId) {\r\n\t        for (var alias in this.controllersDefinition) {\r\n\t            var controllerModel = this.controllersDefinition[alias];\r\n\t            var controller = controllerModel.controllerInstance;\r\n\t            if (controller._dom && controller._dom.id === domId) {\r\n\t                return controller;\r\n\t            }\r\n\t        }\r\n\t        return undefined;\r\n\t    };\r\n\t    DefinitionManager.prototype.addComponentDefinition = function (tag, templateUrl, preload, asyncCaller) {\r\n\t        var _this = this;\r\n\t        if (!preload) {\r\n\t            this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, true);\r\n\t        }\r\n\t        else {\r\n\t            this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, false);\r\n\t            ;\r\n\t            asyncCaller.pushAll(dealWithComponentConfig, [tag, templateUrl]);\r\n\t        }\r\n\t        function dealWithComponentConfig(tag, template) {\r\n\t            _this.ajax.get(templateUrl, function (result) {\r\n\t                var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\r\n\t                _this.analyizeComponent(tag, componentConfig, function () {\r\n\t                    dealWithComponentConfig.resolve(asyncCaller);\r\n\t                });\r\n\t            });\r\n\t        }\r\n\t    };\r\n\t    DefinitionManager.prototype.addLazyComponentDefinition = function (tag, templateUrl, callback) {\r\n\t        var _this = this;\r\n\t        this.ajax.get(templateUrl, function (result) {\r\n\t            var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\r\n\t            _this.analyizeComponent(tag, componentConfig, function () {\r\n\t                _this.componentsPool[tag] = { 'tagName': tag, 'templateUrl': templateUrl, 'lazy': false };\r\n\t                callback();\r\n\t            });\r\n\t        });\r\n\t    };\r\n\t    DefinitionManager.prototype.getBoundAttributeValue = function (attr) {\r\n\t        var additionalArgu = [];\r\n\t        for (var _i = 1; _i < arguments.length; _i++) {\r\n\t            additionalArgu[_i - 1] = arguments[_i];\r\n\t        }\r\n\t        var controllerModel = this.getBoundControllerModelByName(attr);\r\n\t        var controllerInst = controllerModel.controllerInstance;\r\n\t        //let result = UkuleleUtil.getFinalValue(this.uku, controllerInst, attr, additionalArgu);\r\n\t        var parameters = [this.uku, controllerInst, attr];\r\n\t        parameters = parameters.concat(additionalArgu);\r\n\t        var result = UkuleleUtil_1.UkuleleUtil.getFinalValue.apply(null, parameters);\r\n\t        return result;\r\n\t    };\r\n\t    ;\r\n\t    DefinitionManager.prototype.getControllerModelByName = function (expression) {\r\n\t        return this.getBoundControllerModelByName(expression);\r\n\t    };\r\n\t    ;\r\n\t    DefinitionManager.prototype.getFinalValueByExpression = function (expression) {\r\n\t        var controller = this.getControllerModelByName(expression).controllerInstance;\r\n\t        return UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, expression);\r\n\t    };\r\n\t    ;\r\n\t    DefinitionManager.prototype.getBoundControllerModelByName = function (attrName) {\r\n\t        var instanceName = UkuleleUtil_1.UkuleleUtil.getBoundModelInstantName(attrName);\r\n\t        var controllerModel = this.controllersDefinition[instanceName];\r\n\t        if (!controllerModel) {\r\n\t            var tempArr = attrName.split(\".\");\r\n\t            var isParentScope = tempArr[0];\r\n\t            if (isParentScope === \"parent\" && this.uku.parentUku) {\r\n\t                tempArr.shift();\r\n\t                attrName = tempArr.join(\".\");\r\n\t                return this.uku.parentUku._internal_getDefinitionManager().getControllerModelByName(attrName);\r\n\t            }\r\n\t        }\r\n\t        return controllerModel;\r\n\t    };\r\n\t    DefinitionManager.prototype.analyizeComponent = function (tag, config, callback) {\r\n\t        var _this = this;\r\n\t        var deps = config.dependentScripts;\r\n\t        var self = this;\r\n\t        if (deps && deps.length > 0) {\r\n\t            var ac = new AsyncCaller_1.AsyncCaller();\r\n\t            var tmpAMD_1;\r\n\t            if (typeof window['define'] === 'function' && window['define'].amd) {\r\n\t                tmpAMD_1 = window['define'];\r\n\t                window['define'] = undefined;\r\n\t            }\r\n\t            for (var i = 0; i < deps.length; i++) {\r\n\t                var dep = deps[i];\r\n\t                ac.pushAll(loadDependentScript, [ac, dep]);\r\n\t            }\r\n\t            ac.exec(function () {\r\n\t                if (tmpAMD_1) {\r\n\t                    window['define'] = tmpAMD_1;\r\n\t                }\r\n\t                _this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\r\n\t                callback();\r\n\t            });\r\n\t        }\r\n\t        else {\r\n\t            this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\r\n\t            callback();\r\n\t        }\r\n\t        function loadDependentScript(ac, src) {\r\n\t            if (!self.dependentScriptsCache[src]) {\r\n\t                var head = document.getElementsByTagName('HEAD')[0];\r\n\t                var script = document.createElement('script');\r\n\t                script.type = 'text/javascript';\r\n\t                script.charset = 'utf-8';\r\n\t                script.async = true;\r\n\t                script.src = src;\r\n\t                script.onload = function (e) {\r\n\t                    self.dependentScriptsCache[e.target['src']] = true;\r\n\t                    loadDependentScript.resolve(ac);\r\n\t                };\r\n\t                head.appendChild(script);\r\n\t            }\r\n\t            else {\r\n\t                loadDependentScript.resolve(ac);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    DefinitionManager.prototype.buildeComponentModel = function (tag, template, script, style) {\r\n\t        var debugComment = \"//# sourceURL=\" + tag + \".js\";\r\n\t        try {\r\n\t            var controllerClazz = void 0;\r\n\t            if (script) {\r\n\t                script += debugComment;\r\n\t                controllerClazz = eval(script);\r\n\t            }\r\n\t            var newComp = new ComponentModel_1.ComponentModel(tag, template, controllerClazz);\r\n\t            this.componentsDefinition[tag] = newComp;\r\n\t            if (style) {\r\n\t                dealWithShadowStyle(tag, style);\r\n\t            }\r\n\t        }\r\n\t        catch (e) {\r\n\t            console.error(e);\r\n\t        }\r\n\t        function dealWithShadowStyle(tagName, stylesheet) {\r\n\t            var head = document.getElementsByTagName('HEAD')[0];\r\n\t            var style = document.createElement('style');\r\n\t            style.type = 'text/css';\r\n\t            var styleArray = stylesheet.split(\"}\");\r\n\t            var newArray = [];\r\n\t            styleArray.forEach(function (value, index) {\r\n\t                var newValue = value.replace(/^\\s*/, \"\");\r\n\t                if (newValue) {\r\n\t                    newArray.push(newValue);\r\n\t                }\r\n\t            });\r\n\t            stylesheet = newArray.join(\"}\\n\" + \".\" + tagName + \" \");\r\n\t            stylesheet = \".\" + tagName + \" \" + stylesheet + \"}\";\r\n\t            style.innerHTML = stylesheet;\r\n\t            head.appendChild(style);\r\n\t        }\r\n\t    };\r\n\t    return DefinitionManager;\r\n\t}());\r\n\texports.DefinitionManager = DefinitionManager;\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ObjectUtil = (function () {\r\n\t    function ObjectUtil() {\r\n\t    }\r\n\t    ObjectUtil.isArray = function (obj) {\r\n\t        return Object.prototype.toString.call(obj) === '[object Array]';\r\n\t    };\r\n\t    ObjectUtil.getType = function (obj) {\r\n\t        var type = typeof (obj);\r\n\t        if (type === \"object\") {\r\n\t            if (ObjectUtil.isArray(obj)) {\r\n\t                return \"array\";\r\n\t            }\r\n\t            else {\r\n\t                return type;\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            return type;\r\n\t        }\r\n\t    };\r\n\t    ObjectUtil.compare = function (objA, objB) {\r\n\t        var type = ObjectUtil.getType(objA);\r\n\t        var typeB = ObjectUtil.getType(objB);\r\n\t        var result = true;\r\n\t        if (type !== typeB) {\r\n\t            return false;\r\n\t        }\r\n\t        else {\r\n\t            switch (type) {\r\n\t                case \"object\":\r\n\t                    for (var key in objA) {\r\n\t                        var valuA = objA[key];\r\n\t                        var valuB = objB[key];\r\n\t                        var isEqual = ObjectUtil.compare(valuA, valuB);\r\n\t                        if (!isEqual) {\r\n\t                            result = false;\r\n\t                            break;\r\n\t                        }\r\n\t                    }\r\n\t                    break;\r\n\t                case \"array\":\r\n\t                    if (objA.length === objB.length) {\r\n\t                        for (var i = 0; i < objA.length; i++) {\r\n\t                            var itemA = objA[i];\r\n\t                            var itemB = objB[i];\r\n\t                            var isEqual2 = ObjectUtil.compare(itemA, itemB);\r\n\t                            if (!isEqual2) {\r\n\t                                result = false;\r\n\t                                break;\r\n\t                            }\r\n\t                        }\r\n\t                    }\r\n\t                    else {\r\n\t                        result = false;\r\n\t                    }\r\n\t                    break;\r\n\t                case \"function\":\r\n\t                    result = objA.toString() === objB.toString();\r\n\t                    break;\r\n\t                default:\r\n\t                    result = objA === objB;\r\n\t                    break;\r\n\t            }\r\n\t        }\r\n\t        return result;\r\n\t    };\r\n\t    ObjectUtil.deepClone = function (obj) {\r\n\t        var o;\r\n\t        var i;\r\n\t        var j;\r\n\t        if (typeof (obj) !== \"object\" || obj === null) {\r\n\t            return obj;\r\n\t        }\r\n\t        if (obj instanceof (Array)) {\r\n\t            o = [];\r\n\t            i = 0;\r\n\t            j = obj.length;\r\n\t            for (; i < j; i++) {\r\n\t                if (typeof (obj[i]) === \"object\" && obj[i] !== null) {\r\n\t                    o[i] = ObjectUtil.deepClone(obj[i]);\r\n\t                }\r\n\t                else {\r\n\t                    o[i] = obj[i];\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            o = {};\r\n\t            for (i in obj) {\r\n\t                if (typeof (obj[i]) === \"object\" && obj[i] !== null && i !== \"_dom\") {\r\n\t                    o[i] = ObjectUtil.deepClone(obj[i]);\r\n\t                }\r\n\t                else {\r\n\t                    o[i] = obj[i];\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return o;\r\n\t    };\r\n\t    return ObjectUtil;\r\n\t}());\r\n\texports.ObjectUtil = ObjectUtil;\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Ajax = (function () {\r\n\t    function Ajax() {\r\n\t    }\r\n\t    Ajax.prototype.get = function (url, success, error) {\r\n\t        var request = new XMLHttpRequest();\r\n\t        request.onreadystatechange = function () {\r\n\t            if (request.readyState === 4) {\r\n\t                if (request.status === 200) {\r\n\t                    success(request.responseText);\r\n\t                }\r\n\t                else {\r\n\t                    if (error) {\r\n\t                        error();\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        };\r\n\t        request.open(\"GET\", url, true);\r\n\t        request.send(null);\r\n\t    };\r\n\t    return Ajax;\r\n\t}());\r\n\texports.Ajax = Ajax;\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ControllerModel = (function () {\r\n\t    function ControllerModel(alias, ctrlInst) {\r\n\t        this.alias = alias;\r\n\t        this.controllerInstance = ctrlInst;\r\n\t        this.boundItems = [];\r\n\t    }\r\n\t    ControllerModel.prototype.addBoundItem = function (boundItem) {\r\n\t        this.boundItems.push(boundItem);\r\n\t    };\r\n\t    ControllerModel.prototype.getBoundItemsByName = function (name) {\r\n\t        var tempBoundItems = [];\r\n\t        for (var i = 0; i < this.boundItems.length; i++) {\r\n\t            var boundItem = this.boundItems[i];\r\n\t            if (boundItem.attributeName === name) {\r\n\t                tempBoundItems.push(boundItem);\r\n\t            }\r\n\t        }\r\n\t        return tempBoundItems;\r\n\t    };\r\n\t    return ControllerModel;\r\n\t}());\r\n\texports.ControllerModel = ControllerModel;\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ComponentModel = (function () {\r\n\t    function ComponentModel(tagName, template, clazz) {\r\n\t        this.tagName = tagName;\r\n\t        this.template = template;\r\n\t        this.controllerClazz = clazz;\r\n\t    }\r\n\t    return ComponentModel;\r\n\t}());\r\n\texports.ComponentModel = ComponentModel;\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ComponentPoolItem = (function () {\r\n\t    function ComponentPoolItem(_tagName, _templateUrl, _lazy) {\r\n\t        this.tagName = _tagName;\r\n\t        this.templateUrl = _templateUrl;\r\n\t        this.lazy = _lazy;\r\n\t    }\r\n\t    return ComponentPoolItem;\r\n\t}());\r\n\texports.ComponentPoolItem = ComponentPoolItem;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar Selector_1 = __webpack_require__(10);\r\n\tvar ArgumentUtil_1 = __webpack_require__(11);\r\n\tvar ComponentConfiguration_1 = __webpack_require__(12);\r\n\tvar ValueAndParent = (function () {\r\n\t    function ValueAndParent(_value, _parant) {\r\n\t        this.value = _value;\r\n\t        this.parent = _parant;\r\n\t    }\r\n\t    return ValueAndParent;\r\n\t}());\r\n\tvar UkuleleUtil = (function () {\r\n\t    function UkuleleUtil() {\r\n\t    }\r\n\t    UkuleleUtil.getFinalAttribute = function (expression) {\r\n\t        var temp = expression.split(\".\");\r\n\t        var isParent = temp.shift();\r\n\t        if (isParent === \"parent\") {\r\n\t            return UkuleleUtil.getFinalAttribute(temp.join(\".\"));\r\n\t        }\r\n\t        return temp.join(\".\");\r\n\t    };\r\n\t    UkuleleUtil.searchHtmlTag = function (htmlString, tagName) {\r\n\t        var reTemp = \"^<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">$\";\r\n\t        var re = new RegExp(reTemp);\r\n\t        var index = htmlString.search(re);\r\n\t        return index;\r\n\t    };\r\n\t    UkuleleUtil.getInnerHtml = function (htmlString, tagName) {\r\n\t        var reTemp = \"<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">\";\r\n\t        var re = new RegExp(reTemp);\r\n\t        var match = htmlString.match(re);\r\n\t        if (match.index > -1) {\r\n\t            var matchString = match[0];\r\n\t            var index = matchString.search(\">\");\r\n\t            var tempString = matchString.substr(index + 1);\r\n\t            var index2 = tempString.lastIndexOf(\"</\");\r\n\t            tempString = tempString.substring(0, index2);\r\n\t            tempString = tempString.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n\t            console.log(tempString);\r\n\t            return tempString;\r\n\t        }\r\n\t        else {\r\n\t            return null;\r\n\t        }\r\n\t    };\r\n\t    UkuleleUtil.getComponentConfiguration = function (htmlString) {\r\n\t        var tempDom = document.createElement(\"div\");\r\n\t        tempDom.innerHTML = htmlString;\r\n\t        var tpl = Selector_1.Selector.querySelectorAll(tempDom, \"template\");\r\n\t        var scripts = Selector_1.Selector.querySelectorAll(tempDom, \"script\");\r\n\t        var stylesheet = Selector_1.Selector.querySelectorAll(tempDom, \"style\");\r\n\t        var deps = [];\r\n\t        var ccs = null;\r\n\t        for (var i = 0; i < scripts.length; i++) {\r\n\t            var script = scripts[i];\r\n\t            if (script.src !== \"\") {\r\n\t                deps.push(script.src);\r\n\t            }\r\n\t            else {\r\n\t                ccs = script.innerHTML;\r\n\t            }\r\n\t        }\r\n\t        if (stylesheet && stylesheet[0]) {\r\n\t            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs, stylesheet[0].innerHTML);\r\n\t        }\r\n\t        else {\r\n\t            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs);\r\n\t        }\r\n\t    };\r\n\t    UkuleleUtil.searchUkuAttrTag = function (htmlString) {\r\n\t        var re = /^uku\\-.*/;\r\n\t        var index = htmlString.search(re);\r\n\t        return index;\r\n\t    };\r\n\t    UkuleleUtil.getAttrFromUkuTag = function (ukuTag, camelCase) {\r\n\t        if (camelCase === void 0) { camelCase = false; }\r\n\t        if (UkuleleUtil.searchUkuAttrTag(ukuTag) === 0) {\r\n\t            ukuTag = ukuTag.replace('uku-', '');\r\n\t        }\r\n\t        if (camelCase) {\r\n\t            var names = ukuTag.split('-');\r\n\t            ukuTag = names[0];\r\n\t            for (var i = 1; i < names.length; i++) {\r\n\t                var firstLetter = names[i].charAt(0).toUpperCase();\r\n\t                ukuTag = ukuTag + firstLetter + names[i].substr(1);\r\n\t            }\r\n\t        }\r\n\t        return ukuTag;\r\n\t    };\r\n\t    UkuleleUtil.searchUkuExpTag = function (expression) {\r\n\t        var re = /^\\{\\{.*\\}\\}$/;\r\n\t        var index = expression.search(re);\r\n\t        return index;\r\n\t    };\r\n\t    UkuleleUtil.searchUkuFuncArg = function (htmlString) {\r\n\t        var re = /\\(.*\\)$/;\r\n\t        var index = htmlString.search(re);\r\n\t        return index;\r\n\t    };\r\n\t    UkuleleUtil.isRepeat = function (element) {\r\n\t        if (element.getAttribute(\"uku-repeat\")) {\r\n\t            return true;\r\n\t        }\r\n\t        return false;\r\n\t    };\r\n\t    UkuleleUtil.isInRepeat = function (element) {\r\n\t        var parents = Selector_1.Selector.parents(element);\r\n\t        for (var i = 0; i < parents.length; i++) {\r\n\t            var parent_1 = parents[i];\r\n\t            if (parent_1.nodeType !== 9) {\r\n\t                var b = parent_1.getAttribute(\"uku-repeat\");\r\n\t                if (b) {\r\n\t                    return true;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return false;\r\n\t    };\r\n\t    UkuleleUtil.getBoundModelInstantName = function (expression) {\r\n\t        var controlInstName = expression.split('.')[0];\r\n\t        if (controlInstName) {\r\n\t            return controlInstName;\r\n\t        }\r\n\t        return undefined;\r\n\t    };\r\n\t    UkuleleUtil.getAttributeFinalValue = function (object, attrName) {\r\n\t        var valueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, attrName);\r\n\t        var value = valueObject.value;\r\n\t        return value;\r\n\t    };\r\n\t    UkuleleUtil.getAttributeFinalValueAndParent = function (object, attrName) {\r\n\t        var finalValue = object;\r\n\t        var parentValue;\r\n\t        if (typeof attrName === \"string\") {\r\n\t            var attrValue = UkuleleUtil.getFinalAttribute(attrName);\r\n\t            var temp = attrValue.split(\".\");\r\n\t            if (attrValue !== \"\" && finalValue) {\r\n\t                for (var i = 0; i < temp.length; i++) {\r\n\t                    var property = temp[i];\r\n\t                    parentValue = finalValue;\r\n\t                    finalValue = finalValue[property];\r\n\t                    if (finalValue === undefined || finalValue === null) {\r\n\t                        break;\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                if (object.hasOwnProperty(\"_alias\") && object._alias === attrName) {\r\n\t                    finalValue = object;\r\n\t                }\r\n\t                else {\r\n\t                    finalValue = attrName;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return new ValueAndParent(finalValue, parentValue);\r\n\t    };\r\n\t    UkuleleUtil.getFinalValue = function (uku, object, attrName) {\r\n\t        var additionalArgu = [];\r\n\t        for (var _i = 3; _i < arguments.length; _i++) {\r\n\t            additionalArgu[_i - 3] = arguments[_i];\r\n\t        }\r\n\t        var index = -1;\r\n\t        if (typeof attrName === \"string\") {\r\n\t            index = UkuleleUtil.searchUkuFuncArg(attrName);\r\n\t        }\r\n\t        if (index === -1) {\r\n\t            //is attribute\r\n\t            return UkuleleUtil.getAttributeFinalValue(object, attrName);\r\n\t        }\r\n\t        else {\r\n\t            //is function\r\n\t            var functionName = attrName.substring(0, index);\r\n\t            var finalValueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, functionName);\r\n\t            var finalValue = finalValueObject.value;\r\n\t            if (finalValue === undefined) {\r\n\t                return finalValue;\r\n\t            }\r\n\t            var new_arguments = [];\r\n\t            var _argumentsString = attrName.substring(index + 1, attrName.length - 1);\r\n\t            if (_argumentsString !== \"\") {\r\n\t                var _arguments = ArgumentUtil_1.ArgumentUtil.analyze(_argumentsString, uku);\r\n\t                for (var i = 0; i < _arguments.length; i++) {\r\n\t                    var temp = void 0;\r\n\t                    var argument = _arguments[i];\r\n\t                    var argType = typeof argument;\r\n\t                    var controllerModel = null;\r\n\t                    if (argType === \"string\") {\r\n\t                        controllerModel = uku._internal_getDefinitionManager().getControllerModelByName(argument);\r\n\t                        if (controllerModel && controllerModel.controllerInstance) {\r\n\t                            var agrumentInst = controllerModel.controllerInstance;\r\n\t                            if (argument.split(\".\").length === 1) {\r\n\t                                temp = agrumentInst;\r\n\t                            }\r\n\t                            else {\r\n\t                                temp = UkuleleUtil.getFinalValue(uku, agrumentInst, argument);\r\n\t                            }\r\n\t                        }\r\n\t                        else {\r\n\t                            temp = UkuleleUtil.getFinalValue(uku, object, argument);\r\n\t                        }\r\n\t                        new_arguments.push(temp);\r\n\t                    }\r\n\t                    else {\r\n\t                        new_arguments.push(argument);\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            if (additionalArgu) {\r\n\t                var additionalArguArray = Array.prototype.slice.call(additionalArgu);\r\n\t                new_arguments = new_arguments.concat(additionalArguArray);\r\n\t            }\r\n\t            finalValue = finalValue.apply(finalValueObject.parent, new_arguments);\r\n\t            return finalValue;\r\n\t        }\r\n\t    };\r\n\t    return UkuleleUtil;\r\n\t}());\r\n\texports.UkuleleUtil = UkuleleUtil;\r\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Selector = (function () {\r\n\t    function Selector() {\r\n\t    }\r\n\t    Selector.querySelectorAll = function (element, query) {\r\n\t        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== \"undefined\") {\r\n\t            return window['jQuery'](element).find(query);\r\n\t        }\r\n\t        else {\r\n\t            return element.querySelectorAll(query);\r\n\t        }\r\n\t    };\r\n\t    Selector.fuzzyFind = function (element, text) {\r\n\t        if (element && element.attributes) {\r\n\t            for (var i = 0; i < element.attributes.length; i++) {\r\n\t                var attr = element.attributes[i];\r\n\t                if (attr.nodeName.search(text) > -1) {\r\n\t                    return element;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return null;\r\n\t    };\r\n\t    Selector.directText = function (element, text) {\r\n\t        var o = \"\";\r\n\t        var nodes = element.childNodes;\r\n\t        for (var i = 0; i <= nodes.length - 1; i++) {\r\n\t            var node = nodes[i];\r\n\t            if (node.nodeType === 3) {\r\n\t                if (text || text === \"\" || text === 0 || text === false) {\r\n\t                    node.nodeValue = text;\r\n\t                    return;\r\n\t                }\r\n\t                else {\r\n\t                    o += node.nodeValue;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        return o.trim();\r\n\t    };\r\n\t    Selector.parents = function (element) {\r\n\t        var parents = [];\r\n\t        while (element.parentNode && element.parentNode.tagName !== 'BODY') {\r\n\t            parents.push(element.parentNode);\r\n\t            element = element.parentNode;\r\n\t        }\r\n\t        return parents;\r\n\t    };\r\n\t    return Selector;\r\n\t}());\r\n\texports.Selector = Selector;\r\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ArgumentUtil = (function () {\r\n\t    function ArgumentUtil() {\r\n\t    }\r\n\t    ArgumentUtil.analyze = function (argumentString, uku) {\r\n\t        //let re:RegExp = /^\\{\\{.*\\}\\}$/;\r\n\t        argumentString = argumentString.replace(/'/g, '\"');\r\n\t        var tempArr = argumentString.split(\",\");\r\n\t        for (var i = 0; i < tempArr.length; i++) {\r\n\t            var arr = tempArr[i];\r\n\t            for (var alias in uku._internal_getDefinitionManager().getControllersDefinition()) {\r\n\t                var index = arr.search(alias);\r\n\t                var index2 = arr.search(\"parent.\");\r\n\t                if (index > -1 || index2 > -1) {\r\n\t                    tempArr[i] = '\"' + arr + '\"';\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        argumentString = tempArr.join(\",\");\r\n\t        argumentString = '[' + argumentString + ']';\r\n\t        try {\r\n\t            var jsonArr = JSON.parse(argumentString);\r\n\t            return jsonArr;\r\n\t        }\r\n\t        catch (e) {\r\n\t            console.error(e);\r\n\t            return null;\r\n\t        }\r\n\t    };\r\n\t    return ArgumentUtil;\r\n\t}());\r\n\texports.ArgumentUtil = ArgumentUtil;\r\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar ComponentConfiguration = (function () {\r\n\t    function ComponentConfiguration(_template, _dependentScripts, _componentControllerScript, _stylesheet) {\r\n\t        if (_stylesheet === void 0) { _stylesheet = undefined; }\r\n\t        this.template = _template;\r\n\t        this.dependentScripts = _dependentScripts;\r\n\t        this.componentControllerScript = _componentControllerScript;\r\n\t        this.stylesheet = _stylesheet;\r\n\t    }\r\n\t    return ComponentConfiguration;\r\n\t}());\r\n\texports.ComponentConfiguration = ComponentConfiguration;\r\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar ObjectUtil_1 = __webpack_require__(4);\r\n\tvar UkuEventType_1 = __webpack_require__(14);\r\n\tvar Event_1 = __webpack_require__(15);\r\n\tvar DirtyChecker = (function () {\r\n\t    function DirtyChecker(_uku) {\r\n\t        this.uku = _uku;\r\n\t        this.defMgr = this.uku._internal_getDefinitionManager();\r\n\t    }\r\n\t    DirtyChecker.prototype.runDirtyChecking = function (ctrlAliasName, excludeElement) {\r\n\t        var _this = this;\r\n\t        if (ctrlAliasName) {\r\n\t            if (typeof (ctrlAliasName) === \"string\") {\r\n\t                watchController(ctrlAliasName);\r\n\t            }\r\n\t            else if (ObjectUtil_1.ObjectUtil.isArray(ctrlAliasName)) {\r\n\t                for (var i = 0; i < ctrlAliasName.length; i++) {\r\n\t                    watchController(ctrlAliasName[i]);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            for (var alias in this.defMgr.getControllersDefinition()) {\r\n\t                watchController(alias);\r\n\t            }\r\n\t        }\r\n\t        function watchController(alias) {\r\n\t            var controllerModel = _this.defMgr.getControllersDefinition()[alias];\r\n\t            if (!controllerModel) {\r\n\t                if (_this.uku.parentUku) {\r\n\t                    _this.uku.parentUku.refresh(alias);\r\n\t                }\r\n\t                return;\r\n\t            }\r\n\t            var controller = controllerModel.controllerInstance;\r\n\t            var previousCtrlModel = _this.defMgr.getCopyControllers()[alias];\r\n\t            var changedElementCount = 0;\r\n\t            for (var i = 0; i < controllerModel.boundItems.length; i++) {\r\n\t                var boundItem = controllerModel.boundItems[i];\r\n\t                var attrName = boundItem.attributeName;\r\n\t                if (attrName.search('parent.') > -1) {\r\n\t                    return;\r\n\t                }\r\n\t                if (previousCtrlModel) {\r\n\t                    if (boundItem.hasOwnProperty('ukuTag') && boundItem['ukuTag'] === \"selected\") {\r\n\t                        attrName = attrName.split(\"|\")[0];\r\n\t                    }\r\n\t                    var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, controller, attrName);\r\n\t                    var previousFinalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, previousCtrlModel, attrName);\r\n\t                    if (!ObjectUtil_1.ObjectUtil.compare(previousFinalValue, finalValue)) {\r\n\t                        attrName = boundItem.attributeName;\r\n\t                        var changedBoundItems = controllerModel.getBoundItemsByName(attrName);\r\n\t                        for (var j = 0; j < changedBoundItems.length; j++) {\r\n\t                            var changedBoundItem = changedBoundItems[j];\r\n\t                            if (changedBoundItem.element !== excludeElement || (boundItem.hasOwnProperty('ukuTag') && changedBoundItem['ukuTag'] !== \"value\")) {\r\n\t                                changedElementCount++;\r\n\t                                changedBoundItem.render(controller);\r\n\t                            }\r\n\t                        }\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            if (changedElementCount > 0 && _this.uku.hasListener(UkuEventType_1.UkuEventType.REFRESH)) {\r\n\t                _this.uku.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.REFRESH));\r\n\t            }\r\n\t            _this.defMgr.copyControllerInstance(controller, alias);\r\n\t        }\r\n\t    };\r\n\t    ;\r\n\t    return DirtyChecker;\r\n\t}());\r\n\texports.DirtyChecker = DirtyChecker;\r\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar UkuEventType = (function () {\r\n\t    function UkuEventType() {\r\n\t    }\r\n\t    UkuEventType.INITIALIZED = 'initialized';\r\n\t    UkuEventType.REFRESH = 'refresh';\r\n\t    UkuEventType.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\r\n\t    return UkuEventType;\r\n\t}());\r\n\texports.UkuEventType = UkuEventType;\r\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar Event = (function () {\r\n\t    function Event(_eventType, _element) {\r\n\t        this.eventType = _eventType;\r\n\t        this.element = _element;\r\n\t    }\r\n\t    return Event;\r\n\t}());\r\n\texports.Event = Event;\r\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar EventEmitter_1 = __webpack_require__(1);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar AsyncCaller_1 = __webpack_require__(2);\r\n\tvar BoundItemAttribute_1 = __webpack_require__(17);\r\n\tvar BoundItemExpression_1 = __webpack_require__(19);\r\n\tvar BoundItemInnerText_1 = __webpack_require__(20);\r\n\tvar BoundItemRepeat_1 = __webpack_require__(21);\r\n\tvar BoundItemComponentAttribute_1 = __webpack_require__(22);\r\n\tvar ElementActionBinder_1 = __webpack_require__(23);\r\n\tvar EventListener_1 = __webpack_require__(24);\r\n\tvar Selector_1 = __webpack_require__(10);\r\n\tvar Event_1 = __webpack_require__(15);\r\n\tvar Analyzer = (function (_super) {\r\n\t    __extends(Analyzer, _super);\r\n\t    function Analyzer(_uku) {\r\n\t        _super.call(this);\r\n\t        //处理绑定的attribute\r\n\t        this.dealWithAttribute = function (element, tagName) {\r\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\r\n\t            //let elementName = element.tagName;\r\n\t            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n\t            if (controllerModel) {\r\n\t                var boundItem = new BoundItemAttribute_1.BoundItemAttribute(attr, tagName, element, this.uku);\r\n\t                controllerModel.addBoundItem(boundItem);\r\n\t                boundItem.render(controllerModel.controllerInstance);\r\n\t                ElementActionBinder_1.elementChangedBinder(element, tagName, controllerModel, this.uku.refresh, this.uku);\r\n\t            }\r\n\t        };\r\n\t        this.uku = _uku;\r\n\t        this.defMgr = this.uku._internal_getDefinitionManager();\r\n\t    }\r\n\t    //解析html中各个uku的tag\r\n\t    Analyzer.prototype.analyizeElement = function (ele) {\r\n\t        var _this = this;\r\n\t        this.searchComponent(ele, function (element) {\r\n\t            var subElements = [];\r\n\t            //scan element which has uku-* tag\r\n\t            var isSelfHasUkuTag = Selector_1.Selector.fuzzyFind(element, 'uku-');\r\n\t            if (isSelfHasUkuTag) {\r\n\t                subElements.push(isSelfHasUkuTag);\r\n\t            }\r\n\t            var allChildren = Selector_1.Selector.querySelectorAll(element, \"*\");\r\n\t            for (var i = 0; i < allChildren.length; i++) {\r\n\t                var child = allChildren[i];\r\n\t                var matchElement = Selector_1.Selector.fuzzyFind(child, 'uku-');\r\n\t                if (matchElement && !UkuleleUtil_1.UkuleleUtil.isInRepeat(matchElement)) {\r\n\t                    subElements.push(matchElement);\r\n\t                }\r\n\t            }\r\n\t            _this.searchExpression(element);\r\n\t            //解析绑定 attribute，注册event\r\n\t            for (var n = 0; n < subElements.length; n++) {\r\n\t                var subElement = subElements[n];\r\n\t                var orderAttrs = _this.sortAttributes(subElement);\r\n\t                for (var j = 0; j < orderAttrs.length; j++) {\r\n\t                    var attribute = orderAttrs[j];\r\n\t                    if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attribute.nodeName) > -1) {\r\n\t                        var tempArr = attribute.nodeName.split('-');\r\n\t                        tempArr.shift();\r\n\t                        var attrName = tempArr.join('-');\r\n\t                        if (attrName !== \"application\") {\r\n\t                            if (attrName.search('on') === 0) {\r\n\t                                //is an event\r\n\t                                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\r\n\t                                    _this.dealWithEvent(subElement, attrName);\r\n\t                                }\r\n\t                            }\r\n\t                            else if (attrName.search('repeat') !== -1) {\r\n\t                                //is an repeat\r\n\t                                _this.dealWithRepeat(subElement);\r\n\t                            }\r\n\t                            else {\r\n\t                                //is an attribute\r\n\t                                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\r\n\t                                    if (attrName !== \"text\") {\r\n\t                                        _this.dealWithAttribute(subElement, attrName);\r\n\t                                    }\r\n\t                                    else {\r\n\t                                        _this.dealWithInnerText(subElement);\r\n\t                                    }\r\n\t                                }\r\n\t                            }\r\n\t                        }\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t            _this.defMgr.copyAllController();\r\n\t            if (_this.hasListener(Analyzer.ANALYIZE_COMPLETED)) {\r\n\t                _this.dispatchEvent(new Event_1.Event(Analyzer.ANALYIZE_COMPLETED, element));\r\n\t            }\r\n\t        });\r\n\t    };\r\n\t    Analyzer.prototype.sortAttributes = function (subElement) {\r\n\t        var orderAttrs = [];\r\n\t        for (var i = 0; i < subElement.attributes.length; i++) {\r\n\t            var attribute = subElement.attributes[i];\r\n\t            if (attribute.nodeName.search(\"uku-on\") !== -1) {\r\n\t                orderAttrs.push(attribute);\r\n\t            }\r\n\t            else {\r\n\t                orderAttrs.unshift(attribute);\r\n\t            }\r\n\t        }\r\n\t        return orderAttrs;\r\n\t    };\r\n\t    Analyzer.prototype.searchComponent = function (element, callback) {\r\n\t        var _this = this;\r\n\t        var comp = this.defMgr.getComponent(element.localName);\r\n\t        if (comp) {\r\n\t            if (!comp.lazy) {\r\n\t                var attrs = element.attributes;\r\n\t                var compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\r\n\t                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n\t                    this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs, function (compElement) {\r\n\t                        callback && callback(compElement);\r\n\t                    });\r\n\t                }\r\n\t                else {\r\n\t                    callback && callback(element);\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                this.defMgr.addLazyComponentDefinition(comp.tagName, comp.templateUrl, function () {\r\n\t                    var attrs = element.attributes;\r\n\t                    var compDef = _this.defMgr.getComponentsDefinition()[comp.tagName];\r\n\t                    if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n\t                        _this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs, function (compElement) {\r\n\t                            callback && callback(compElement);\r\n\t                        });\r\n\t                    }\r\n\t                    else {\r\n\t                        callback && callback(element);\r\n\t                    }\r\n\t                });\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            if (element.children && element.children.length > 0) {\r\n\t                var ac_1 = new AsyncCaller_1.AsyncCaller();\r\n\t                for (var i = 0; i < element.children.length; i++) {\r\n\t                    var child = element.children[i];\r\n\t                    ac_1.pushQueue(this.searchComponent.bind(this), [child, function () {\r\n\t                            _this.searchComponent.resolve(ac_1);\r\n\t                        }]);\r\n\t                }\r\n\t                ac_1.exec(function () {\r\n\t                    callback && callback(element);\r\n\t                });\r\n\t            }\r\n\t            else {\r\n\t                callback && callback(element);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    Analyzer.prototype.dealWithComponent = function (tag, template, Clazz, attrs, callback) {\r\n\t        var _this = this;\r\n\t        var randomAlias = 'cc_' + Math.floor(10000 * Math.random()).toString();\r\n\t        template = template.replace(new RegExp(\"\\'cc\\\\.\", 'gm'), \"'\" + randomAlias + '.');\r\n\t        template = template.replace(new RegExp('\"cc\\\\.', 'gm'), '\"' + randomAlias + '.');\r\n\t        template = template.replace(new RegExp('\\{\\{cc\\\\.', 'gm'), \"{{\" + randomAlias + '.');\r\n\t        template = template.replace(new RegExp(' cc\\\\.', 'gm'), ' ' + randomAlias + '.');\r\n\t        template = template.replace(new RegExp('\\\\.cc\\\\.', 'gm'), '.' + randomAlias + '.');\r\n\t        var tempFragment = document.createElement('div');\r\n\t        tempFragment.insertAdjacentHTML('afterBegin', template);\r\n\t        if (tempFragment.children.length > 1) {\r\n\t            template = tempFragment.outerHTML;\r\n\t        }\r\n\t        tag.insertAdjacentHTML('beforeBegin', template);\r\n\t        var htmlDom = tag.previousElementSibling;\r\n\t        htmlDom.classList.add(tag.localName);\r\n\t        var cc;\r\n\t        if (Clazz) {\r\n\t            cc = new Clazz(this.uku);\r\n\t            cc._dom = htmlDom;\r\n\t            cc.fire = function (eventType, data, bubbles, cancelable) {\r\n\t                if (bubbles === void 0) { bubbles = false; }\r\n\t                if (cancelable === void 0) { cancelable = true; }\r\n\t                var event = new Event(eventType.toLowerCase(), { \"bubbles\": bubbles, \"cancelable\": cancelable });\r\n\t                event['data'] = data;\r\n\t                cc._dom.dispatchEvent(event);\r\n\t            };\r\n\t            this.uku.registerController(randomAlias, cc);\r\n\t            for (var i = 0; i < attrs.length; i++) {\r\n\t                var attr = attrs[i];\r\n\t                //todo need Refactor\r\n\t                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\r\n\t                    || attr.nodeName.search(\"uku-on\") !== -1\r\n\t                    || attr.nodeName === \"uku-render\"\r\n\t                    || attr.nodeName === \"uku-visible\") {\r\n\t                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\r\n\t                }\r\n\t                else {\r\n\t                    var tagName = UkuleleUtil_1.UkuleleUtil.getAttrFromUkuTag(attr.nodeName, true);\r\n\t                    var controllerModel = this.defMgr.getControllerModelByName(attr.nodeValue);\r\n\t                    if (controllerModel) {\r\n\t                        var boundItem = new BoundItemComponentAttribute_1.BoundItemComponentAttribute(attr.nodeValue, tagName, cc, this.uku);\r\n\t                        controllerModel.addBoundItem(boundItem);\r\n\t                        boundItem.render(controllerModel.controllerInstance);\r\n\t                    }\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            for (var i = 0; i < attrs.length; i++) {\r\n\t                var attr = attrs[i];\r\n\t                //todo need Refactor\r\n\t                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\r\n\t                    || attr.nodeName.search(\"uku-on\") !== -1\r\n\t                    || attr.nodeName === \"uku-render\"\r\n\t                    || attr.nodeName === \"uku-visible\") {\r\n\t                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        tag.parentNode.removeChild(tag);\r\n\t        if (htmlDom.children && htmlDom.children.length > 0) {\r\n\t            var ac_2 = new AsyncCaller_1.AsyncCaller();\r\n\t            for (var j = 0; j < htmlDom.children.length; j++) {\r\n\t                var child = htmlDom.children[j];\r\n\t                ac_2.pushQueue(this.searchComponent.bind(this), [child, function () {\r\n\t                        _this.searchComponent.resolve(ac_2);\r\n\t                    }]);\r\n\t            }\r\n\t            ac_2.exec(function () {\r\n\t                if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\r\n\t                    cc._initialized();\r\n\t                }\r\n\t                callback && callback(htmlDom);\r\n\t            });\r\n\t        }\r\n\t        else {\r\n\t            if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\r\n\t                cc._initialized();\r\n\t            }\r\n\t            callback && callback(htmlDom);\r\n\t        }\r\n\t    };\r\n\t    Analyzer.prototype.searchExpression = function (element) {\r\n\t        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(Selector_1.Selector.directText(element)) !== -1) {\r\n\t            if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n\t                //normal expression\r\n\t                this.dealWithExpression(element);\r\n\t            }\r\n\t        }\r\n\t        for (var i = 0; i < element.children.length; i++) {\r\n\t            this.searchExpression(element.children[i]);\r\n\t        }\r\n\t    };\r\n\t    Analyzer.prototype.dealWithExpression = function (element) {\r\n\t        //通常的花括号声明方式\r\n\t        var expression = Selector_1.Selector.directText(element);\r\n\t        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(expression) !== -1) {\r\n\t            var attr = expression.slice(2, -2);\r\n\t            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n\t            if (controllerModel) {\r\n\t                var boundItem = new BoundItemExpression_1.BoundItemExpression(attr, expression, element, this.uku);\r\n\t                controllerModel.addBoundItem(boundItem);\r\n\t                boundItem.render(controllerModel.controllerInstance);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    //\r\n\t    Analyzer.prototype.dealWithInnerText = function (element) {\r\n\t        var attr = element.getAttribute(\"uku-text\");\r\n\t        if (attr) {\r\n\t            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n\t            if (controllerModel) {\r\n\t                var boundItem = new BoundItemInnerText_1.BoundItemInnerText(attr, element, this.uku);\r\n\t                controllerModel.addBoundItem(boundItem);\r\n\t                boundItem.render(controllerModel.controllerInstance);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    //处理 事件 event\r\n\t    Analyzer.prototype.dealWithEvent = function (element, eventName) {\r\n\t        var _this = this;\r\n\t        var expression = element.getAttribute(\"uku-\" + eventName);\r\n\t        var eventNameInListener = eventName.substring(2);\r\n\t        eventNameInListener = eventNameInListener.toLowerCase();\r\n\t        var controllerModel = this.defMgr.getControllerModelByName(expression);\r\n\t        if (controllerModel) {\r\n\t            var controller_1 = controllerModel.controllerInstance;\r\n\t            var temArr = expression.split(\".\");\r\n\t            var alias_1;\r\n\t            if (temArr[0] === \"parent\") {\r\n\t                alias_1 = temArr[1];\r\n\t            }\r\n\t            else {\r\n\t                alias_1 = temArr[0];\r\n\t            }\r\n\t            EventListener_1.EventListener.addEventListener(element, eventNameInListener, function (event) {\r\n\t                _this.defMgr.copyControllerInstance(controller_1, alias_1);\r\n\t                _this.defMgr.getBoundAttributeValue(expression, event);\r\n\t                _this.uku.refresh(alias_1, element);\r\n\t            });\r\n\t        }\r\n\t    };\r\n\t    //处理 repeat\r\n\t    Analyzer.prototype.dealWithRepeat = function (element) {\r\n\t        var repeatExpression = element.getAttribute(\"uku-repeat\");\r\n\t        var tempArr = repeatExpression.split(' in ');\r\n\t        var itemName = tempArr[0];\r\n\t        var attr = tempArr[1];\r\n\t        var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n\t        if (controllerModel) {\r\n\t            var controllerInst = controllerModel.controllerInstance;\r\n\t            var boundItem = new BoundItemRepeat_1.BoundItemRepeat(attr, itemName, element, this.uku);\r\n\t            controllerModel.addBoundItem(boundItem);\r\n\t            boundItem.render(controllerInst);\r\n\t        }\r\n\t    };\r\n\t    Analyzer.ANALYIZE_COMPLETED = 'analyizeCompleted';\r\n\t    return Analyzer;\r\n\t}(EventEmitter_1.EventEmitter));\r\n\texports.Analyzer = Analyzer;\r\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar BoundItemBase_1 = __webpack_require__(18);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar BoundItemAttribute = (function (_super) {\r\n\t    __extends(BoundItemAttribute, _super);\r\n\t    function BoundItemAttribute(attrName, ukuTag, element, uku) {\r\n\t        _super.call(this, attrName, element, uku);\r\n\t        this.ukuTag = ukuTag;\r\n\t    }\r\n\t    BoundItemAttribute.prototype.render = function (controller) {\r\n\t        var attr = this.attributeName;\r\n\t        var key;\r\n\t        var elementName = this.element.tagName;\r\n\t        if (this.ukuTag === \"selected\" && elementName === \"SELECT\") {\r\n\t            var tempArr = this.attributeName.split(\"|\");\r\n\t            attr = tempArr[0];\r\n\t            key = tempArr[1];\r\n\t        }\r\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, attr);\r\n\t        if (this.ukuTag.search('data-item') !== -1) {\r\n\t            finalValue = JSON.stringify(finalValue);\r\n\t            this.element.setAttribute('data-item', finalValue);\r\n\t        }\r\n\t        else if (this.ukuTag === \"selected\" && elementName === \"SELECT\") {\r\n\t            var value = void 0;\r\n\t            if (key) {\r\n\t                value = finalValue[key];\r\n\t            }\r\n\t            else {\r\n\t                value = finalValue;\r\n\t            }\r\n\t            this.element.value = value;\r\n\t        }\r\n\t        else if (this.element.getAttribute(\"type\") === \"checkbox\") {\r\n\t            this.element.checked = finalValue;\r\n\t        }\r\n\t        else if (this.ukuTag === \"value\") {\r\n\t            this.element.value = finalValue;\r\n\t        }\r\n\t        else if (this.element.getAttribute(\"type\") === \"radio\") {\r\n\t            if (this.element.value === finalValue) {\r\n\t                this.element.setAttribute(\"checked\", \"true\");\r\n\t            }\r\n\t        }\r\n\t        else if (this.element.nodeName === \"IMG\" && this.ukuTag === \"src\") {\r\n\t            if (finalValue) {\r\n\t                this.element.setAttribute(this.ukuTag, finalValue);\r\n\t            }\r\n\t        }\r\n\t        else if (this.ukuTag === \"style\") {\r\n\t            for (var cssName in finalValue) {\r\n\t                this.element.style[cssName] = finalValue[cssName];\r\n\t            }\r\n\t        }\r\n\t        else if (this.ukuTag === \"visible\") {\r\n\t            if (finalValue) {\r\n\t                this.element.style.visibility = \"visible\";\r\n\t            }\r\n\t            else {\r\n\t                this.element.style.visibility = \"hidden\";\r\n\t            }\r\n\t        }\r\n\t        else if (this.ukuTag === \"render\") {\r\n\t            if (finalValue) {\r\n\t                var oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\r\n\t                if (oldDisplaySetting !== null) {\r\n\t                    this.element.style.display = oldDisplaySetting;\r\n\t                }\r\n\t            }\r\n\t            else {\r\n\t                var oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\r\n\t                if (oldDisplaySetting === null) {\r\n\t                    oldDisplaySetting = this.element.style.display;\r\n\t                    this.element.setAttribute(\"data-old-display\", oldDisplaySetting);\r\n\t                }\r\n\t                this.element.style.display = \"none\";\r\n\t            }\r\n\t        }\r\n\t        else {\r\n\t            if (this.ukuTag === \"disabled\") {\r\n\t                this.element.disabled = finalValue;\r\n\t            }\r\n\t            else {\r\n\t                this.element.setAttribute(this.ukuTag, finalValue);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return BoundItemAttribute;\r\n\t}(BoundItemBase_1.BoundItemBase));\r\n\texports.BoundItemAttribute = BoundItemAttribute;\r\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar BoundItemBase = (function () {\r\n\t    function BoundItemBase(_attrName, _element, _uku) {\r\n\t        this.attributeName = _attrName;\r\n\t        this.element = _element;\r\n\t        this.uku = _uku;\r\n\t    }\r\n\t    BoundItemBase.prototype.render = function (controller) {\r\n\t    };\r\n\t    return BoundItemBase;\r\n\t}());\r\n\texports.BoundItemBase = BoundItemBase;\r\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar BoundItemBase_1 = __webpack_require__(18);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar Selector_1 = __webpack_require__(10);\r\n\tvar BoundItemExpression = (function (_super) {\r\n\t    __extends(BoundItemExpression, _super);\r\n\t    function BoundItemExpression(attrName, expression, element, uku) {\r\n\t        _super.call(this, attrName, element, uku);\r\n\t        this.expression = expression;\r\n\t    }\r\n\t    BoundItemExpression.prototype.render = function (controller) {\r\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n\t        Selector_1.Selector.directText(this.element, finalValue);\r\n\t    };\r\n\t    return BoundItemExpression;\r\n\t}(BoundItemBase_1.BoundItemBase));\r\n\texports.BoundItemExpression = BoundItemExpression;\r\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar BoundItemBase_1 = __webpack_require__(18);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar BoundItemInnerText = (function (_super) {\r\n\t    __extends(BoundItemInnerText, _super);\r\n\t    function BoundItemInnerText(attrName, element, uku) {\r\n\t        _super.call(this, attrName, element, uku);\r\n\t        this.tagName = 'text';\r\n\t    }\r\n\t    BoundItemInnerText.prototype.render = function (controller) {\r\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n\t        this.element.innerHTML = finalValue;\r\n\t    };\r\n\t    return BoundItemInnerText;\r\n\t}(BoundItemBase_1.BoundItemBase));\r\n\texports.BoundItemInnerText = BoundItemInnerText;\r\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar BoundItemBase_1 = __webpack_require__(18);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar BoundItemRepeat = (function (_super) {\r\n\t    __extends(BoundItemRepeat, _super);\r\n\t    function BoundItemRepeat(attrName, itemName, element, uku) {\r\n\t        _super.call(this, attrName, element, uku);\r\n\t        this.expression = itemName;\r\n\t        this.renderTemplate = element.outerHTML;\r\n\t        this.parentElement = element.parentNode;\r\n\t        this.beginCommentString = undefined;\r\n\t        this.endCommentString = undefined;\r\n\t    }\r\n\t    BoundItemRepeat.prototype.render = function (controller) {\r\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n\t        if (!finalValue) {\r\n\t            return;\r\n\t        }\r\n\t        var self = this;\r\n\t        if (this.element && this.element.parentNode) {\r\n\t            //create repeate begin comment\r\n\t            this.beginCommentString = \"begin uku-repeat: \" + this.expression + \" in \" + this.attributeName;\r\n\t            var beginComment = document.createComment(this.beginCommentString);\r\n\t            this.element.parentNode.insertBefore(beginComment, this.element);\r\n\t            //create repeate end comment\r\n\t            this.endCommentString = \"end uku-repeat: \" + this.expression + \" in \" + this.attributeName;\r\n\t            var endComment = document.createComment(this.endCommentString);\r\n\t            this.element.parentNode.insertBefore(endComment, this.element.nextSibling);\r\n\t            //remove definition dom\r\n\t            this.element.parentNode.removeChild(this.element);\r\n\t        }\r\n\t        var treeWalker = document.createTreeWalker(this.parentElement, NodeFilter.SHOW_COMMENT, { acceptNode: function (node) {\r\n\t                if (node.nodeValue === self.beginCommentString) {\r\n\t                    return NodeFilter.FILTER_ACCEPT;\r\n\t                }\r\n\t                return NodeFilter.FILTER_SKIP;\r\n\t            } }, false);\r\n\t        /*function filter(node:Node) :any{\r\n\t            if (node.nodeValue === self.beginCommentString) {\r\n\t                return (NodeFilter.FILTER_ACCEPT);\r\n\t            }\r\n\t            return (NodeFilter.FILTER_SKIP);\r\n\t        }*/\r\n\t        function generateTempContainer() {\r\n\t            var index = UkuleleUtil_1.UkuleleUtil.searchHtmlTag(self.renderTemplate, \"tr\");\r\n\t            if (index === -1) {\r\n\t                return document.createElement(\"div\");\r\n\t            }\r\n\t            else {\r\n\t                return document.createElement(\"tbody\");\r\n\t            }\r\n\t        }\r\n\t        while (treeWalker.nextNode()) {\r\n\t            var commentNode = treeWalker.currentNode;\r\n\t            if (commentNode && commentNode.nodeValue === this.beginCommentString) {\r\n\t                //remove overtime dom.\r\n\t                while (commentNode.nextSibling && commentNode.nextSibling.nodeValue !== this.endCommentString) {\r\n\t                    commentNode.parentNode.removeChild(commentNode.nextSibling);\r\n\t                }\r\n\t                //create new dom\r\n\t                var tempDiv = generateTempContainer();\r\n\t                var blankDiv = generateTempContainer();\r\n\t                commentNode.parentNode.insertBefore(blankDiv, commentNode.nextSibling);\r\n\t                for (var i = 0; i < finalValue.length; i++) {\r\n\t                    tempDiv.insertAdjacentHTML('beforeEnd', this.renderTemplate);\r\n\t                    if (i === finalValue.length - 1) {\r\n\t                        var childrenHTML = tempDiv.innerHTML;\r\n\t                        blankDiv.insertAdjacentHTML('beforeBegin', childrenHTML);\r\n\t                        commentNode.parentNode.removeChild(blankDiv);\r\n\t                        tempDiv = null;\r\n\t                        blankDiv = null;\r\n\t                    }\r\n\t                }\r\n\t                var child = commentNode.nextSibling;\r\n\t                for (var j = 0; j < finalValue.length; j++) {\r\n\t                    child.removeAttribute(\"uku-repeat\");\r\n\t                    var Uku_Clazz = this.uku.constructor;\r\n\t                    var ukulele = new Uku_Clazz(); //new Ukulele();\r\n\t                    ukulele.parentUku = this.uku;\r\n\t                    var compDef = ukulele.parentUku._internal_getDefinitionManager().getComponentsDefinition();\r\n\t                    var compPool = ukulele.parentUku._internal_getDefinitionManager().getComponentsPool();\r\n\t                    ukulele._internal_getDefinitionManager().setComponentsDefinition(compDef);\r\n\t                    ukulele._internal_getDefinitionManager().setComponentsPool(compPool);\r\n\t                    var sibling = child.nextSibling;\r\n\t                    var itemType = typeof finalValue[j];\r\n\t                    if (itemType === \"object\") {\r\n\t                        ukulele.registerController(this.expression, finalValue[j]);\r\n\t                    }\r\n\t                    else {\r\n\t                        ukulele.registerController(this.expression, { 'value': finalValue[j] });\r\n\t                        var newOuterHtml = child.outerHTML.replace(new RegExp(this.expression, \"gm\"), this.expression + '.value');\r\n\t                        child.insertAdjacentHTML('afterend', newOuterHtml);\r\n\t                        var newItemDom = child.nextSibling;\r\n\t                        child.parentNode.removeChild(child);\r\n\t                        child = newItemDom;\r\n\t                    }\r\n\t                    ukulele._internal_dealWithElement(child);\r\n\t                    child = sibling;\r\n\t                }\r\n\t            }\r\n\t        }\r\n\t        if (this.element.tagName === \"OPTION\") {\r\n\t            var expression = this.parentElement.getAttribute(\"uku-selected\");\r\n\t            var tempArr = expression.split(\"|\");\r\n\t            expression = tempArr[0];\r\n\t            var key = tempArr[1];\r\n\t            var value = this.uku._internal_getDefinitionManager().getFinalValueByExpression(expression);\r\n\t            if (key) {\r\n\t                this.parentElement.value = value[key];\r\n\t            }\r\n\t            else {\r\n\t                this.parentElement.value = value;\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t    return BoundItemRepeat;\r\n\t}(BoundItemBase_1.BoundItemBase));\r\n\texports.BoundItemRepeat = BoundItemRepeat;\r\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar __extends = (this && this.__extends) || function (d, b) {\r\n\t    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n\t    function __() { this.constructor = d; }\r\n\t    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n\t};\r\n\tvar BoundItemBase_1 = __webpack_require__(18);\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar BoundItemComponentAttribute = (function (_super) {\r\n\t    __extends(BoundItemComponentAttribute, _super);\r\n\t    function BoundItemComponentAttribute(attrName, ukuTag, cc, uku) {\r\n\t        _super.call(this, attrName, null, uku);\r\n\t        this.ukuTag = ukuTag;\r\n\t        this.componentController = cc;\r\n\t    }\r\n\t    BoundItemComponentAttribute.prototype.render = function (controller) {\r\n\t        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n\t        this.componentController[this.ukuTag] = finalValue;\r\n\t        this.uku.refresh(this.componentController._alias);\r\n\t    };\r\n\t    return BoundItemComponentAttribute;\r\n\t}(BoundItemBase_1.BoundItemBase));\r\n\texports.BoundItemComponentAttribute = BoundItemComponentAttribute;\r\n\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar UkuleleUtil_1 = __webpack_require__(9);\r\n\tvar EventListener_1 = __webpack_require__(24);\r\n\tvar Selector_1 = __webpack_require__(10);\r\n\tfunction elementChangedBinder(element, tagName, controllerModel, handler, host) {\r\n\t    var elementStrategies = [inputTextCase, textareaCase, selectCase, checkboxCase, radioCase];\r\n\t    for (var i = 0; i < elementStrategies.length; i++) {\r\n\t        var func = elementStrategies[i];\r\n\t        var goon = func.apply(this, arguments);\r\n\t        if (goon) {\r\n\t            break;\r\n\t        }\r\n\t    }\r\n\t}\r\n\texports.elementChangedBinder = elementChangedBinder;\r\n\tfunction inputTextCase(element, tagName, controllerModel, handler, host) {\r\n\t    var elementName = element.tagName;\r\n\t    if (elementName === \"INPUT\" && isSupportInputType(element) && tagName === \"value\") {\r\n\t        var eventType = 'change';\r\n\t        var inputType = element.getAttribute('type');\r\n\t        if (inputType === \"text\") {\r\n\t            eventType = 'input';\r\n\t        }\r\n\t        EventListener_1.EventListener.addEventListener(element, eventType, function (e) {\r\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\r\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n\t            var temp = attr.split(\".\");\r\n\t            var finalInstance = controllerModel.controllerInstance;\r\n\t            for (var i = 0; i < temp.length - 1; i++) {\r\n\t                finalInstance = finalInstance[temp[i]];\r\n\t            }\r\n\t            finalInstance[temp[temp.length - 1]] = element.value;\r\n\t            if (handler) {\r\n\t                handler.call(host, controllerModel.alias, element);\r\n\t            }\r\n\t        });\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\tfunction isSupportInputType(element) {\r\n\t    var type = element.getAttribute(\"type\");\r\n\t    if (type !== \"checkbox\" && type !== \"radio\") {\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\tfunction textareaCase(element, tagName, controllerModel, handler, host) {\r\n\t    var elementName = element.tagName;\r\n\t    if (elementName === \"TEXTAREA\" && tagName === \"value\") {\r\n\t        EventListener_1.EventListener.addEventListener(element, 'input', function (e) {\r\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\r\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n\t            var temp = attr.split(\".\");\r\n\t            var finalInstance = controllerModel.controllerInstance;\r\n\t            for (var i = 0; i < temp.length - 1; i++) {\r\n\t                finalInstance = finalInstance[temp[i]];\r\n\t            }\r\n\t            finalInstance[temp[temp.length - 1]] = element.value;\r\n\t            if (handler) {\r\n\t                handler.call(host, controllerModel.alias, element);\r\n\t            }\r\n\t        });\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\tfunction selectCase(element, tagName, controllerModel, handler, host) {\r\n\t    var elementName = element.tagName;\r\n\t    if ((elementName === \"SELECT\" && tagName === \"selected\")) {\r\n\t        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\r\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\r\n\t            var key;\r\n\t            var tmpArr = attr.split(\"|\");\r\n\t            attr = tmpArr[0];\r\n\t            key = tmpArr[1];\r\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n\t            var temp = attr.split(\".\");\r\n\t            var finalInstance = controllerModel.controllerInstance;\r\n\t            for (var i = 0; i < temp.length - 1; i++) {\r\n\t                finalInstance = finalInstance[temp[i]];\r\n\t            }\r\n\t            var options = Selector_1.Selector.querySelectorAll(element, \"option\");\r\n\t            for (var j = 0; j < options.length; j++) {\r\n\t                var option = options[j];\r\n\t                if (option.selected) {\r\n\t                    var selectedItem = JSON.parse(option.getAttribute(\"data-item\"));\r\n\t                    finalInstance[temp[temp.length - 1]] = selectedItem;\r\n\t                }\r\n\t            }\r\n\t            if (handler) {\r\n\t                handler.call(host, controllerModel.alias, element);\r\n\t            }\r\n\t        });\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\tfunction checkboxCase(element, tagName, controllerModel, handler, host) {\r\n\t    var elementName = element.tagName;\r\n\t    if (elementName === \"INPUT\" && tagName === \"value\" && element.getAttribute(\"type\") === \"checkbox\") {\r\n\t        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\r\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\r\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n\t            var temp = attr.split(\".\");\r\n\t            var finalInstance = controllerModel.controllerInstance;\r\n\t            for (var i = 0; i < temp.length - 1; i++) {\r\n\t                finalInstance = finalInstance[temp[i]];\r\n\t            }\r\n\t            finalInstance[temp[temp.length - 1]] = element.checked;\r\n\t            if (handler) {\r\n\t                handler.call(host, controllerModel.alias, element);\r\n\t            }\r\n\t        });\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\tfunction radioCase(element, tagName, controllerModel, handler, host) {\r\n\t    var elementName = element.tagName;\r\n\t    if (elementName === \"INPUT\" && tagName === \"selected\" && element.getAttribute(\"type\") === \"radio\") {\r\n\t        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\r\n\t            var attr = element.getAttribute(\"uku-\" + tagName);\r\n\t            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n\t            var temp = attr.split(\".\");\r\n\t            var finalInstance = controllerModel.controllerInstance;\r\n\t            for (var i = 0; i < temp.length - 1; i++) {\r\n\t                finalInstance = finalInstance[temp[i]];\r\n\t            }\r\n\t            if (element.checked) {\r\n\t                finalInstance[temp[temp.length - 1]] = element.value;\r\n\t                if (handler) {\r\n\t                    handler.call(host, controllerModel.alias, element);\r\n\t                }\r\n\t            }\r\n\t        });\r\n\t        return true;\r\n\t    }\r\n\t    return false;\r\n\t}\r\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tvar EventListener = (function () {\r\n\t    function EventListener() {\r\n\t    }\r\n\t    EventListener.addEventListener = function (element, eventType, handler) {\r\n\t        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== undefined) {\r\n\t            return window['jQuery'](element).on(eventType, function (e) {\r\n\t                handler && handler(e);\r\n\t            });\r\n\t        }\r\n\t        else {\r\n\t            return element.addEventListener(eventType, handler);\r\n\t        }\r\n\t    };\r\n\t    return EventListener;\r\n\t}());\r\n\texports.EventListener = EventListener;\r\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** uku.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 21e711c11c1f451c92d3\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar EventEmitter_1 = require(\"./EventEmitter\");\r\nvar AsyncCaller_1 = require(\"../util/AsyncCaller\");\r\nvar DefinitionManager_1 = require(\"./DefinitionManager\");\r\nvar DirtyChecker_1 = require(\"./DirtyChecker\");\r\nvar Analyzer_1 = require(\"./Analyzer\");\r\nvar Selector_1 = require(\"../extend/Selector\");\r\nvar UkuEventType_1 = require(\"./UkuEventType\");\r\nvar Event_1 = require(\"./Event\");\r\nvar Ukulele = (function (_super) {\r\n    __extends(Ukulele, _super);\r\n    function Ukulele() {\r\n        _super.apply(this, arguments);\r\n        this.asyncCaller = new AsyncCaller_1.AsyncCaller();\r\n    }\r\n    Ukulele.prototype.init = function () {\r\n        var _this = this;\r\n        this.asyncCaller.exec(function () {\r\n            _this.manageApplication();\r\n        });\r\n    };\r\n    Ukulele.prototype.handleElement = function (element) {\r\n        var _this = this;\r\n        this.analyizeElement(element, function (e) {\r\n            _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.HANDLE_ELEMENT_COMPLETED, e));\r\n        });\r\n    };\r\n    Ukulele.prototype.registerController = function (instanceName, controllerInst) {\r\n        this._internal_getDefinitionManager().addControllerDefinition(instanceName, controllerInst);\r\n    };\r\n    Ukulele.prototype.getController = function (instanceName) {\r\n        return this._internal_getDefinitionManager().getControllerDefinition(instanceName).controllerInstance;\r\n    };\r\n    Ukulele.prototype.registerComponent = function (tag, templateUrl, preload) {\r\n        this._internal_getDefinitionManager().addComponentDefinition(tag, templateUrl, preload, this.asyncCaller);\r\n    };\r\n    Ukulele.prototype.getComponent = function (tagName) {\r\n        return this._internal_getDefinitionManager().getComponent(tagName);\r\n    };\r\n    Ukulele.prototype.getComponentController = function (componentId) {\r\n        return this._internal_getDefinitionManager().getControllerInstByDomId(componentId);\r\n    };\r\n    Ukulele.prototype.refresh = function (alias, excludeElement) {\r\n        if (!this.dirtyChecker) {\r\n            this.dirtyChecker = new DirtyChecker_1.DirtyChecker(this);\r\n        }\r\n        this.dirtyChecker.runDirtyChecking(alias, excludeElement);\r\n    };\r\n    //internal function\r\n    Ukulele.prototype._internal_getDefinitionManager = function () {\r\n        if (!this.defMgr) {\r\n            this.defMgr = new DefinitionManager_1.DefinitionManager(this);\r\n        }\r\n        return this.defMgr;\r\n    };\r\n    Ukulele.prototype._internal_dealWithElement = function (element) {\r\n        this.analyizeElement(element);\r\n    };\r\n    Ukulele.prototype.manageApplication = function () {\r\n        var _this = this;\r\n        var apps = Selector_1.Selector.querySelectorAll(document, \"[uku-application]\");\r\n        if (apps.length === 1) {\r\n            this.analyizeElement(apps[0], function (ele) {\r\n                _this.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.INITIALIZED, ele));\r\n            });\r\n        }\r\n        else {\r\n            throw new Error(\"Only one 'uku-application' can be declared in a whole html.\");\r\n        }\r\n    };\r\n    Ukulele.prototype.analyizeElement = function (element, callback) {\r\n        var anylyzer = new Analyzer_1.Analyzer(this);\r\n        // if(callback){\r\n        // \tanylyzer.addListener(Analyzer.ANALYIZE_COMPLETED,(e)=>{\r\n        // \t\tcallback(e.element);\r\n        // \t});\r\n        // }\r\n        if (callback) {\r\n            (function (retFunc) {\r\n                anylyzer.addListener(Analyzer_1.Analyzer.ANALYIZE_COMPLETED, function (e) {\r\n                    retFunc(e.element);\r\n                });\r\n            })(callback);\r\n        }\r\n        anylyzer.analyizeElement(element);\r\n    };\r\n    Ukulele.INITIALIZED = 'initialized';\r\n    Ukulele.REFRESH = 'refresh';\r\n    Ukulele.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\r\n    return Ukulele;\r\n}(EventEmitter_1.EventEmitter));\r\nexports.Ukulele = Ukulele;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/Ukulele.ts\n ** module id = 0\n ** module chunks = 0\n **/","\"use strict\";\r\nvar EventEmitter = (function () {\r\n    function EventEmitter() {\r\n        this.eventsPool = {};\r\n    }\r\n    EventEmitter.prototype.getEventsPool = function () {\r\n        return this.eventsPool;\r\n    };\r\n    EventEmitter.prototype.addListener = function (eventType, handler) {\r\n        if (!this.eventsPool[eventType]) {\r\n            this.eventsPool[eventType] = [];\r\n        }\r\n        this.eventsPool[eventType].push(handler);\r\n    };\r\n    EventEmitter.prototype.removeListener = function (eventType, handler) {\r\n        if (this.eventsPool[eventType]) {\r\n            for (var i = this.eventsPool[eventType].length - 1; i >= 0; i--) {\r\n                if (this.eventsPool[eventType][i] === handler) {\r\n                    this.eventsPool[eventType].splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.hasListener = function (eventType) {\r\n        if (this.eventsPool[eventType] && this.eventsPool[eventType].length > 0) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    EventEmitter.prototype.dispatchEvent = function (event) {\r\n        if (event && event.eventType) {\r\n            var handlers = this.eventsPool[event.eventType];\r\n            if (handlers) {\r\n                for (var i = 0; i < handlers.length; i++) {\r\n                    handlers[i].call(this, event);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return EventEmitter;\r\n}());\r\nexports.EventEmitter = EventEmitter;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/EventEmitter.ts\n ** module id = 1\n ** module chunks = 0\n **/","\"use strict\";\r\nvar FunctionObject = (function () {\r\n    function FunctionObject(_func, _argu) {\r\n        this.func = _func;\r\n        this.argu = _argu;\r\n    }\r\n    return FunctionObject;\r\n}());\r\nvar AsyncCaller = (function () {\r\n    function AsyncCaller() {\r\n        this.allTasksPool = [];\r\n        this.queueTasksPool = [];\r\n        this.execType = \"queue\";\r\n        this.errorMsg = \"Only one type of task can be executed at same time\";\r\n        Function.prototype.resolve = function (ac) {\r\n            ac.aysncFunRunOver.call(ac, this);\r\n        };\r\n    }\r\n    AsyncCaller.prototype.pushAll = function (asyncFunc, arguArr) {\r\n        if (this.queueTasksPool.length === 0) {\r\n            var funcObj = new FunctionObject(asyncFunc, arguArr);\r\n            this.allTasksPool.push(funcObj);\r\n        }\r\n        else {\r\n            console.error(this.errorMsg);\r\n        }\r\n        return this;\r\n    };\r\n    AsyncCaller.prototype.pushQueue = function (asyncFunc, arguArr) {\r\n        if (this.allTasksPool.length === 0) {\r\n            var funcObj = new FunctionObject(asyncFunc, arguArr);\r\n            this.queueTasksPool.push(funcObj);\r\n        }\r\n        else {\r\n            console.error(this.errorMsg);\r\n        }\r\n        return this;\r\n    };\r\n    AsyncCaller.prototype.aysncFunRunOver = function (caller) {\r\n        if (this.execType === \"queue\") {\r\n            if (this.queueTasksPool.length === 0) {\r\n                this.finalFunc && this.finalFunc();\r\n            }\r\n            else {\r\n                var funcObj = this.queueTasksPool[0];\r\n                this.queueTasksPool.shift();\r\n                funcObj.func.apply(funcObj, funcObj.argu);\r\n            }\r\n        }\r\n        else if (this.execType === \"all\") {\r\n            for (var i = 0; i < this.allTasksPool.length; i++) {\r\n                var task = this.allTasksPool[i];\r\n                if (caller === task.func) {\r\n                    this.allTasksPool.splice(i, 1);\r\n                    break;\r\n                }\r\n            }\r\n            if (this.allTasksPool.length === 0) {\r\n                this.finalFunc && this.finalFunc();\r\n            }\r\n        }\r\n    };\r\n    AsyncCaller.prototype.exec = function (callback) {\r\n        this.finalFunc = callback;\r\n        if (this.allTasksPool.length > 0) {\r\n            this.execType = \"all\";\r\n            this.executeAll();\r\n        }\r\n        else if (this.queueTasksPool.length > 0) {\r\n            this.execType = \"queue\";\r\n            this.executeQueue();\r\n        }\r\n        else {\r\n            this.finalFunc && this.finalFunc();\r\n        }\r\n    };\r\n    AsyncCaller.prototype.executeQueue = function () {\r\n        var funcObj = this.queueTasksPool[0];\r\n        this.queueTasksPool.shift();\r\n        funcObj.func.apply(funcObj, funcObj.argu);\r\n    };\r\n    ;\r\n    AsyncCaller.prototype.executeAll = function () {\r\n        for (var i = 0; i < this.allTasksPool.length; i++) {\r\n            var funcObj = this.allTasksPool[i];\r\n            funcObj.func.apply(funcObj, funcObj.argu);\r\n        }\r\n    };\r\n    ;\r\n    return AsyncCaller;\r\n}());\r\nexports.AsyncCaller = AsyncCaller;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/AsyncCaller.ts\n ** module id = 2\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ObjectUtil_1 = require(\"../util/ObjectUtil\");\r\nvar Ajax_1 = require(\"../extend/Ajax\");\r\nvar ControllerModel_1 = require(\"../model/ControllerModel\");\r\nvar AsyncCaller_1 = require(\"../util/AsyncCaller\");\r\nvar ComponentModel_1 = require(\"../model/ComponentModel\");\r\nvar ComponentPoolItem_1 = require(\"../model/ComponentPoolItem\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar DefinitionManager = (function () {\r\n    function DefinitionManager(_uku) {\r\n        this.controllersDefinition = {};\r\n        this.componentsDefinition = {};\r\n        this.componentsPool = {};\r\n        this.copyControllers = {};\r\n        this.dependentScriptsCache = {};\r\n        this.ajax = new Ajax_1.Ajax();\r\n        this.uku = _uku;\r\n    }\r\n    DefinitionManager.prototype.getComponentsDefinition = function () {\r\n        return this.componentsDefinition;\r\n    };\r\n    DefinitionManager.prototype.getComponentsPool = function () {\r\n        return this.componentsPool;\r\n    };\r\n    DefinitionManager.prototype.setComponentsPool = function (pool) {\r\n        this.componentsPool = pool;\r\n    };\r\n    DefinitionManager.prototype.setComponentsDefinition = function (value) {\r\n        this.componentsDefinition = value;\r\n    };\r\n    DefinitionManager.prototype.getComponentDefinition = function (tagName) {\r\n        return this.componentsDefinition[tagName];\r\n    };\r\n    DefinitionManager.prototype.getControllerDefinition = function (instanceName) {\r\n        return this.controllersDefinition[instanceName];\r\n    };\r\n    DefinitionManager.prototype.getControllersDefinition = function () {\r\n        return this.controllersDefinition;\r\n    };\r\n    DefinitionManager.prototype.getComponent = function (tagName) {\r\n        return this.componentsPool[tagName];\r\n    };\r\n    DefinitionManager.prototype.getCopyControllers = function () {\r\n        return this.copyControllers;\r\n    };\r\n    DefinitionManager.prototype.copyAllController = function () {\r\n        for (var alias in this.controllersDefinition) {\r\n            var controllerModel = this.controllersDefinition[alias];\r\n            var controller = controllerModel.controllerInstance;\r\n            this.copyControllerInstance(controller, alias);\r\n        }\r\n    };\r\n    DefinitionManager.prototype.copyControllerInstance = function (controller, alias) {\r\n        var previousCtrlInst = ObjectUtil_1.ObjectUtil.deepClone(controller);\r\n        delete this.copyControllers[alias];\r\n        this.copyControllers[alias] = previousCtrlInst;\r\n    };\r\n    DefinitionManager.prototype.addControllerDefinition = function (instanceName, controllerInst) {\r\n        var controllerModel = new ControllerModel_1.ControllerModel(instanceName, controllerInst);\r\n        controllerInst._alias = instanceName;\r\n        this.controllersDefinition[instanceName] = controllerModel;\r\n    };\r\n    DefinitionManager.prototype.getControllerInstByDomId = function (domId) {\r\n        for (var alias in this.controllersDefinition) {\r\n            var controllerModel = this.controllersDefinition[alias];\r\n            var controller = controllerModel.controllerInstance;\r\n            if (controller._dom && controller._dom.id === domId) {\r\n                return controller;\r\n            }\r\n        }\r\n        return undefined;\r\n    };\r\n    DefinitionManager.prototype.addComponentDefinition = function (tag, templateUrl, preload, asyncCaller) {\r\n        var _this = this;\r\n        if (!preload) {\r\n            this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, true);\r\n        }\r\n        else {\r\n            this.componentsPool[tag] = new ComponentPoolItem_1.ComponentPoolItem(tag, templateUrl, false);\r\n            ;\r\n            asyncCaller.pushAll(dealWithComponentConfig, [tag, templateUrl]);\r\n        }\r\n        function dealWithComponentConfig(tag, template) {\r\n            _this.ajax.get(templateUrl, function (result) {\r\n                var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\r\n                _this.analyizeComponent(tag, componentConfig, function () {\r\n                    dealWithComponentConfig.resolve(asyncCaller);\r\n                });\r\n            });\r\n        }\r\n    };\r\n    DefinitionManager.prototype.addLazyComponentDefinition = function (tag, templateUrl, callback) {\r\n        var _this = this;\r\n        this.ajax.get(templateUrl, function (result) {\r\n            var componentConfig = UkuleleUtil_1.UkuleleUtil.getComponentConfiguration(result);\r\n            _this.analyizeComponent(tag, componentConfig, function () {\r\n                _this.componentsPool[tag] = { 'tagName': tag, 'templateUrl': templateUrl, 'lazy': false };\r\n                callback();\r\n            });\r\n        });\r\n    };\r\n    DefinitionManager.prototype.getBoundAttributeValue = function (attr) {\r\n        var additionalArgu = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            additionalArgu[_i - 1] = arguments[_i];\r\n        }\r\n        var controllerModel = this.getBoundControllerModelByName(attr);\r\n        var controllerInst = controllerModel.controllerInstance;\r\n        //let result = UkuleleUtil.getFinalValue(this.uku, controllerInst, attr, additionalArgu);\r\n        var parameters = [this.uku, controllerInst, attr];\r\n        parameters = parameters.concat(additionalArgu);\r\n        var result = UkuleleUtil_1.UkuleleUtil.getFinalValue.apply(null, parameters);\r\n        return result;\r\n    };\r\n    ;\r\n    DefinitionManager.prototype.getControllerModelByName = function (expression) {\r\n        return this.getBoundControllerModelByName(expression);\r\n    };\r\n    ;\r\n    DefinitionManager.prototype.getFinalValueByExpression = function (expression) {\r\n        var controller = this.getControllerModelByName(expression).controllerInstance;\r\n        return UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, expression);\r\n    };\r\n    ;\r\n    DefinitionManager.prototype.getBoundControllerModelByName = function (attrName) {\r\n        var instanceName = UkuleleUtil_1.UkuleleUtil.getBoundModelInstantName(attrName);\r\n        var controllerModel = this.controllersDefinition[instanceName];\r\n        if (!controllerModel) {\r\n            var tempArr = attrName.split(\".\");\r\n            var isParentScope = tempArr[0];\r\n            if (isParentScope === \"parent\" && this.uku.parentUku) {\r\n                tempArr.shift();\r\n                attrName = tempArr.join(\".\");\r\n                return this.uku.parentUku._internal_getDefinitionManager().getControllerModelByName(attrName);\r\n            }\r\n        }\r\n        return controllerModel;\r\n    };\r\n    DefinitionManager.prototype.analyizeComponent = function (tag, config, callback) {\r\n        var _this = this;\r\n        var deps = config.dependentScripts;\r\n        var self = this;\r\n        if (deps && deps.length > 0) {\r\n            var ac = new AsyncCaller_1.AsyncCaller();\r\n            var tmpAMD_1;\r\n            if (typeof window['define'] === 'function' && window['define'].amd) {\r\n                tmpAMD_1 = window['define'];\r\n                window['define'] = undefined;\r\n            }\r\n            for (var i = 0; i < deps.length; i++) {\r\n                var dep = deps[i];\r\n                ac.pushAll(loadDependentScript, [ac, dep]);\r\n            }\r\n            ac.exec(function () {\r\n                if (tmpAMD_1) {\r\n                    window['define'] = tmpAMD_1;\r\n                }\r\n                _this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\r\n                callback();\r\n            });\r\n        }\r\n        else {\r\n            this.buildeComponentModel(tag, config.template, config.componentControllerScript, config.stylesheet);\r\n            callback();\r\n        }\r\n        function loadDependentScript(ac, src) {\r\n            if (!self.dependentScriptsCache[src]) {\r\n                var head = document.getElementsByTagName('HEAD')[0];\r\n                var script = document.createElement('script');\r\n                script.type = 'text/javascript';\r\n                script.charset = 'utf-8';\r\n                script.async = true;\r\n                script.src = src;\r\n                script.onload = function (e) {\r\n                    self.dependentScriptsCache[e.target['src']] = true;\r\n                    loadDependentScript.resolve(ac);\r\n                };\r\n                head.appendChild(script);\r\n            }\r\n            else {\r\n                loadDependentScript.resolve(ac);\r\n            }\r\n        }\r\n    };\r\n    DefinitionManager.prototype.buildeComponentModel = function (tag, template, script, style) {\r\n        var debugComment = \"//# sourceURL=\" + tag + \".js\";\r\n        try {\r\n            var controllerClazz = void 0;\r\n            if (script) {\r\n                script += debugComment;\r\n                controllerClazz = eval(script);\r\n            }\r\n            var newComp = new ComponentModel_1.ComponentModel(tag, template, controllerClazz);\r\n            this.componentsDefinition[tag] = newComp;\r\n            if (style) {\r\n                dealWithShadowStyle(tag, style);\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n        }\r\n        function dealWithShadowStyle(tagName, stylesheet) {\r\n            var head = document.getElementsByTagName('HEAD')[0];\r\n            var style = document.createElement('style');\r\n            style.type = 'text/css';\r\n            var styleArray = stylesheet.split(\"}\");\r\n            var newArray = [];\r\n            styleArray.forEach(function (value, index) {\r\n                var newValue = value.replace(/^\\s*/, \"\");\r\n                if (newValue) {\r\n                    newArray.push(newValue);\r\n                }\r\n            });\r\n            stylesheet = newArray.join(\"}\\n\" + \".\" + tagName + \" \");\r\n            stylesheet = \".\" + tagName + \" \" + stylesheet + \"}\";\r\n            style.innerHTML = stylesheet;\r\n            head.appendChild(style);\r\n        }\r\n    };\r\n    return DefinitionManager;\r\n}());\r\nexports.DefinitionManager = DefinitionManager;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/DefinitionManager.ts\n ** module id = 3\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ObjectUtil = (function () {\r\n    function ObjectUtil() {\r\n    }\r\n    ObjectUtil.isArray = function (obj) {\r\n        return Object.prototype.toString.call(obj) === '[object Array]';\r\n    };\r\n    ObjectUtil.getType = function (obj) {\r\n        var type = typeof (obj);\r\n        if (type === \"object\") {\r\n            if (ObjectUtil.isArray(obj)) {\r\n                return \"array\";\r\n            }\r\n            else {\r\n                return type;\r\n            }\r\n        }\r\n        else {\r\n            return type;\r\n        }\r\n    };\r\n    ObjectUtil.compare = function (objA, objB) {\r\n        var type = ObjectUtil.getType(objA);\r\n        var typeB = ObjectUtil.getType(objB);\r\n        var result = true;\r\n        if (type !== typeB) {\r\n            return false;\r\n        }\r\n        else {\r\n            switch (type) {\r\n                case \"object\":\r\n                    for (var key in objA) {\r\n                        var valuA = objA[key];\r\n                        var valuB = objB[key];\r\n                        var isEqual = ObjectUtil.compare(valuA, valuB);\r\n                        if (!isEqual) {\r\n                            result = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    break;\r\n                case \"array\":\r\n                    if (objA.length === objB.length) {\r\n                        for (var i = 0; i < objA.length; i++) {\r\n                            var itemA = objA[i];\r\n                            var itemB = objB[i];\r\n                            var isEqual2 = ObjectUtil.compare(itemA, itemB);\r\n                            if (!isEqual2) {\r\n                                result = false;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        result = false;\r\n                    }\r\n                    break;\r\n                case \"function\":\r\n                    result = objA.toString() === objB.toString();\r\n                    break;\r\n                default:\r\n                    result = objA === objB;\r\n                    break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n    ObjectUtil.deepClone = function (obj) {\r\n        var o;\r\n        var i;\r\n        var j;\r\n        if (typeof (obj) !== \"object\" || obj === null) {\r\n            return obj;\r\n        }\r\n        if (obj instanceof (Array)) {\r\n            o = [];\r\n            i = 0;\r\n            j = obj.length;\r\n            for (; i < j; i++) {\r\n                if (typeof (obj[i]) === \"object\" && obj[i] !== null) {\r\n                    o[i] = ObjectUtil.deepClone(obj[i]);\r\n                }\r\n                else {\r\n                    o[i] = obj[i];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            o = {};\r\n            for (i in obj) {\r\n                if (typeof (obj[i]) === \"object\" && obj[i] !== null && i !== \"_dom\") {\r\n                    o[i] = ObjectUtil.deepClone(obj[i]);\r\n                }\r\n                else {\r\n                    o[i] = obj[i];\r\n                }\r\n            }\r\n        }\r\n        return o;\r\n    };\r\n    return ObjectUtil;\r\n}());\r\nexports.ObjectUtil = ObjectUtil;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/ObjectUtil.ts\n ** module id = 4\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Ajax = (function () {\r\n    function Ajax() {\r\n    }\r\n    Ajax.prototype.get = function (url, success, error) {\r\n        var request = new XMLHttpRequest();\r\n        request.onreadystatechange = function () {\r\n            if (request.readyState === 4) {\r\n                if (request.status === 200) {\r\n                    success(request.responseText);\r\n                }\r\n                else {\r\n                    if (error) {\r\n                        error();\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        request.open(\"GET\", url, true);\r\n        request.send(null);\r\n    };\r\n    return Ajax;\r\n}());\r\nexports.Ajax = Ajax;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/extend/Ajax.ts\n ** module id = 5\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ControllerModel = (function () {\r\n    function ControllerModel(alias, ctrlInst) {\r\n        this.alias = alias;\r\n        this.controllerInstance = ctrlInst;\r\n        this.boundItems = [];\r\n    }\r\n    ControllerModel.prototype.addBoundItem = function (boundItem) {\r\n        this.boundItems.push(boundItem);\r\n    };\r\n    ControllerModel.prototype.getBoundItemsByName = function (name) {\r\n        var tempBoundItems = [];\r\n        for (var i = 0; i < this.boundItems.length; i++) {\r\n            var boundItem = this.boundItems[i];\r\n            if (boundItem.attributeName === name) {\r\n                tempBoundItems.push(boundItem);\r\n            }\r\n        }\r\n        return tempBoundItems;\r\n    };\r\n    return ControllerModel;\r\n}());\r\nexports.ControllerModel = ControllerModel;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/ControllerModel.ts\n ** module id = 6\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ComponentModel = (function () {\r\n    function ComponentModel(tagName, template, clazz) {\r\n        this.tagName = tagName;\r\n        this.template = template;\r\n        this.controllerClazz = clazz;\r\n    }\r\n    return ComponentModel;\r\n}());\r\nexports.ComponentModel = ComponentModel;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/ComponentModel.ts\n ** module id = 7\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ComponentPoolItem = (function () {\r\n    function ComponentPoolItem(_tagName, _templateUrl, _lazy) {\r\n        this.tagName = _tagName;\r\n        this.templateUrl = _templateUrl;\r\n        this.lazy = _lazy;\r\n    }\r\n    return ComponentPoolItem;\r\n}());\r\nexports.ComponentPoolItem = ComponentPoolItem;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/ComponentPoolItem.ts\n ** module id = 8\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Selector_1 = require(\"../extend/Selector\");\r\nvar ArgumentUtil_1 = require(\"./ArgumentUtil\");\r\nvar ComponentConfiguration_1 = require(\"../model/ComponentConfiguration\");\r\nvar ValueAndParent = (function () {\r\n    function ValueAndParent(_value, _parant) {\r\n        this.value = _value;\r\n        this.parent = _parant;\r\n    }\r\n    return ValueAndParent;\r\n}());\r\nvar UkuleleUtil = (function () {\r\n    function UkuleleUtil() {\r\n    }\r\n    UkuleleUtil.getFinalAttribute = function (expression) {\r\n        var temp = expression.split(\".\");\r\n        var isParent = temp.shift();\r\n        if (isParent === \"parent\") {\r\n            return UkuleleUtil.getFinalAttribute(temp.join(\".\"));\r\n        }\r\n        return temp.join(\".\");\r\n    };\r\n    UkuleleUtil.searchHtmlTag = function (htmlString, tagName) {\r\n        var reTemp = \"^<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">$\";\r\n        var re = new RegExp(reTemp);\r\n        var index = htmlString.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.getInnerHtml = function (htmlString, tagName) {\r\n        var reTemp = \"<\" + tagName + \"[\\\\s\\\\S]*>\" + \"[\\\\s\\\\S]*</\" + tagName + \">\";\r\n        var re = new RegExp(reTemp);\r\n        var match = htmlString.match(re);\r\n        if (match.index > -1) {\r\n            var matchString = match[0];\r\n            var index = matchString.search(\">\");\r\n            var tempString = matchString.substr(index + 1);\r\n            var index2 = tempString.lastIndexOf(\"</\");\r\n            tempString = tempString.substring(0, index2);\r\n            tempString = tempString.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n            console.log(tempString);\r\n            return tempString;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    };\r\n    UkuleleUtil.getComponentConfiguration = function (htmlString) {\r\n        var tempDom = document.createElement(\"div\");\r\n        tempDom.innerHTML = htmlString;\r\n        var tpl = Selector_1.Selector.querySelectorAll(tempDom, \"template\");\r\n        var scripts = Selector_1.Selector.querySelectorAll(tempDom, \"script\");\r\n        var stylesheet = Selector_1.Selector.querySelectorAll(tempDom, \"style\");\r\n        var deps = [];\r\n        var ccs = null;\r\n        for (var i = 0; i < scripts.length; i++) {\r\n            var script = scripts[i];\r\n            if (script.src !== \"\") {\r\n                deps.push(script.src);\r\n            }\r\n            else {\r\n                ccs = script.innerHTML;\r\n            }\r\n        }\r\n        if (stylesheet && stylesheet[0]) {\r\n            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs, stylesheet[0].innerHTML);\r\n        }\r\n        else {\r\n            return new ComponentConfiguration_1.ComponentConfiguration(tpl[0].innerHTML, deps, ccs);\r\n        }\r\n    };\r\n    UkuleleUtil.searchUkuAttrTag = function (htmlString) {\r\n        var re = /^uku\\-.*/;\r\n        var index = htmlString.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.getAttrFromUkuTag = function (ukuTag, camelCase) {\r\n        if (camelCase === void 0) { camelCase = false; }\r\n        if (UkuleleUtil.searchUkuAttrTag(ukuTag) === 0) {\r\n            ukuTag = ukuTag.replace('uku-', '');\r\n        }\r\n        if (camelCase) {\r\n            var names = ukuTag.split('-');\r\n            ukuTag = names[0];\r\n            for (var i = 1; i < names.length; i++) {\r\n                var firstLetter = names[i].charAt(0).toUpperCase();\r\n                ukuTag = ukuTag + firstLetter + names[i].substr(1);\r\n            }\r\n        }\r\n        return ukuTag;\r\n    };\r\n    UkuleleUtil.searchUkuExpTag = function (expression) {\r\n        var re = /^\\{\\{.*\\}\\}$/;\r\n        var index = expression.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.searchUkuFuncArg = function (htmlString) {\r\n        var re = /\\(.*\\)$/;\r\n        var index = htmlString.search(re);\r\n        return index;\r\n    };\r\n    UkuleleUtil.isRepeat = function (element) {\r\n        if (element.getAttribute(\"uku-repeat\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    UkuleleUtil.isInRepeat = function (element) {\r\n        var parents = Selector_1.Selector.parents(element);\r\n        for (var i = 0; i < parents.length; i++) {\r\n            var parent_1 = parents[i];\r\n            if (parent_1.nodeType !== 9) {\r\n                var b = parent_1.getAttribute(\"uku-repeat\");\r\n                if (b) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    UkuleleUtil.getBoundModelInstantName = function (expression) {\r\n        var controlInstName = expression.split('.')[0];\r\n        if (controlInstName) {\r\n            return controlInstName;\r\n        }\r\n        return undefined;\r\n    };\r\n    UkuleleUtil.getAttributeFinalValue = function (object, attrName) {\r\n        var valueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, attrName);\r\n        var value = valueObject.value;\r\n        return value;\r\n    };\r\n    UkuleleUtil.getAttributeFinalValueAndParent = function (object, attrName) {\r\n        var finalValue = object;\r\n        var parentValue;\r\n        if (typeof attrName === \"string\") {\r\n            var attrValue = UkuleleUtil.getFinalAttribute(attrName);\r\n            var temp = attrValue.split(\".\");\r\n            if (attrValue !== \"\" && finalValue) {\r\n                for (var i = 0; i < temp.length; i++) {\r\n                    var property = temp[i];\r\n                    parentValue = finalValue;\r\n                    finalValue = finalValue[property];\r\n                    if (finalValue === undefined || finalValue === null) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (object.hasOwnProperty(\"_alias\") && object._alias === attrName) {\r\n                    finalValue = object;\r\n                }\r\n                else {\r\n                    finalValue = attrName;\r\n                }\r\n            }\r\n        }\r\n        return new ValueAndParent(finalValue, parentValue);\r\n    };\r\n    UkuleleUtil.getFinalValue = function (uku, object, attrName) {\r\n        var additionalArgu = [];\r\n        for (var _i = 3; _i < arguments.length; _i++) {\r\n            additionalArgu[_i - 3] = arguments[_i];\r\n        }\r\n        var index = -1;\r\n        if (typeof attrName === \"string\") {\r\n            index = UkuleleUtil.searchUkuFuncArg(attrName);\r\n        }\r\n        if (index === -1) {\r\n            //is attribute\r\n            return UkuleleUtil.getAttributeFinalValue(object, attrName);\r\n        }\r\n        else {\r\n            //is function\r\n            var functionName = attrName.substring(0, index);\r\n            var finalValueObject = UkuleleUtil.getAttributeFinalValueAndParent(object, functionName);\r\n            var finalValue = finalValueObject.value;\r\n            if (finalValue === undefined) {\r\n                return finalValue;\r\n            }\r\n            var new_arguments = [];\r\n            var _argumentsString = attrName.substring(index + 1, attrName.length - 1);\r\n            if (_argumentsString !== \"\") {\r\n                var _arguments = ArgumentUtil_1.ArgumentUtil.analyze(_argumentsString, uku);\r\n                for (var i = 0; i < _arguments.length; i++) {\r\n                    var temp = void 0;\r\n                    var argument = _arguments[i];\r\n                    var argType = typeof argument;\r\n                    var controllerModel = null;\r\n                    if (argType === \"string\") {\r\n                        controllerModel = uku._internal_getDefinitionManager().getControllerModelByName(argument);\r\n                        if (controllerModel && controllerModel.controllerInstance) {\r\n                            var agrumentInst = controllerModel.controllerInstance;\r\n                            if (argument.split(\".\").length === 1) {\r\n                                temp = agrumentInst;\r\n                            }\r\n                            else {\r\n                                temp = UkuleleUtil.getFinalValue(uku, agrumentInst, argument);\r\n                            }\r\n                        }\r\n                        else {\r\n                            temp = UkuleleUtil.getFinalValue(uku, object, argument);\r\n                        }\r\n                        new_arguments.push(temp);\r\n                    }\r\n                    else {\r\n                        new_arguments.push(argument);\r\n                    }\r\n                }\r\n            }\r\n            if (additionalArgu) {\r\n                var additionalArguArray = Array.prototype.slice.call(additionalArgu);\r\n                new_arguments = new_arguments.concat(additionalArguArray);\r\n            }\r\n            finalValue = finalValue.apply(finalValueObject.parent, new_arguments);\r\n            return finalValue;\r\n        }\r\n    };\r\n    return UkuleleUtil;\r\n}());\r\nexports.UkuleleUtil = UkuleleUtil;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/UkuleleUtil.ts\n ** module id = 9\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Selector = (function () {\r\n    function Selector() {\r\n    }\r\n    Selector.querySelectorAll = function (element, query) {\r\n        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== \"undefined\") {\r\n            return window['jQuery'](element).find(query);\r\n        }\r\n        else {\r\n            return element.querySelectorAll(query);\r\n        }\r\n    };\r\n    Selector.fuzzyFind = function (element, text) {\r\n        if (element && element.attributes) {\r\n            for (var i = 0; i < element.attributes.length; i++) {\r\n                var attr = element.attributes[i];\r\n                if (attr.nodeName.search(text) > -1) {\r\n                    return element;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    Selector.directText = function (element, text) {\r\n        var o = \"\";\r\n        var nodes = element.childNodes;\r\n        for (var i = 0; i <= nodes.length - 1; i++) {\r\n            var node = nodes[i];\r\n            if (node.nodeType === 3) {\r\n                if (text || text === \"\" || text === 0 || text === false) {\r\n                    node.nodeValue = text;\r\n                    return;\r\n                }\r\n                else {\r\n                    o += node.nodeValue;\r\n                }\r\n            }\r\n        }\r\n        return o.trim();\r\n    };\r\n    Selector.parents = function (element) {\r\n        var parents = [];\r\n        while (element.parentNode && element.parentNode.tagName !== 'BODY') {\r\n            parents.push(element.parentNode);\r\n            element = element.parentNode;\r\n        }\r\n        return parents;\r\n    };\r\n    return Selector;\r\n}());\r\nexports.Selector = Selector;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/extend/Selector.ts\n ** module id = 10\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ArgumentUtil = (function () {\r\n    function ArgumentUtil() {\r\n    }\r\n    ArgumentUtil.analyze = function (argumentString, uku) {\r\n        //let re:RegExp = /^\\{\\{.*\\}\\}$/;\r\n        argumentString = argumentString.replace(/'/g, '\"');\r\n        var tempArr = argumentString.split(\",\");\r\n        for (var i = 0; i < tempArr.length; i++) {\r\n            var arr = tempArr[i];\r\n            for (var alias in uku._internal_getDefinitionManager().getControllersDefinition()) {\r\n                var index = arr.search(alias);\r\n                var index2 = arr.search(\"parent.\");\r\n                if (index > -1 || index2 > -1) {\r\n                    tempArr[i] = '\"' + arr + '\"';\r\n                }\r\n            }\r\n        }\r\n        argumentString = tempArr.join(\",\");\r\n        argumentString = '[' + argumentString + ']';\r\n        try {\r\n            var jsonArr = JSON.parse(argumentString);\r\n            return jsonArr;\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            return null;\r\n        }\r\n    };\r\n    return ArgumentUtil;\r\n}());\r\nexports.ArgumentUtil = ArgumentUtil;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/util/ArgumentUtil.ts\n ** module id = 11\n ** module chunks = 0\n **/","\"use strict\";\r\nvar ComponentConfiguration = (function () {\r\n    function ComponentConfiguration(_template, _dependentScripts, _componentControllerScript, _stylesheet) {\r\n        if (_stylesheet === void 0) { _stylesheet = undefined; }\r\n        this.template = _template;\r\n        this.dependentScripts = _dependentScripts;\r\n        this.componentControllerScript = _componentControllerScript;\r\n        this.stylesheet = _stylesheet;\r\n    }\r\n    return ComponentConfiguration;\r\n}());\r\nexports.ComponentConfiguration = ComponentConfiguration;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/ComponentConfiguration.ts\n ** module id = 12\n ** module chunks = 0\n **/","\"use strict\";\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar ObjectUtil_1 = require(\"../util/ObjectUtil\");\r\nvar UkuEventType_1 = require(\"./UkuEventType\");\r\nvar Event_1 = require(\"./Event\");\r\nvar DirtyChecker = (function () {\r\n    function DirtyChecker(_uku) {\r\n        this.uku = _uku;\r\n        this.defMgr = this.uku._internal_getDefinitionManager();\r\n    }\r\n    DirtyChecker.prototype.runDirtyChecking = function (ctrlAliasName, excludeElement) {\r\n        var _this = this;\r\n        if (ctrlAliasName) {\r\n            if (typeof (ctrlAliasName) === \"string\") {\r\n                watchController(ctrlAliasName);\r\n            }\r\n            else if (ObjectUtil_1.ObjectUtil.isArray(ctrlAliasName)) {\r\n                for (var i = 0; i < ctrlAliasName.length; i++) {\r\n                    watchController(ctrlAliasName[i]);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var alias in this.defMgr.getControllersDefinition()) {\r\n                watchController(alias);\r\n            }\r\n        }\r\n        function watchController(alias) {\r\n            var controllerModel = _this.defMgr.getControllersDefinition()[alias];\r\n            if (!controllerModel) {\r\n                if (_this.uku.parentUku) {\r\n                    _this.uku.parentUku.refresh(alias);\r\n                }\r\n                return;\r\n            }\r\n            var controller = controllerModel.controllerInstance;\r\n            var previousCtrlModel = _this.defMgr.getCopyControllers()[alias];\r\n            var changedElementCount = 0;\r\n            for (var i = 0; i < controllerModel.boundItems.length; i++) {\r\n                var boundItem = controllerModel.boundItems[i];\r\n                var attrName = boundItem.attributeName;\r\n                if (attrName.search('parent.') > -1) {\r\n                    return;\r\n                }\r\n                if (previousCtrlModel) {\r\n                    if (boundItem.hasOwnProperty('ukuTag') && boundItem['ukuTag'] === \"selected\") {\r\n                        attrName = attrName.split(\"|\")[0];\r\n                    }\r\n                    var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, controller, attrName);\r\n                    var previousFinalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(_this.uku, previousCtrlModel, attrName);\r\n                    if (!ObjectUtil_1.ObjectUtil.compare(previousFinalValue, finalValue)) {\r\n                        attrName = boundItem.attributeName;\r\n                        var changedBoundItems = controllerModel.getBoundItemsByName(attrName);\r\n                        for (var j = 0; j < changedBoundItems.length; j++) {\r\n                            var changedBoundItem = changedBoundItems[j];\r\n                            if (changedBoundItem.element !== excludeElement || (boundItem.hasOwnProperty('ukuTag') && changedBoundItem['ukuTag'] !== \"value\")) {\r\n                                changedElementCount++;\r\n                                changedBoundItem.render(controller);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (changedElementCount > 0 && _this.uku.hasListener(UkuEventType_1.UkuEventType.REFRESH)) {\r\n                _this.uku.dispatchEvent(new Event_1.Event(UkuEventType_1.UkuEventType.REFRESH));\r\n            }\r\n            _this.defMgr.copyControllerInstance(controller, alias);\r\n        }\r\n    };\r\n    ;\r\n    return DirtyChecker;\r\n}());\r\nexports.DirtyChecker = DirtyChecker;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/DirtyChecker.ts\n ** module id = 13\n ** module chunks = 0\n **/","\"use strict\";\r\nvar UkuEventType = (function () {\r\n    function UkuEventType() {\r\n    }\r\n    UkuEventType.INITIALIZED = 'initialized';\r\n    UkuEventType.REFRESH = 'refresh';\r\n    UkuEventType.HANDLE_ELEMENT_COMPLETED = \"handle_element_completed\";\r\n    return UkuEventType;\r\n}());\r\nexports.UkuEventType = UkuEventType;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/UkuEventType.ts\n ** module id = 14\n ** module chunks = 0\n **/","\"use strict\";\r\nvar Event = (function () {\r\n    function Event(_eventType, _element) {\r\n        this.eventType = _eventType;\r\n        this.element = _element;\r\n    }\r\n    return Event;\r\n}());\r\nexports.Event = Event;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/Event.ts\n ** module id = 15\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar EventEmitter_1 = require(\"./EventEmitter\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar AsyncCaller_1 = require(\"../util/AsyncCaller\");\r\nvar BoundItemAttribute_1 = require('../model/BoundItemAttribute');\r\nvar BoundItemExpression_1 = require('../model/BoundItemExpression');\r\nvar BoundItemInnerText_1 = require('../model/BoundItemInnerText');\r\nvar BoundItemRepeat_1 = require('../model/BoundItemRepeat');\r\nvar BoundItemComponentAttribute_1 = require(\"../model/BoundItemComponentAttribute\");\r\nvar ElementActionBinder_1 = require(\"./ElementActionBinder\");\r\nvar EventListener_1 = require(\"../extend/EventListener\");\r\nvar Selector_1 = require(\"../extend/Selector\");\r\nvar Event_1 = require(\"./Event\");\r\nvar Analyzer = (function (_super) {\r\n    __extends(Analyzer, _super);\r\n    function Analyzer(_uku) {\r\n        _super.call(this);\r\n        //处理绑定的attribute\r\n        this.dealWithAttribute = function (element, tagName) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            //let elementName = element.tagName;\r\n            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n            if (controllerModel) {\r\n                var boundItem = new BoundItemAttribute_1.BoundItemAttribute(attr, tagName, element, this.uku);\r\n                controllerModel.addBoundItem(boundItem);\r\n                boundItem.render(controllerModel.controllerInstance);\r\n                ElementActionBinder_1.elementChangedBinder(element, tagName, controllerModel, this.uku.refresh, this.uku);\r\n            }\r\n        };\r\n        this.uku = _uku;\r\n        this.defMgr = this.uku._internal_getDefinitionManager();\r\n    }\r\n    //解析html中各个uku的tag\r\n    Analyzer.prototype.analyizeElement = function (ele) {\r\n        var _this = this;\r\n        this.searchComponent(ele, function (element) {\r\n            var subElements = [];\r\n            //scan element which has uku-* tag\r\n            var isSelfHasUkuTag = Selector_1.Selector.fuzzyFind(element, 'uku-');\r\n            if (isSelfHasUkuTag) {\r\n                subElements.push(isSelfHasUkuTag);\r\n            }\r\n            var allChildren = Selector_1.Selector.querySelectorAll(element, \"*\");\r\n            for (var i = 0; i < allChildren.length; i++) {\r\n                var child = allChildren[i];\r\n                var matchElement = Selector_1.Selector.fuzzyFind(child, 'uku-');\r\n                if (matchElement && !UkuleleUtil_1.UkuleleUtil.isInRepeat(matchElement)) {\r\n                    subElements.push(matchElement);\r\n                }\r\n            }\r\n            _this.searchExpression(element);\r\n            //解析绑定 attribute，注册event\r\n            for (var n = 0; n < subElements.length; n++) {\r\n                var subElement = subElements[n];\r\n                var orderAttrs = _this.sortAttributes(subElement);\r\n                for (var j = 0; j < orderAttrs.length; j++) {\r\n                    var attribute = orderAttrs[j];\r\n                    if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attribute.nodeName) > -1) {\r\n                        var tempArr = attribute.nodeName.split('-');\r\n                        tempArr.shift();\r\n                        var attrName = tempArr.join('-');\r\n                        if (attrName !== \"application\") {\r\n                            if (attrName.search('on') === 0) {\r\n                                //is an event\r\n                                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\r\n                                    _this.dealWithEvent(subElement, attrName);\r\n                                }\r\n                            }\r\n                            else if (attrName.search('repeat') !== -1) {\r\n                                //is an repeat\r\n                                _this.dealWithRepeat(subElement);\r\n                            }\r\n                            else {\r\n                                //is an attribute\r\n                                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(subElement) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(subElement)) {\r\n                                    if (attrName !== \"text\") {\r\n                                        _this.dealWithAttribute(subElement, attrName);\r\n                                    }\r\n                                    else {\r\n                                        _this.dealWithInnerText(subElement);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            _this.defMgr.copyAllController();\r\n            if (_this.hasListener(Analyzer.ANALYIZE_COMPLETED)) {\r\n                _this.dispatchEvent(new Event_1.Event(Analyzer.ANALYIZE_COMPLETED, element));\r\n            }\r\n        });\r\n    };\r\n    Analyzer.prototype.sortAttributes = function (subElement) {\r\n        var orderAttrs = [];\r\n        for (var i = 0; i < subElement.attributes.length; i++) {\r\n            var attribute = subElement.attributes[i];\r\n            if (attribute.nodeName.search(\"uku-on\") !== -1) {\r\n                orderAttrs.push(attribute);\r\n            }\r\n            else {\r\n                orderAttrs.unshift(attribute);\r\n            }\r\n        }\r\n        return orderAttrs;\r\n    };\r\n    Analyzer.prototype.searchComponent = function (element, callback) {\r\n        var _this = this;\r\n        var comp = this.defMgr.getComponent(element.localName);\r\n        if (comp) {\r\n            if (!comp.lazy) {\r\n                var attrs = element.attributes;\r\n                var compDef = this.defMgr.getComponentsDefinition()[comp.tagName];\r\n                if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n                    this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs, function (compElement) {\r\n                        callback && callback(compElement);\r\n                    });\r\n                }\r\n                else {\r\n                    callback && callback(element);\r\n                }\r\n            }\r\n            else {\r\n                this.defMgr.addLazyComponentDefinition(comp.tagName, comp.templateUrl, function () {\r\n                    var attrs = element.attributes;\r\n                    var compDef = _this.defMgr.getComponentsDefinition()[comp.tagName];\r\n                    if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n                        _this.dealWithComponent(element, compDef.template, compDef.controllerClazz, attrs, function (compElement) {\r\n                            callback && callback(compElement);\r\n                        });\r\n                    }\r\n                    else {\r\n                        callback && callback(element);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (element.children && element.children.length > 0) {\r\n                var ac_1 = new AsyncCaller_1.AsyncCaller();\r\n                for (var i = 0; i < element.children.length; i++) {\r\n                    var child = element.children[i];\r\n                    ac_1.pushQueue(this.searchComponent.bind(this), [child, function () {\r\n                            _this.searchComponent.resolve(ac_1);\r\n                        }]);\r\n                }\r\n                ac_1.exec(function () {\r\n                    callback && callback(element);\r\n                });\r\n            }\r\n            else {\r\n                callback && callback(element);\r\n            }\r\n        }\r\n    };\r\n    Analyzer.prototype.dealWithComponent = function (tag, template, Clazz, attrs, callback) {\r\n        var _this = this;\r\n        var randomAlias = 'cc_' + Math.floor(10000 * Math.random()).toString();\r\n        template = template.replace(new RegExp(\"\\'cc\\\\.\", 'gm'), \"'\" + randomAlias + '.');\r\n        template = template.replace(new RegExp('\"cc\\\\.', 'gm'), '\"' + randomAlias + '.');\r\n        template = template.replace(new RegExp('\\{\\{cc\\\\.', 'gm'), \"{{\" + randomAlias + '.');\r\n        template = template.replace(new RegExp(' cc\\\\.', 'gm'), ' ' + randomAlias + '.');\r\n        template = template.replace(new RegExp('\\\\.cc\\\\.', 'gm'), '.' + randomAlias + '.');\r\n        var tempFragment = document.createElement('div');\r\n        tempFragment.insertAdjacentHTML('afterBegin', template);\r\n        if (tempFragment.children.length > 1) {\r\n            template = tempFragment.outerHTML;\r\n        }\r\n        tag.insertAdjacentHTML('beforeBegin', template);\r\n        var htmlDom = tag.previousElementSibling;\r\n        htmlDom.classList.add(tag.localName);\r\n        var cc;\r\n        if (Clazz) {\r\n            cc = new Clazz(this.uku);\r\n            cc._dom = htmlDom;\r\n            cc.fire = function (eventType, data, bubbles, cancelable) {\r\n                if (bubbles === void 0) { bubbles = false; }\r\n                if (cancelable === void 0) { cancelable = true; }\r\n                var event = new Event(eventType.toLowerCase(), { \"bubbles\": bubbles, \"cancelable\": cancelable });\r\n                event['data'] = data;\r\n                cc._dom.dispatchEvent(event);\r\n            };\r\n            this.uku.registerController(randomAlias, cc);\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var attr = attrs[i];\r\n                //todo need Refactor\r\n                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\r\n                    || attr.nodeName.search(\"uku-on\") !== -1\r\n                    || attr.nodeName === \"uku-render\"\r\n                    || attr.nodeName === \"uku-visible\") {\r\n                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\r\n                }\r\n                else {\r\n                    var tagName = UkuleleUtil_1.UkuleleUtil.getAttrFromUkuTag(attr.nodeName, true);\r\n                    var controllerModel = this.defMgr.getControllerModelByName(attr.nodeValue);\r\n                    if (controllerModel) {\r\n                        var boundItem = new BoundItemComponentAttribute_1.BoundItemComponentAttribute(attr.nodeValue, tagName, cc, this.uku);\r\n                        controllerModel.addBoundItem(boundItem);\r\n                        boundItem.render(controllerModel.controllerInstance);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0; i < attrs.length; i++) {\r\n                var attr = attrs[i];\r\n                //todo need Refactor\r\n                if (UkuleleUtil_1.UkuleleUtil.searchUkuAttrTag(attr.nodeName) !== 0\r\n                    || attr.nodeName.search(\"uku-on\") !== -1\r\n                    || attr.nodeName === \"uku-render\"\r\n                    || attr.nodeName === \"uku-visible\") {\r\n                    htmlDom.setAttribute(attr.nodeName, attr.nodeValue);\r\n                }\r\n            }\r\n        }\r\n        tag.parentNode.removeChild(tag);\r\n        if (htmlDom.children && htmlDom.children.length > 0) {\r\n            var ac_2 = new AsyncCaller_1.AsyncCaller();\r\n            for (var j = 0; j < htmlDom.children.length; j++) {\r\n                var child = htmlDom.children[j];\r\n                ac_2.pushQueue(this.searchComponent.bind(this), [child, function () {\r\n                        _this.searchComponent.resolve(ac_2);\r\n                    }]);\r\n            }\r\n            ac_2.exec(function () {\r\n                if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\r\n                    cc._initialized();\r\n                }\r\n                callback && callback(htmlDom);\r\n            });\r\n        }\r\n        else {\r\n            if (cc && cc._initialized && typeof (cc._initialized) === 'function') {\r\n                cc._initialized();\r\n            }\r\n            callback && callback(htmlDom);\r\n        }\r\n    };\r\n    Analyzer.prototype.searchExpression = function (element) {\r\n        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(Selector_1.Selector.directText(element)) !== -1) {\r\n            if (!UkuleleUtil_1.UkuleleUtil.isRepeat(element) && !UkuleleUtil_1.UkuleleUtil.isInRepeat(element)) {\r\n                //normal expression\r\n                this.dealWithExpression(element);\r\n            }\r\n        }\r\n        for (var i = 0; i < element.children.length; i++) {\r\n            this.searchExpression(element.children[i]);\r\n        }\r\n    };\r\n    Analyzer.prototype.dealWithExpression = function (element) {\r\n        //通常的花括号声明方式\r\n        var expression = Selector_1.Selector.directText(element);\r\n        if (UkuleleUtil_1.UkuleleUtil.searchUkuExpTag(expression) !== -1) {\r\n            var attr = expression.slice(2, -2);\r\n            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n            if (controllerModel) {\r\n                var boundItem = new BoundItemExpression_1.BoundItemExpression(attr, expression, element, this.uku);\r\n                controllerModel.addBoundItem(boundItem);\r\n                boundItem.render(controllerModel.controllerInstance);\r\n            }\r\n        }\r\n    };\r\n    //\r\n    Analyzer.prototype.dealWithInnerText = function (element) {\r\n        var attr = element.getAttribute(\"uku-text\");\r\n        if (attr) {\r\n            var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n            if (controllerModel) {\r\n                var boundItem = new BoundItemInnerText_1.BoundItemInnerText(attr, element, this.uku);\r\n                controllerModel.addBoundItem(boundItem);\r\n                boundItem.render(controllerModel.controllerInstance);\r\n            }\r\n        }\r\n    };\r\n    //处理 事件 event\r\n    Analyzer.prototype.dealWithEvent = function (element, eventName) {\r\n        var _this = this;\r\n        var expression = element.getAttribute(\"uku-\" + eventName);\r\n        var eventNameInListener = eventName.substring(2);\r\n        eventNameInListener = eventNameInListener.toLowerCase();\r\n        var controllerModel = this.defMgr.getControllerModelByName(expression);\r\n        if (controllerModel) {\r\n            var controller_1 = controllerModel.controllerInstance;\r\n            var temArr = expression.split(\".\");\r\n            var alias_1;\r\n            if (temArr[0] === \"parent\") {\r\n                alias_1 = temArr[1];\r\n            }\r\n            else {\r\n                alias_1 = temArr[0];\r\n            }\r\n            EventListener_1.EventListener.addEventListener(element, eventNameInListener, function (event) {\r\n                _this.defMgr.copyControllerInstance(controller_1, alias_1);\r\n                _this.defMgr.getBoundAttributeValue(expression, event);\r\n                _this.uku.refresh(alias_1, element);\r\n            });\r\n        }\r\n    };\r\n    //处理 repeat\r\n    Analyzer.prototype.dealWithRepeat = function (element) {\r\n        var repeatExpression = element.getAttribute(\"uku-repeat\");\r\n        var tempArr = repeatExpression.split(' in ');\r\n        var itemName = tempArr[0];\r\n        var attr = tempArr[1];\r\n        var controllerModel = this.defMgr.getControllerModelByName(attr);\r\n        if (controllerModel) {\r\n            var controllerInst = controllerModel.controllerInstance;\r\n            var boundItem = new BoundItemRepeat_1.BoundItemRepeat(attr, itemName, element, this.uku);\r\n            controllerModel.addBoundItem(boundItem);\r\n            boundItem.render(controllerInst);\r\n        }\r\n    };\r\n    Analyzer.ANALYIZE_COMPLETED = 'analyizeCompleted';\r\n    return Analyzer;\r\n}(EventEmitter_1.EventEmitter));\r\nexports.Analyzer = Analyzer;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/Analyzer.ts\n ** module id = 16\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = require(\"./BoundItemBase\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar BoundItemAttribute = (function (_super) {\r\n    __extends(BoundItemAttribute, _super);\r\n    function BoundItemAttribute(attrName, ukuTag, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.ukuTag = ukuTag;\r\n    }\r\n    BoundItemAttribute.prototype.render = function (controller) {\r\n        var attr = this.attributeName;\r\n        var key;\r\n        var elementName = this.element.tagName;\r\n        if (this.ukuTag === \"selected\" && elementName === \"SELECT\") {\r\n            var tempArr = this.attributeName.split(\"|\");\r\n            attr = tempArr[0];\r\n            key = tempArr[1];\r\n        }\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, attr);\r\n        if (this.ukuTag.search('data-item') !== -1) {\r\n            finalValue = JSON.stringify(finalValue);\r\n            this.element.setAttribute('data-item', finalValue);\r\n        }\r\n        else if (this.ukuTag === \"selected\" && elementName === \"SELECT\") {\r\n            var value = void 0;\r\n            if (key) {\r\n                value = finalValue[key];\r\n            }\r\n            else {\r\n                value = finalValue;\r\n            }\r\n            this.element.value = value;\r\n        }\r\n        else if (this.element.getAttribute(\"type\") === \"checkbox\") {\r\n            this.element.checked = finalValue;\r\n        }\r\n        else if (this.ukuTag === \"value\") {\r\n            this.element.value = finalValue;\r\n        }\r\n        else if (this.element.getAttribute(\"type\") === \"radio\") {\r\n            if (this.element.value === finalValue) {\r\n                this.element.setAttribute(\"checked\", \"true\");\r\n            }\r\n        }\r\n        else if (this.element.nodeName === \"IMG\" && this.ukuTag === \"src\") {\r\n            if (finalValue) {\r\n                this.element.setAttribute(this.ukuTag, finalValue);\r\n            }\r\n        }\r\n        else if (this.ukuTag === \"style\") {\r\n            for (var cssName in finalValue) {\r\n                this.element.style[cssName] = finalValue[cssName];\r\n            }\r\n        }\r\n        else if (this.ukuTag === \"visible\") {\r\n            if (finalValue) {\r\n                this.element.style.visibility = \"visible\";\r\n            }\r\n            else {\r\n                this.element.style.visibility = \"hidden\";\r\n            }\r\n        }\r\n        else if (this.ukuTag === \"render\") {\r\n            if (finalValue) {\r\n                var oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\r\n                if (oldDisplaySetting !== null) {\r\n                    this.element.style.display = oldDisplaySetting;\r\n                }\r\n            }\r\n            else {\r\n                var oldDisplaySetting = this.element.getAttribute(\"data-old-display\");\r\n                if (oldDisplaySetting === null) {\r\n                    oldDisplaySetting = this.element.style.display;\r\n                    this.element.setAttribute(\"data-old-display\", oldDisplaySetting);\r\n                }\r\n                this.element.style.display = \"none\";\r\n            }\r\n        }\r\n        else {\r\n            if (this.ukuTag === \"disabled\") {\r\n                this.element.disabled = finalValue;\r\n            }\r\n            else {\r\n                this.element.setAttribute(this.ukuTag, finalValue);\r\n            }\r\n        }\r\n    };\r\n    return BoundItemAttribute;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemAttribute = BoundItemAttribute;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/BoundItemAttribute.ts\n ** module id = 17\n ** module chunks = 0\n **/","\"use strict\";\r\nvar BoundItemBase = (function () {\r\n    function BoundItemBase(_attrName, _element, _uku) {\r\n        this.attributeName = _attrName;\r\n        this.element = _element;\r\n        this.uku = _uku;\r\n    }\r\n    BoundItemBase.prototype.render = function (controller) {\r\n    };\r\n    return BoundItemBase;\r\n}());\r\nexports.BoundItemBase = BoundItemBase;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/BoundItemBase.ts\n ** module id = 18\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = require(\"./BoundItemBase\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar Selector_1 = require(\"../extend/Selector\");\r\nvar BoundItemExpression = (function (_super) {\r\n    __extends(BoundItemExpression, _super);\r\n    function BoundItemExpression(attrName, expression, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.expression = expression;\r\n    }\r\n    BoundItemExpression.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        Selector_1.Selector.directText(this.element, finalValue);\r\n    };\r\n    return BoundItemExpression;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemExpression = BoundItemExpression;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/BoundItemExpression.ts\n ** module id = 19\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = require(\"./BoundItemBase\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar BoundItemInnerText = (function (_super) {\r\n    __extends(BoundItemInnerText, _super);\r\n    function BoundItemInnerText(attrName, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.tagName = 'text';\r\n    }\r\n    BoundItemInnerText.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        this.element.innerHTML = finalValue;\r\n    };\r\n    return BoundItemInnerText;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemInnerText = BoundItemInnerText;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/BoundItemInnerText.ts\n ** module id = 20\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = require(\"./BoundItemBase\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar BoundItemRepeat = (function (_super) {\r\n    __extends(BoundItemRepeat, _super);\r\n    function BoundItemRepeat(attrName, itemName, element, uku) {\r\n        _super.call(this, attrName, element, uku);\r\n        this.expression = itemName;\r\n        this.renderTemplate = element.outerHTML;\r\n        this.parentElement = element.parentNode;\r\n        this.beginCommentString = undefined;\r\n        this.endCommentString = undefined;\r\n    }\r\n    BoundItemRepeat.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        if (!finalValue) {\r\n            return;\r\n        }\r\n        var self = this;\r\n        if (this.element && this.element.parentNode) {\r\n            //create repeate begin comment\r\n            this.beginCommentString = \"begin uku-repeat: \" + this.expression + \" in \" + this.attributeName;\r\n            var beginComment = document.createComment(this.beginCommentString);\r\n            this.element.parentNode.insertBefore(beginComment, this.element);\r\n            //create repeate end comment\r\n            this.endCommentString = \"end uku-repeat: \" + this.expression + \" in \" + this.attributeName;\r\n            var endComment = document.createComment(this.endCommentString);\r\n            this.element.parentNode.insertBefore(endComment, this.element.nextSibling);\r\n            //remove definition dom\r\n            this.element.parentNode.removeChild(this.element);\r\n        }\r\n        var treeWalker = document.createTreeWalker(this.parentElement, NodeFilter.SHOW_COMMENT, { acceptNode: function (node) {\r\n                if (node.nodeValue === self.beginCommentString) {\r\n                    return NodeFilter.FILTER_ACCEPT;\r\n                }\r\n                return NodeFilter.FILTER_SKIP;\r\n            } }, false);\r\n        /*function filter(node:Node) :any{\r\n            if (node.nodeValue === self.beginCommentString) {\r\n                return (NodeFilter.FILTER_ACCEPT);\r\n            }\r\n            return (NodeFilter.FILTER_SKIP);\r\n        }*/\r\n        function generateTempContainer() {\r\n            var index = UkuleleUtil_1.UkuleleUtil.searchHtmlTag(self.renderTemplate, \"tr\");\r\n            if (index === -1) {\r\n                return document.createElement(\"div\");\r\n            }\r\n            else {\r\n                return document.createElement(\"tbody\");\r\n            }\r\n        }\r\n        while (treeWalker.nextNode()) {\r\n            var commentNode = treeWalker.currentNode;\r\n            if (commentNode && commentNode.nodeValue === this.beginCommentString) {\r\n                //remove overtime dom.\r\n                while (commentNode.nextSibling && commentNode.nextSibling.nodeValue !== this.endCommentString) {\r\n                    commentNode.parentNode.removeChild(commentNode.nextSibling);\r\n                }\r\n                //create new dom\r\n                var tempDiv = generateTempContainer();\r\n                var blankDiv = generateTempContainer();\r\n                commentNode.parentNode.insertBefore(blankDiv, commentNode.nextSibling);\r\n                for (var i = 0; i < finalValue.length; i++) {\r\n                    tempDiv.insertAdjacentHTML('beforeEnd', this.renderTemplate);\r\n                    if (i === finalValue.length - 1) {\r\n                        var childrenHTML = tempDiv.innerHTML;\r\n                        blankDiv.insertAdjacentHTML('beforeBegin', childrenHTML);\r\n                        commentNode.parentNode.removeChild(blankDiv);\r\n                        tempDiv = null;\r\n                        blankDiv = null;\r\n                    }\r\n                }\r\n                var child = commentNode.nextSibling;\r\n                for (var j = 0; j < finalValue.length; j++) {\r\n                    child.removeAttribute(\"uku-repeat\");\r\n                    var Uku_Clazz = this.uku.constructor;\r\n                    var ukulele = new Uku_Clazz(); //new Ukulele();\r\n                    ukulele.parentUku = this.uku;\r\n                    var compDef = ukulele.parentUku._internal_getDefinitionManager().getComponentsDefinition();\r\n                    var compPool = ukulele.parentUku._internal_getDefinitionManager().getComponentsPool();\r\n                    ukulele._internal_getDefinitionManager().setComponentsDefinition(compDef);\r\n                    ukulele._internal_getDefinitionManager().setComponentsPool(compPool);\r\n                    var sibling = child.nextSibling;\r\n                    var itemType = typeof finalValue[j];\r\n                    if (itemType === \"object\") {\r\n                        ukulele.registerController(this.expression, finalValue[j]);\r\n                    }\r\n                    else {\r\n                        ukulele.registerController(this.expression, { 'value': finalValue[j] });\r\n                        var newOuterHtml = child.outerHTML.replace(new RegExp(this.expression, \"gm\"), this.expression + '.value');\r\n                        child.insertAdjacentHTML('afterend', newOuterHtml);\r\n                        var newItemDom = child.nextSibling;\r\n                        child.parentNode.removeChild(child);\r\n                        child = newItemDom;\r\n                    }\r\n                    ukulele._internal_dealWithElement(child);\r\n                    child = sibling;\r\n                }\r\n            }\r\n        }\r\n        if (this.element.tagName === \"OPTION\") {\r\n            var expression = this.parentElement.getAttribute(\"uku-selected\");\r\n            var tempArr = expression.split(\"|\");\r\n            expression = tempArr[0];\r\n            var key = tempArr[1];\r\n            var value = this.uku._internal_getDefinitionManager().getFinalValueByExpression(expression);\r\n            if (key) {\r\n                this.parentElement.value = value[key];\r\n            }\r\n            else {\r\n                this.parentElement.value = value;\r\n            }\r\n        }\r\n    };\r\n    return BoundItemRepeat;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemRepeat = BoundItemRepeat;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/BoundItemRepeat.ts\n ** module id = 21\n ** module chunks = 0\n **/","\"use strict\";\r\nvar __extends = (this && this.__extends) || function (d, b) {\r\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n};\r\nvar BoundItemBase_1 = require(\"./BoundItemBase\");\r\nvar UkuleleUtil_1 = require(\"../util/UkuleleUtil\");\r\nvar BoundItemComponentAttribute = (function (_super) {\r\n    __extends(BoundItemComponentAttribute, _super);\r\n    function BoundItemComponentAttribute(attrName, ukuTag, cc, uku) {\r\n        _super.call(this, attrName, null, uku);\r\n        this.ukuTag = ukuTag;\r\n        this.componentController = cc;\r\n    }\r\n    BoundItemComponentAttribute.prototype.render = function (controller) {\r\n        var finalValue = UkuleleUtil_1.UkuleleUtil.getFinalValue(this.uku, controller, this.attributeName);\r\n        this.componentController[this.ukuTag] = finalValue;\r\n        this.uku.refresh(this.componentController._alias);\r\n    };\r\n    return BoundItemComponentAttribute;\r\n}(BoundItemBase_1.BoundItemBase));\r\nexports.BoundItemComponentAttribute = BoundItemComponentAttribute;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/model/BoundItemComponentAttribute.ts\n ** module id = 22\n ** module chunks = 0\n **/","\"use strict\";\r\nvar UkuleleUtil_1 = require('../util/UkuleleUtil');\r\nvar EventListener_1 = require('../extend/EventListener');\r\nvar Selector_1 = require('../extend/Selector');\r\nfunction elementChangedBinder(element, tagName, controllerModel, handler, host) {\r\n    var elementStrategies = [inputTextCase, textareaCase, selectCase, checkboxCase, radioCase];\r\n    for (var i = 0; i < elementStrategies.length; i++) {\r\n        var func = elementStrategies[i];\r\n        var goon = func.apply(this, arguments);\r\n        if (goon) {\r\n            break;\r\n        }\r\n    }\r\n}\r\nexports.elementChangedBinder = elementChangedBinder;\r\nfunction inputTextCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === \"INPUT\" && isSupportInputType(element) && tagName === \"value\") {\r\n        var eventType = 'change';\r\n        var inputType = element.getAttribute('type');\r\n        if (inputType === \"text\") {\r\n            eventType = 'input';\r\n        }\r\n        EventListener_1.EventListener.addEventListener(element, eventType, function (e) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(\".\");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            finalInstance[temp[temp.length - 1]] = element.value;\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction isSupportInputType(element) {\r\n    var type = element.getAttribute(\"type\");\r\n    if (type !== \"checkbox\" && type !== \"radio\") {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction textareaCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === \"TEXTAREA\" && tagName === \"value\") {\r\n        EventListener_1.EventListener.addEventListener(element, 'input', function (e) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(\".\");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            finalInstance[temp[temp.length - 1]] = element.value;\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction selectCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if ((elementName === \"SELECT\" && tagName === \"selected\")) {\r\n        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            var key;\r\n            var tmpArr = attr.split(\"|\");\r\n            attr = tmpArr[0];\r\n            key = tmpArr[1];\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(\".\");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            var options = Selector_1.Selector.querySelectorAll(element, \"option\");\r\n            for (var j = 0; j < options.length; j++) {\r\n                var option = options[j];\r\n                if (option.selected) {\r\n                    var selectedItem = JSON.parse(option.getAttribute(\"data-item\"));\r\n                    finalInstance[temp[temp.length - 1]] = selectedItem;\r\n                }\r\n            }\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction checkboxCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === \"INPUT\" && tagName === \"value\" && element.getAttribute(\"type\") === \"checkbox\") {\r\n        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(\".\");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            finalInstance[temp[temp.length - 1]] = element.checked;\r\n            if (handler) {\r\n                handler.call(host, controllerModel.alias, element);\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\nfunction radioCase(element, tagName, controllerModel, handler, host) {\r\n    var elementName = element.tagName;\r\n    if (elementName === \"INPUT\" && tagName === \"selected\" && element.getAttribute(\"type\") === \"radio\") {\r\n        EventListener_1.EventListener.addEventListener(element, 'change', function (e) {\r\n            var attr = element.getAttribute(\"uku-\" + tagName);\r\n            attr = UkuleleUtil_1.UkuleleUtil.getFinalAttribute(attr);\r\n            var temp = attr.split(\".\");\r\n            var finalInstance = controllerModel.controllerInstance;\r\n            for (var i = 0; i < temp.length - 1; i++) {\r\n                finalInstance = finalInstance[temp[i]];\r\n            }\r\n            if (element.checked) {\r\n                finalInstance[temp[temp.length - 1]] = element.value;\r\n                if (handler) {\r\n                    handler.call(host, controllerModel.alias, element);\r\n                }\r\n            }\r\n        });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/core/ElementActionBinder.ts\n ** module id = 23\n ** module chunks = 0\n **/","\"use strict\";\r\nvar EventListener = (function () {\r\n    function EventListener() {\r\n    }\r\n    EventListener.addEventListener = function (element, eventType, handler) {\r\n        if (window.hasOwnProperty('jQuery') && typeof window['jQuery'] !== undefined) {\r\n            return window['jQuery'](element).on(eventType, function (e) {\r\n                handler && handler(e);\r\n            });\r\n        }\r\n        else {\r\n            return element.addEventListener(eventType, handler);\r\n        }\r\n    };\r\n    return EventListener;\r\n}());\r\nexports.EventListener = EventListener;\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/extend/EventListener.ts\n ** module id = 24\n ** module chunks = 0\n **/"],"sourceRoot":""}