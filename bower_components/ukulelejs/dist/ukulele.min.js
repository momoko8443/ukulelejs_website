!function(){function Analyzer(e){function t(e){for(var t=[],n=0;n<e.attributes.length;n++){var r=e.attributes[n];-1!==r.nodeName.search("uku-on")?t.push(r):t.unshift(r)}return t}function n(t,r){function i(t,r,i,l,o){var a="cc_"+Math.floor(1e4*Math.random()).toString();r=r.replace(new RegExp("cc.","gm"),a+".");var s=document.createElement("div");s.insertAdjacentHTML("afterBegin",r),s.children.length>1&&(r=s.outerHTML),t.insertAdjacentHTML("beforeBegin",r);var c,f=t.previousElementSibling;if(i){c=new i(e),c._dom=f,c.fire=function(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(e.toLowerCase(),!0,!0),n.data=t,c._dom.dispatchEvent(n)},e.registerController(a,c);for(var p=0;p<l.length;p++){var d=l[p];if(0!==UkuleleUtil.searchUkuAttrTag(d.nodeName)||-1!==d.nodeName.search("uku-on"))f.setAttribute(d.nodeName,d.nodeValue);else{var h=UkuleleUtil.getAttrFromUkuTag(d.nodeName,!0),m=u.getControllerModelByName(d.nodeValue);if(m){var g=new BoundItemComponentAttribute(d.nodeValue,h,c,e);m.addBoundItem(g),g.render(m.controllerInstance)}}}}if(t.parentNode.removeChild(t),f.children&&f.children.length>0){for(var v=new AsyncCaller,U=0;U<f.children.length;U++){var y=f.children[U];v.pushQueue(n,[y,function(){n.resolve(v)}])}v.exec(function(){c&&c._initialized&&"function"==typeof c._initialized&&c._initialized(),o&&o(f)})}else c&&c._initialized&&"function"==typeof c._initialized&&c._initialized(),o&&o(f)}var l=u.getComponent(t.localName);if(l){if(l.lazy)UkuleleUtil.isRepeat(t)||UkuleleUtil.isInRepeat(t)||u.addLazyComponentDefinition(l.tagName,l.templateUrl,function(){var e=t.attributes,n=u.getComponentsDefinition()[l.tagName];i(t,n.template,n.controllerClazz,e,function(e){r&&r(e)})});else if(!UkuleleUtil.isRepeat(t)&&!UkuleleUtil.isInRepeat(t)){var o=t.attributes,a=u.getComponentsDefinition()[l.tagName];i(t,a.template,a.controllerClazz,o,function(e){r&&r(e)})}}else if(t.children&&t.children.length>0){for(var s=new AsyncCaller,c=0;c<t.children.length;c++){var f=t.children[c];s.pushQueue(n,[f,function(){n.resolve(s)}])}s.exec(function(){r&&r(t)})}else r&&r(t)}function r(t){function n(t){var n=Selector.directText(t);if(-1!==UkuleleUtil.searchUkuExpTag(n)){var r=n.slice(2,-2),i=u.getControllerModelByName(r);if(i){var l=new BoundItemExpression(r,n,t,e);i.addBoundItem(l),l.render(i.controllerInstance)}}}-1!==UkuleleUtil.searchUkuExpTag(Selector.directText(t))&&(UkuleleUtil.isRepeat(t)||UkuleleUtil.isInRepeat(t)||n(t));for(var i=0;i<t.children.length;i++)r(t.children[i])}function i(t,n){var r=t.getAttribute("uku-"+n),i=(t.tagName,u.getControllerModelByName(r));if(i){var l=new BoundItemAttribute(r,n,t,e);i.addBoundItem(l),l.render(i.controllerInstance),elementChangedBinder(t,n,i,e.refresh)}}function l(t){var n=t.getAttribute("uku-text");if(n){var r=u.getControllerModelByName(n);if(r){var i=new BoundItemInnerText(n,t,e);r.addBoundItem(i),i.render(r.controllerInstance)}}}function o(t,n){var r=t.getAttribute("uku-"+n),i=n.substring(2);i=i.toLowerCase();var l=u.getControllerModelByName(r);if(l){var o,a=l.controllerInstance,s=r.split(".");o="parent"===s[0]?s[1]:s[0],EventListener.addEventListener(t,i,function(n){u.copyControllerInstance(a,o),u.getBoundAttributeValue(r,arguments),e.refresh(o,t)})}}function a(t){var n=t.getAttribute("uku-repeat"),r=n.split(" in "),i=r[0],l=r[1],o=u.getControllerModelByName(l);if(o){var a=o.controllerInstance,s=new BoundItemRepeat(l,i,t,e);o.addBoundItem(s),s.render(a)}}EventEmitter.call(this);var u=e._internal_getDefinitionManager();this.analyizeElement=function(e){var s=this;n(e,function(e){var n=[],c=Selector.fuzzyFind(e,"uku-");c&&n.push(c);for(var f=Selector.querySelectorAll(e,"*"),p=0;p<f.length;p++){var d=f[p],h=Selector.fuzzyFind(d,"uku-");h&&!UkuleleUtil.isInRepeat(h)&&n.push(h)}r(e);for(var m=0;m<n.length;m++)for(var g=n[m],v=t(g),U=0;U<v.length;U++){var y=v[U];if(UkuleleUtil.searchUkuAttrTag(y.nodeName)>-1){var k=y.nodeName.split("-");k.shift();var C=k.join("-");"application"!==C&&(0===C.search("on")?UkuleleUtil.isRepeat(g)||UkuleleUtil.isInRepeat(g)||o(g,C):-1!==C.search("repeat")?a(g):UkuleleUtil.isRepeat(g)||UkuleleUtil.isInRepeat(g)||("text"!==C?i(g,C):l(g)))}}u.copyAllController(),s.hasListener(Analyzer.ANALYIZE_COMPLETED)&&s.dispatchEvent({eventType:Analyzer.ANALYIZE_COMPLETED,element:e})})}}function DefinitionManager(uku){function getBoundControllerModelByName(e){var t=UkuleleUtil.getBoundModelInstantName(e),n=controllersDefinition[t];if(!n){var r=e.split("."),i=r[0];if("parent"===i&&self.parentUku)return r.shift(),e=r.join("."),self.parentUku._internal_getDefinitionManager().getControllerModelByName(e)}return n}function analyizeComponent(e,t,n){var r=t.dependentScripts;if(r&&r.length>0){var i,l=new AsyncCaller;"function"==typeof define&&define.amd&&(i=define,define=void 0);for(var o=0;o<r.length;o++){var a=r[o];l.pushAll(loadDependentScript,[l,a])}l.exec(function(){i&&(define=i),buildeComponentModel(e,t.template,t.componentControllerScript),n()})}else buildeComponentModel(e,t.template,t.componentControllerScript),n()}function buildeComponentModel(tag,template,script){var debugComment="//@ sourceURL="+tag+".js";script+=debugComment;try{var controllerClazz=eval(script),newComp=new ComponentModel(tag,template,controllerClazz);componentsDefinition[tag]=newComp}catch(e){console.error(e)}}function loadDependentScript(e,t){if(dependentScriptsCache[t])loadDependentScript.resolve(e);else{var n=document.getElementsByTagName("HEAD")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t,r.onload=function(t){dependentScriptsCache[t.target.src]=!0,loadDependentScript.resolve(e)},n.appendChild(r)}}var controllersDefinition={},componentsDefinition={},componentsPool={},copyControllers={},ajax=new Ajax;this.getComponentsDefinition=function(){return componentsDefinition},this.setComponentsDefinition=function(e){componentsDefinition=e},this.getComponentDefinition=function(e){return componentsDefinition[e]},this.getControllerDefinition=function(e){return controllersDefinition[e]},this.getControllersDefinition=function(){return controllersDefinition},this.getComponent=function(e){return componentsPool[e]},this.getCopyControllers=function(){return copyControllers},this.copyAllController=function(){for(var e in controllersDefinition){var t=controllersDefinition[e],n=t.controllerInstance;this.copyControllerInstance(n,e)}},this.copyControllerInstance=function(e,t){var n=ObjectUtil.deepClone(e);delete copyControllers[t],copyControllers[t]=n},this.addControllerDefinition=function(e,t){var n=new ControllerModel(e,t);t._alias=e,controllersDefinition[e]=n},this.addComponentDefinition=function(e,t,n,r){function i(e,n){ajax.get(t,function(t){var n=UkuleleUtil.getComponentConfiguration(t);analyizeComponent(e,n,function(){i.resolve(r)})})}n?(componentsPool[e]={tagName:e,templateUrl:t,lazy:!1},r.pushAll(i,[e,t])):componentsPool[e]={tagName:e,templateUrl:t,lazy:!0}},this.addLazyComponentDefinition=function(e,t,n){ajax.get(t,function(r){var i=UkuleleUtil.getComponentConfiguration(r);analyizeComponent(e,i,function(){componentsPool[e]={tagName:e,templateUrl:t,lazy:!1},n()})})},this.getBoundAttributeValue=function(e,t){var n=getBoundControllerModelByName(e),r=n.controllerInstance,i=UkuleleUtil.getFinalValue(self,r,e,t);return i},this.getControllerModelByName=function(e){return getBoundControllerModelByName(e)},this.getFinalValueByExpression=function(e){var t=this.getControllerModelByName(e).controllerInstance;return UkuleleUtil.getFinalValue(this,t,e)};var dependentScriptsCache={}}function DirtyChecker(e){var t=e._internal_getDefinitionManager();this.runDirtyChecking=function(n,r){function i(n){var i=t.getControllersDefinition()[n];if(!i)return void(e.parentUku&&e.parentUku.refresh(n));for(var l=i.controllerInstance,o=t.getCopyControllers()[n],a=0,u=0;u<i.boundItems.length;u++){var s=i.boundItems[u],c=s.attributeName;if(c.search("parent.")>-1)return;if(o){"selected"===s.ukuTag&&(c=c.split("|")[0]);var f=UkuleleUtil.getFinalValue(e,l,c),p=UkuleleUtil.getFinalValue(e,o,c);if(!ObjectUtil.compare(p,f)){c=s.attributeName;for(var d=i.getBoundItemsByName(c),h=0;h<d.length;h++){var m=d[h];m.element===r&&"value"===m.ukuTag||(a++,m.render(l))}}}}a>0&&e.hasListener(Ukulele.REFRESH)&&e.dispatchEvent({eventType:Ukulele.REFRESH}),t.copyControllerInstance(l,n)}if(n){if("string"==typeof n)i(n);else if(ObjectUtil.isArray(n))for(var l=0;l<n.length;l++)i(n[l])}else for(var o in t.getControllersDefinition())i(o)}}function elementChangedBinder(e,t,n,r){for(var i=[inputTextCase,textareaCase,selectCase,checkboxCase,radioCase],l=0;l<i.length;l++){var o=i[l],a=o.apply(this,arguments);if(a)break}}function inputTextCase(e,t,n,r){var i=e.tagName;if("INPUT"===i&&isSupportInputType(e)&&"value"===t){var l="change",o=e.getAttribute("type");return"text"===o&&(l="input"),EventListener.addEventListener(e,l,function(i){var l=e.getAttribute("uku-"+t);l=UkuleleUtil.getFinalAttribute(l);for(var o=l.split("."),a=n.controllerInstance,u=0;u<o.length-1;u++)a=a[o[u]];a[o[o.length-1]]=e.value,r&&r(n.alias,e)}),!0}return!1}function isSupportInputType(e){var t=e.getAttribute("type");return"checkbox"!==t&&"radio"!==t}function textareaCase(e,t,n,r){var i=e.tagName;return"TEXTAREA"===i&&"value"===t?(EventListener.addEventListener(e,"input",function(i){var l=e.getAttribute("uku-"+t);l=UkuleleUtil.getFinalAttribute(l);for(var o=l.split("."),a=n.controllerInstance,u=0;u<o.length-1;u++)a=a[o[u]];a[o[o.length-1]]=e.value,r&&r(n.alias,e)}),!0):!1}function selectCase(e,t,n,r){var i=e.tagName;return"SELECT"===i&&"selected"===t?(EventListener.addEventListener(e,"change",function(i){var l,o=e.getAttribute("uku-"+t),a=o.split("|");o=a[0],l=a[1],o=UkuleleUtil.getFinalAttribute(o);for(var u=o.split("."),s=n.controllerInstance,c=0;c<u.length-1;c++)s=s[u[c]];for(var f=Selector.querySelectorAll(e,"option"),p=0;p<f.length;p++){var d=f[p];if(d.selected){var h=JSON.parse(d.getAttribute("data-item"));s[u[u.length-1]]=h}}r&&r(n.alias,e)}),!0):!1}function checkboxCase(e,t,n,r){var i=e.tagName;return"INPUT"===i&&"value"===t&&"checkbox"===e.getAttribute("type")?(EventListener.addEventListener(e,"change",function(i){var l=e.getAttribute("uku-"+t);l=UkuleleUtil.getFinalAttribute(l);for(var o=l.split("."),a=n.controllerInstance,u=0;u<o.length-1;u++)a=a[o[u]];a[o[o.length-1]]=e.checked,r&&r(n.alias,e)}),!0):!1}function radioCase(e,t,n,r){var i=e.tagName;return"INPUT"===i&&"selected"===t&&"radio"===e.getAttribute("type")?(EventListener.addEventListener(e,"change",function(i){var l=e.getAttribute("uku-"+t);l=UkuleleUtil.getFinalAttribute(l);for(var o=l.split("."),a=n.controllerInstance,u=0;u<o.length-1;u++)a=a[o[u]];e.checked&&(a[o[o.length-1]]=e.value,r&&r(n.alias,e))}),!0):!1}function EventEmitter(){this.eventsPool={}}function Ukulele(){"use strict";function e(){var e=Selector.querySelectorAll(document,"[uku-application]");if(1!==e.length)throw new Error("Only one 'uku-application' can be declared in a whole html.");t(e[0],function(e){l.dispatchEvent({eventType:Ukulele.INITIALIZED,element:e})})}function t(e,t){i||(i=new Analyzer(l)),t&&!function(e){i.addListener(Analyzer.ANALYIZE_COMPLETED,function(t){e(t.element)})}(t),i.analyizeElement(e)}EventEmitter.call(this);var n,r,i,l=this,o=new AsyncCaller;this.parentUku=null,this.init=function(){o.exec(function(){e()})},this.handleElement=function(e){t(e,function(t){l.dispatchEvent({eventType:Ukulele.HANDLE_ELEMENT_COMPLETED,element:e})})},this.registerController=function(e,t){this._internal_getDefinitionManager().addControllerDefinition(e,t)},this.getController=function(e){return this._internal_getDefinitionManager().getControllerDefinition(e).controllerInstance},this.registerComponent=function(e,t,n){this._internal_getDefinitionManager().addComponentDefinition(e,t,n,o)},this.getComponent=function(e){return this._internal_getDefinitionManager().getComponent(e)},this.refresh=function(e,t){r||(r=new DirtyChecker(this)),r.runDirtyChecking(e,t)},this._internal_getDefinitionManager=function(){return n||(n=new DefinitionManager(this)),n},this._internal_dealWithElement=function(e){t(e)}}function Ajax(){}function EventListener(){}function Selector(){}function BoundItemAttribute(e,t,n,r){BoundItemBase.call(this,e,n,r),this.ukuTag=t}function BoundItemBase(e,t,n){"use strict";this.attributeName=e,this.element=t,this.uku=n}function BoundItemComponentAttribute(e,t,n,r){BoundItemBase.call(this,e,null,r),this.ukuTag=t,this.componentController=n}function BoundItemExpression(e,t,n,r){BoundItemBase.call(this,e,n,r),this.expression=t}function BoundItemInnerText(e,t,n){BoundItemBase.call(this,e,t,n),this.tagName="text"}function BoundItemRepeat(e,t,n,r){BoundItemBase.call(this,e,n,r),this.expression=t,this.renderTemplate=n.outerHTML,this.parentElement=n.parentNode,this.beginCommentString=void 0,this.endCommentString=void 0}function ComponentModel(e,t,n){"use strict";this.tagName=e,this.template=t,this.controllerClazz=n}function ControllerModel(e,t){"use strict";this.alias=e,this.controllerInstance=t,this.boundItems=[]}function ArgumentUtil(){"use strict"}function AsyncCaller(){function e(){var e=r[0];r.shift(),e.func.apply(null,e.argu)}function t(){for(var e=0;e<n.length;e++){var t=n[e];t.func.apply(null,t.argu)}}var n=[],r=[];Function.prototype.resolve=function(e){e.aysncFunRunOver.call(e,this)},this.pushAll=function(e,t){if(0===r.length){var i={func:e,argu:t};n.push(i)}else console.error(l);return this},this.pushQueue=function(e,t){if(0===n.length){var i={func:e,argu:t};r.push(i)}else console.error(l);return this},this.aysncFunRunOver=function(e){if("queue"===i)if(0===r.length)this.finalFunc&&this.finalFunc();else{var t=r[0];r.shift(),t.func.apply(this,t.argu)}else if("all"===i){for(var l=0;l<n.length;l++){var o=n[l];if(e===o.func){n.splice(l,1);break}}0===n.length&&this.finalFunc&&this.finalFunc()}};var i="queue";this.exec=function(l){this.finalFunc=l,n.length>0?(i="all",t()):r.length>0?(i="queue",e()):this.finalFunc.call()};var l="Only one type of task can be executed at same time"}function ObjectUtil(){"use strict"}function UkuleleUtil(){"use strict"}"function"==typeof define&&define.amd?define("Ukulele",[],function(){return Ukulele}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=Ukulele),exports.Ukulele=Ukulele):window.Ukulele=Ukulele,Analyzer.ANALYIZE_COMPLETED="analyizeCompleted",EventEmitter.prototype.addListener=function(e,t){this.eventsPool[e]||(this.eventsPool[e]=[]),this.eventsPool[e].push(t)},EventEmitter.prototype.removeListener=function(e,t){if(this.eventsPool[e])for(var n=this.eventsPool[e].length-1;n>=0;n--)if(this.eventsPool[e][n]===t){this.eventsPool[e].splice(n,1);break}},EventEmitter.prototype.dispatchEvent=function(e){if(e&&e.eventType){var t=this.eventsPool[e.eventType];if(t)for(var n=0;n<t.length;n++)t[n].call(this,e)}},EventEmitter.prototype.hasListener=function(e){return!!(this.eventsPool[e]&&this.eventsPool[e].length>0)},Analyzer.prototype=new EventEmitter,Analyzer.prototype.constructor=Analyzer,Ukulele.prototype=new EventEmitter,Ukulele.prototype.constructor=Ukulele,Ukulele.INITIALIZED="initialized",Ukulele.REFRESH="refresh",Ukulele.HANDLE_ELEMENT_COMPLETED="handle_element_completed",Ajax.prototype.get=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status?t(r.responseText):n&&n())},r.open("GET",e,!0),r.send(null)},EventListener.addEventListener=function(e,t,n){return"undefined"!=typeof jQuery?jQuery(e).on(t,n):e.addEventListener(t,n)},Selector.querySelectorAll=function(e,t){return"undefined"!=typeof jQuery?jQuery(e).find(t):e.querySelectorAll(t)},Selector.fuzzyFind=function(e,t){if(e&&e.attributes)for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];if(r.nodeName.search(t)>-1)return e}return null},Selector.directText=function(e,t){for(var n="",r=e.childNodes,i=0;i<=r.length-1;i++){var l=r[i];if(3===l.nodeType){if(t||""===t||0===t||t===!1)return void(l.nodeValue=t);n+=l.nodeValue}}return n.trim()},Selector.parents=function(e){for(var t=[];e.parentNode&&"BODY"!==e.parentNode.tagName;)t.push(e.parentNode),e=e.parentNode;return t},BoundItemAttribute.prototype=new BoundItemBase,BoundItemAttribute.prototype.constructor=BoundItemAttribute,BoundItemAttribute.prototype.render=function(e){var t,n=this.attributeName,r=this.element.tagName;if("selected"===this.ukuTag&&"SELECT"===r){var i=this.attributeName.split("|");n=i[0],t=i[1]}var l=UkuleleUtil.getFinalValue(this.uku,e,n);if(-1!==this.ukuTag.search("data-item"))l=JSON.stringify(l),this.element.setAttribute("data-item",l);else if("selected"===this.ukuTag&&"SELECT"===r){var o;o=t?l[t]:l,this.element.value=o}else if("checkbox"===this.element.getAttribute("type"))this.element.checked=l;else if("value"===this.ukuTag)this.element.value=l;else if("radio"===this.element.getAttribute("type"))this.element.value===l&&this.element.setAttribute("checked",!0);else if("IMG"===this.element.nodeName&&"src"===this.ukuTag)l&&this.element.setAttribute(this.ukuTag,l);else if("style"===this.ukuTag)for(var a in l)this.element.style[a]=l[a];else"disabled"===this.ukuTag?this.element.disabled=l:this.element.setAttribute(this.ukuTag,l)},BoundItemComponentAttribute.prototype=new BoundItemBase,BoundItemComponentAttribute.prototype.constructor=BoundItemComponentAttribute,BoundItemComponentAttribute.prototype.render=function(e){var t=UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);this.componentController[this.ukuTag]=t,this.uku.refresh(this.componentController._alias)},BoundItemExpression.prototype=new BoundItemBase,BoundItemExpression.prototype.constructor=BoundItemExpression,BoundItemExpression.prototype.render=function(e){var t=UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);Selector.directText(this.element,t)},BoundItemInnerText.prototype=new BoundItemBase,BoundItemInnerText.prototype.constructor=BoundItemInnerText,BoundItemInnerText.prototype.render=function(e){var t=UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);this.element.innerHTML=t},BoundItemRepeat.prototype=new BoundItemBase,BoundItemRepeat.prototype.constructor=BoundItemRepeat,BoundItemRepeat.prototype.render=function(e){function t(e){return e.nodeValue===i.beginCommentString?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}function n(){var e=UkuleleUtil.searchHtmlTag(i.renderTemplate,"tr");return-1===e?document.createElement("div"):document.createElement("tbody")}var r=UkuleleUtil.getFinalValue(this.uku,e,this.attributeName);if(r){var i=this;if(this.element&&this.element.parentNode){this.beginCommentString="begin uku-repeat: "+this.expression+" in "+this.attributeName;var l=document.createComment(this.beginCommentString);this.element.parentNode.insertBefore(l,this.element),this.endCommentString="end uku-repeat: "+this.expression+" in "+this.attributeName;var o=document.createComment(this.endCommentString);this.element.parentNode.insertBefore(o,this.element.nextSibling),this.element.parentNode.removeChild(this.element)}for(var a=document.createTreeWalker(this.parentElement,NodeFilter.SHOW_COMMENT,t,!1);a.nextNode();){var u=a.currentNode;if(u&&u.nodeValue===this.beginCommentString){for(;u.nextSibling&&u.nextSibling.nodeValue!==this.endCommentString;)u.parentNode.removeChild(u.nextSibling);var s=n(),c=n();u.parentNode.insertBefore(c,u.nextSibling);for(var f=0;f<r.length;f++)if(s.insertAdjacentHTML("beforeEnd",this.renderTemplate),f===r.length-1){var p=s.innerHTML;c.insertAdjacentHTML("beforeBegin",p),u.parentNode.removeChild(c),s=null,c=null}for(var d=u.nextSibling,h=0;h<r.length;h++){d.removeAttribute("uku-repeat");var m=new Ukulele;m.parentUku=this.uku;var g=m.parentUku._internal_getDefinitionManager().getComponentsDefinition();m._internal_getDefinitionManager().setComponentsDefinition(g);var v=d.nextSibling,U=typeof r[h];if("object"===U)m.registerController(this.expression,r[h]);else{m.registerController(this.expression,{value:r[h]});var y=d.outerHTML.replace(new RegExp(this.expression,"gm"),this.expression+".value");d.insertAdjacentHTML("afterend",y);var k=d.nextSibling;d.parentNode.removeChild(d),d=k}m._internal_dealWithElement(d),d=v}}}if("OPTION"===this.element.tagName){var C=this.parentElement.getAttribute("uku-selected"),b=C.split("|");C=b[0],key=b[1];var A=this.uku._internal_getDefinitionManager().getFinalValueByExpression(C);key?this.parentElement.value=A[key]:this.parentElement.value=A}}},ControllerModel.prototype.addBoundItem=function(e){this.boundItems.push(e)},ControllerModel.prototype.getBoundItemsByName=function(e){for(var t=[],n=0;n<this.boundItems.length;n++){var r=this.boundItems[n];r.attributeName===e&&t.push(r)}return t},ArgumentUtil.analyze=function(e,t){e=e.replace(/'/g,'"');for(var n=e.split(","),r=0;r<n.length;r++){var i=n[r];for(var l in t._internal_getDefinitionManager().getControllersDefinition()){var o=i.search(l),a=i.search("parent.");(o>-1||a>-1)&&(n[r]='"'+i+'"')}}e=n.join(","),e="["+e+"]";try{var u=JSON.parse(e);return u}catch(s){return void console.error(s)}},ObjectUtil.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},ObjectUtil.getType=function(e){var t=typeof e;return"object"===t&&ObjectUtil.isArray(e)?"array":t},ObjectUtil.compare=function(e,t){var n=ObjectUtil.getType(e),r=ObjectUtil.getType(t),i=!0;if(n!==r)return!1;switch(n){case"object":for(var l in e){var o=e[l],a=t[l],u=ObjectUtil.compare(o,a);if(!u){i=!1;break}}break;case"array":if(e.length===t.length)for(var s=0;s<e.length;s++){var c=e[s],f=t[s],p=ObjectUtil.compare(c,f);if(!p){i=!1;break}}else i=!1;break;case"function":i=e.toString()===t.toString();break;default:i=e===t}return i},ObjectUtil.deepClone=function(e){var t,n,r;if("object"!=typeof e||null===e)return e;if(e instanceof Array)for(t=[],n=0,r=e.length;r>n;n++)"object"==typeof e[n]&&null!==e[n]?t[n]=arguments.callee(e[n]):t[n]=e[n];else{t={};for(n in e)"object"==typeof e[n]&&null!==e[n]&&"_dom"!==n?t[n]=arguments.callee(e[n]):t[n]=e[n]}return t},UkuleleUtil.getFinalAttribute=function(e){var t=e.split("."),n=t.shift();return"parent"===n?UkuleleUtil.getFinalAttribute(t.join(".")):t.join(".")},UkuleleUtil.searchHtmlTag=function(e,t){var n="^<"+t+"[\\s\\S]*>[\\s\\S]*</"+t+">$",r=new RegExp(n),i=e.search(r);return i},UkuleleUtil.getInnerHtml=function(e,t){var n="<"+t+"[\\s\\S]*>[\\s\\S]*</"+t+">",r=new RegExp(n),i=e.match(r);if(i.index>-1){var l=i[0],o=l.search(">"),a=l.substr(o+1),u=a.lastIndexOf("</");return a=a.substring(0,u),a=a.replace(/(^\s*)|(\s*$)/g,""),console.log(a),a}return null},UkuleleUtil.getComponentConfiguration=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=Selector.querySelectorAll(t,"template"),r=Selector.querySelectorAll(t,"script"),i=[],l=null,o=0;o<r.length;o++){var a=r[o];""!==a.src?i.push(a.src):l=a.innerHTML}return{template:n[0].innerHTML,dependentScripts:i,componentControllerScript:l}},UkuleleUtil.searchUkuAttrTag=function(e){var t=/^uku\-.*/,n=e.search(t);return n},UkuleleUtil.getAttrFromUkuTag=function(e,t){if(0===UkuleleUtil.searchUkuAttrTag(e)&&(e=e.replace("uku-","")),t){var n=e.split("-");e=n[0];for(var r=1;r<n.length;r++){var i=n[r].charAt(0).toUpperCase();e=e+i+n[r].substr(1)}}return e},UkuleleUtil.searchUkuExpTag=function(e){var t=/^\{\{.*\}\}$/,n=e.search(t);return n},UkuleleUtil.searchUkuFuncArg=function(e){var t=/\(.*\)$/,n=e.search(t);return n},UkuleleUtil.isRepeat=function(e){return!!e.getAttribute("uku-repeat")},UkuleleUtil.isInRepeat=function(e){for(var t=Selector.parents(e),n=0;n<t.length;n++){var r=t[n];if(9!==r.nodeType){var i=r.getAttribute("uku-repeat");if(i)return!0}}return!1},UkuleleUtil.getBoundModelInstantName=function(e){var t=e.split(".")[0];return t?t:null},UkuleleUtil.getAttributeFinalValue=function(e,t){var n=UkuleleUtil.getAttributeFinalValueAndParent(e,t),r=n.value;return r},UkuleleUtil.getAttributeFinalValueAndParent=function(e,t){var n,r=e;if("string"==typeof t){var i=UkuleleUtil.getFinalAttribute(t),l=i.split(".");if(""!==i&&r)for(var o=0;o<l.length;o++){var a=l[o];if(n=r,r=r[a],void 0===r||null===r)break}else r=e.hasOwnProperty("_alias")&&e._alias===t?e:t}return{value:r,parent:n}},UkuleleUtil.getFinalValue=function(e,t,n,r){var i=-1;if("string"==typeof n&&(i=UkuleleUtil.searchUkuFuncArg(n)),-1===i)return UkuleleUtil.getAttributeFinalValue(t,n);var l=n.substring(0,i),o=UkuleleUtil.getAttributeFinalValueAndParent(t,l),a=o.value;if(void 0===a)return a;var u=[],s=n.substring(i+1,n.length-1);if(""!==s){s=ArgumentUtil.analyze(s,e);for(var c=0;c<s.length;c++){var f,p=s[c],d=typeof p,h=null;if("string"===d){if(h=e._internal_getDefinitionManager().getControllerModelByName(p),h&&h.controllerInstance){var m=h.controllerInstance;f=1===p.split(".").length?m:UkuleleUtil.getFinalValue(e,m,p)}else f=UkuleleUtil.getFinalValue(e,t,p);u.push(f)}else u.push(p)}}if(r){var g=Array.prototype.slice.call(r);u=u.concat(g)}return a=a.apply(o.parent,u)}}();